function _hasAncestor(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.L={})}(this,function(t){"use strict";function e(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++)for(e in o=arguments[i])t[e]=o[e];return t}var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function n(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var o=0;function s(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function r(t,e,i){var n,o,s,r;return r=function(){n=!1,o&&(s.apply(i,o),o=!1)},s=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)}}function a(t,e,i){var n=e[1],o=e[0],s=n-o;return t===n&&i?t:((t-o)%s+s)%s+o}function h(){return!1}function l(t,e){var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return c(t).split(/\s+/)}function u(t,e){for(var n in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n];return t.options}function p(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var f=/\{ *([\w_-]+) *\}/g;function m(t,e){return t.replace(f,function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n})}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function _(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var v="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function y(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function x(t){var e=+new Date,i=Math.max(0,16-(e-b));return b=e+i,window.setTimeout(t,i)}var w=window.requestAnimationFrame||y("RequestAnimationFrame")||x,k=window.cancelAnimationFrame||y("CancelAnimationFrame")||y("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function T(t,e,i){if(!i||w!==x)return w.call(window,n(t,e));t.call(e)}function S(t){t&&k.call(window,t)}var C={extend:e,create:i,bind:n,lastId:o,stamp:s,throttle:r,wrapNum:a,falseFn:h,formatNum:l,trim:c,splitWords:d,setOptions:u,getParamString:p,template:m,isArray:g,indexOf:_,emptyImageUrl:v,requestFn:w,cancelFn:k,requestAnimFrame:T,cancelAnimFrame:S};function M(){}M.extend=function(t){var n=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=n.__super__=this.prototype,s=i(o);for(var r in s.constructor=n,n.prototype=s,this)Object.prototype.hasOwnProperty.call(this,r)&&"prototype"!==r&&"__super__"!==r&&(n[r]=this[r]);return t.statics&&(e(n,t.statics),delete t.statics),t.includes&&(!function(t){if("undefined"==typeof L||!L||!L.Mixin)return;t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}(t.includes),e.apply(null,[s].concat(t.includes)),delete t.includes),s.options&&(t.options=e(i(s.options),t.options)),e(s,t),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=s._initHooks.length;t<e;t++)s._initHooks[t].call(this)}},n},M.include=function(t){return e(this.prototype,t),this},M.mergeOptions=function(t){return e(this.prototype.options,t),this},M.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var E={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var o=0,s=(t=d(t)).length;o<s;o++)this._on(t[o],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else for(var o=0,s=(t=d(t)).length;o<s;o++)this._off(t[o],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),i===this&&(i=void 0);for(var o={fn:e,ctx:i},s=n,r=0,a=s.length;r<a;r++)if(s[r].fn===e&&s[r].ctx===i)return;s.push(o)},_off:function(t,e,i){var n,o,s;if(this._events&&(n=this._events[t]))if(e){if(i===this&&(i=void 0),n)for(o=0,s=n.length;o<s;o++){var r=n[o];if(r.ctx===i&&r.fn===e)return r.fn=h,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(o,1)}}else{for(o=0,s=n.length;o<s;o++)n[o].fn=h;delete this._events[t]}},fire:function(t,i,n){if(!this.listens(t,n))return this;var o=e({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var r=0,a=s.length;r<a;r++){var h=s[r];h.fn.call(h.ctx||this,o)}this._firingCount--}}return n&&this._propagateEvent(o),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var o in t)this.once(o,t[o],e);return this}var s=n(function(){this.off(t,e,i).off(t,s,i)},this);return this.on(t,e,i).on(t,s,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[s(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[s(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};E.addEventListener=E.on,E.removeEventListener=E.clearAllEventListeners=E.off,E.addOneTimeEventListener=E.once,E.fireEvent=E.fire,E.hasEventListeners=E.listens;var P=M.extend(E);function D(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var O=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function A(t,e,i){return t instanceof D?t:g(t)?new D(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new D(t.x,t.y):new D(t,e,i)}function I(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function z(t,e){return!t||t instanceof I?t:new I(t,e)}function R(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function N(t,e){return t instanceof R?t:new R(t,e)}function B(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function F(t,e,i){return t instanceof B?t:g(t)&&"object"!=typeof t[0]?3===t.length?new B(t[0],t[1],t[2]):2===t.length?new B(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new B(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new B(t,e,i)}D.prototype={clone:function(){return new D(this.x,this.y)},add:function(t){return this.clone()._add(A(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(A(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new D(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new D(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(t){var e=(t=A(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=A(t)).x===this.x&&t.y===this.y},contains:function(t){return t=A(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+l(this.x)+", "+l(this.y)+")"}},I.prototype={extend:function(t){return t=A(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new D(this.min.x,this.max.y)},getTopRight:function(){return new D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof D?A(t):z(t))instanceof I?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=z(t);var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>=e.x&&n.x<=i.x,r=o.y>=e.y&&n.y<=i.y;return s&&r},overlaps:function(t){t=z(t);var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>e.x&&n.x<i.x,r=o.y>e.y&&n.y<i.y;return s&&r},isValid:function(){return!(!this.min||!this.max)}},R.prototype={extend:function(t){var e,i,n=this._southWest,o=this._northEast;if(t instanceof B)e=t,i=t;else{if(!(t instanceof R))return t?this.extend(F(t)||N(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||o?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),o.lat=Math.max(i.lat,o.lat),o.lng=Math.max(i.lng,o.lng)):(this._southWest=new B(e.lat,e.lng),this._northEast=new B(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new R(new B(e.lat-n,e.lng-o),new B(i.lat+n,i.lng+o))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof B||"lat"in t?F(t):N(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof R?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=N(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=e.lat&&n.lat<=i.lat,r=o.lng>=e.lng&&n.lng<=i.lng;return s&&r},overlaps:function(t){t=N(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>e.lat&&n.lat<i.lat,r=o.lng>e.lng&&n.lng<i.lng;return s&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=N(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},B.prototype={equals:function(t,e){return!!t&&(t=F(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+l(this.lat,t)+", "+l(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,F(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return N([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new B(this.lat,this.lng,this.alt)}};var j,H={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new I(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?a(t.lng,this.wrapLng,!0):t.lng;return new B(this.wrapLat?a(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,o=e.lng-i.lng;if(0===n&&0===o)return t;var s=t.getSouthWest(),r=t.getNorthEast();return new R(new B(s.lat-n,s.lng-o),new B(r.lat-n,r.lng-o))}},U=e({},H,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,s=Math.sin((e.lat-t.lat)*i/2),r=Math.sin((e.lng-t.lng)*i/2),a=s*s+Math.cos(n)*Math.cos(o)*r*r,h=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*h}}),$={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=Math.sin(n*e);return new D(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new B((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(j=6378137*Math.PI,new I([-j,-j],[j,j]))};function W(t,e,i,n){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function Z(t,e,i,n){return new W(t,e,i,n)}W.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new D((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var V=e({},U,{code:"EPSG:3857",projection:$,transformation:function(){var t=.5/(Math.PI*$.R);return Z(t,.5,-t,.5)}()}),G=e({},V,{code:"EPSG:900913"});function Y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t,e){var i,n,o,s,r,a,h="";for(i=0,o=t.length;i<o;i++){for(n=0,s=(r=t[i]).length;n<s;n++)a=r[n],h+=(n?"L":"M")+a.x+" "+a.y;h+=e?Ct?"z":"x":""}return h||"M0 0"}var X=document.documentElement.style,K="ActiveXObject"in window,J=K&&!document.addEventListener,Q="msLaunchUri"in navigator&&!("documentMode"in document),tt=Et("webkit"),et=Et("android"),it=Et("android 2")||Et("android 3"),nt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ot=et&&Et("Google")&&nt<537&&!("AudioNode"in window),st=!!window.opera,rt=!Q&&Et("chrome"),at=Et("gecko")&&!tt&&!st&&!K,ht=!rt&&Et("safari"),lt=Et("phantom"),ct="OTransition"in X,dt=0===navigator.platform.indexOf("Win"),ut=K&&"transition"in X,pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,ft="MozPerspective"in X,mt=!window.L_DISABLE_3D&&(ut||pt||ft)&&!ct&&!lt,gt="undefined"!=typeof orientation||Et("mobile"),_t=gt&&tt,vt=gt&&pt,yt=!window.PointerEvent&&window.MSPointerEvent,bt=!(!window.PointerEvent&&!yt),xt=!window.L_NO_TOUCH&&(bt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),wt=gt&&st,kt=gt&&at,Lt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",h,e),window.removeEventListener("testPassiveEventSupport",h,e)}catch(t){}return t}(),St=!!document.createElement("canvas").getContext,Ct=!(!document.createElementNS||!Y("svg").createSVGRect),Mt=!Ct&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Et(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Pt={ie:K,ielt9:J,edge:Q,webkit:tt,android:et,android23:it,androidStock:ot,opera:st,chrome:rt,gecko:at,safari:ht,phantom:lt,opera12:ct,win:dt,ie3d:ut,webkit3d:pt,gecko3d:ft,any3d:mt,mobile:gt,mobileWebkit:_t,mobileWebkit3d:vt,msPointer:yt,pointer:bt,touch:xt,mobileOpera:wt,mobileGecko:kt,retina:Lt,passiveEvents:Tt,canvas:St,svg:Ct,vml:Mt},Dt=yt?"MSPointerDown":"pointerdown",Ot=yt?"MSPointerMove":"pointermove",At=yt?"MSPointerUp":"pointerup",It=yt?"MSPointerCancel":"pointercancel",zt={},Rt=!1;function Nt(t,e,i,o){return"touchstart"===e?function(t,e,i){var o=n(function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Ie(t),Ht(t,e)});t["_leaflet_touchstart"+i]=o,t.addEventListener(Dt,o,!1),Rt||(document.addEventListener(Dt,Bt,!0),document.addEventListener(Ot,Ft,!0),document.addEventListener(At,jt,!0),document.addEventListener(It,jt,!0),Rt=!0)}(t,i,o):"touchmove"===e?function(t,e,i){var n=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Ht(t,e)};t["_leaflet_touchmove"+i]=n,t.addEventListener(Ot,n,!1)}(t,i,o):"touchend"===e&&function(t,e,i){var n=function(t){Ht(t,e)};t["_leaflet_touchend"+i]=n,t.addEventListener(At,n,!1),t.addEventListener(It,n,!1)}(t,i,o),this}function Bt(t){zt[t.pointerId]=t}function Ft(t){zt[t.pointerId]&&(zt[t.pointerId]=t)}function jt(t){delete zt[t.pointerId]}function Ht(t,e){for(var i in t.touches=[],zt)t.touches.push(zt[i]);t.changedTouches=[t],e(t)}var Ut=yt?"MSPointerDown":bt?"pointerdown":"touchstart",$t=yt?"MSPointerUp":bt?"pointerup":"touchend",Wt="_leaflet_";var Zt,Vt,Gt,Yt,qt,Xt=ue(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Kt=ue(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Jt="webkitTransition"===Kt||"OTransition"===Kt?Kt+"End":"transitionend";function Qt(t){return"string"==typeof t?document.getElementById(t):t}function te(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function ee(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function ie(t){var e=t.parentNode;e&&e.removeChild(t)}function ne(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function oe(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function se(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function re(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=ce(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function ae(t,e){if(void 0!==t.classList)for(var i=d(e),n=0,o=i.length;n<o;n++)t.classList.add(i[n]);else if(!re(t,e)){var s=ce(t);le(t,(s?s+" ":"")+e)}}function he(t,e){void 0!==t.classList?t.classList.remove(e):le(t,c((" "+ce(t)+" ").replace(" "+e+" "," ")))}function le(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ce(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function de(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}(t,e)}function ue(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function pe(t,e,i){var n=e||new D(0,0);t.style[Xt]=(ut?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function fe(t,e){t._leaflet_pos=e,mt?pe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function me(t){return t._leaflet_pos||new D(0,0)}if("onselectstart"in document)Zt=function(){Le(window,"selectstart",Ie)},Vt=function(){Se(window,"selectstart",Ie)};else{var ge=ue(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zt=function(){if(ge){var t=document.documentElement.style;Gt=t[ge],t[ge]="none"}},Vt=function(){ge&&(document.documentElement.style[ge]=Gt,Gt=void 0)}}function _e(){Le(window,"dragstart",Ie)}function ve(){Se(window,"dragstart",Ie)}function ye(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(be(),Yt=t,qt=t.style.outline,t.style.outline="none",Le(window,"keydown",be))}function be(){Yt&&(Yt.style.outline=qt,Yt=void 0,qt=void 0,Se(window,"keydown",be))}function xe(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function we(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var ke={TRANSFORM:Xt,TRANSITION:Kt,TRANSITION_END:Jt,get:Qt,getStyle:te,create:ee,remove:ie,empty:ne,toFront:oe,toBack:se,hasClass:re,addClass:ae,removeClass:he,setClass:le,getClass:ce,setOpacity:de,testProp:ue,setTransform:pe,setPosition:fe,getPosition:me,disableTextSelection:Zt,enableTextSelection:Vt,disableImageDrag:_e,enableImageDrag:ve,preventOutline:ye,restoreOutline:be,getSizedParentNode:xe,getScale:we};function Le(t,e,i,n){if("object"==typeof e)for(var o in e)Ee(t,o,e[o],i);else for(var s=0,r=(e=d(e)).length;s<r;s++)Ee(t,e[s],i,n);return this}var Te="_leaflet_events";function Se(t,e,i,n){if("object"==typeof e)for(var o in e)Pe(t,o,e[o],i);else if(e)for(var s=0,r=(e=d(e)).length;s<r;s++)Pe(t,e[s],i,n);else{for(var a in t[Te])Pe(t,a,t[Te][a]);delete t[Te]}return this}function Ce(){if(bt)return!(Q||ht)}var Me={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ee(t,e,i,n){var o=e+s(i)+(n?"_"+s(n):"");if(t[Te]&&t[Te][o])return this;var r=function(e){return i.call(n||t,e||window.event)},a=r;bt&&0===e.indexOf("touch")?Nt(t,e,r,o):xt&&"dblclick"===e&&!Ce()?function(t,e,i){var n,o,s=!1,r=250;function a(t){if(bt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),i=e-(n||e);o=t.touches?t.touches[0]:t,s=i>0&&i<=r,n=e}function h(t){if(s&&!o.cancelBubble){if(bt){if("mouse"===t.pointerType)return;var i,r,a={};for(r in o)i=o[r],a[r]=i&&i.bind?i.bind(o):i;o=a}o.type="dblclick",o.button=0,e(o),n=null}}t[Wt+Ut+i]=a,t[Wt+$t+i]=h,t[Wt+"dblclick"+i]=e,t.addEventListener(Ut,a,!!Tt&&{passive:!1}),t.addEventListener($t,h,!!Tt&&{passive:!1}),t.addEventListener("dblclick",e,!1)}(t,r,o):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Me[e]||e,r,!!Tt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(r=function(e){e=e||window.event,Ue(t,e)&&a(e)},t.addEventListener(Me[e],r,!1)):t.addEventListener(e,a,!1):"attachEvent"in t&&t.attachEvent("on"+e,r),t[Te]=t[Te]||{},t[Te][o]=r}function Pe(t,e,i,n){var o=e+s(i)+(n?"_"+s(n):""),r=t[Te]&&t[Te][o];if(!r)return this;bt&&0===e.indexOf("touch")?function(t,e,i){var n=t["_leaflet_"+e+i];"touchstart"===e?t.removeEventListener(Dt,n,!1):"touchmove"===e?t.removeEventListener(Ot,n,!1):"touchend"===e&&(t.removeEventListener(At,n,!1),t.removeEventListener(It,n,!1))}(t,e,o):xt&&"dblclick"===e&&!Ce()?function(t,e){var i=t[Wt+Ut+e],n=t[Wt+$t+e],o=t[Wt+"dblclick"+e];t.removeEventListener(Ut,i,!!Tt&&{passive:!1}),t.removeEventListener($t,n,!!Tt&&{passive:!1}),t.removeEventListener("dblclick",o,!1)}(t,o):"removeEventListener"in t?t.removeEventListener(Me[e]||e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[Te][o]=null}function De(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,He(t),this}function Oe(t){return Ee(t,"wheel",De),this}function Ae(t){return Le(t,"mousedown touchstart dblclick",De),Ee(t,"click",je),this}function Ie(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ze(t){return Ie(t),De(t),this}function Re(t,e){if(!e)return new D(t.clientX,t.clientY);var i=we(e),n=i.boundingClientRect;return new D((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Ne=dt&&rt?2*window.devicePixelRatio:at?window.devicePixelRatio:1;function Be(t){return Q?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ne:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Fe={};function je(t){Fe[t.type]=!0}function He(t){var e=Fe[t.type];return Fe[t.type]=!1,e}function Ue(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var $e={on:Le,off:Se,stopPropagation:De,disableScrollPropagation:Oe,disableClickPropagation:Ae,preventDefault:Ie,stop:ze,getMousePosition:Re,getWheelDelta:Be,fakeStop:je,skipped:He,isExternalTarget:Ue,addListener:Le,removeListener:Se},We=P.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=me(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),fe(this._el,i),this.fire("step")},_complete:function(){S(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ze=P.extend({options:{crs:V,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=u(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=n(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(F(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Kt&&mt&&!wt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Le(this._proxy,Jt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,n){if((i=void 0===i?this._zoom:this._limitZoom(i),t=this._limitCenter(F(t),i,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n)&&(void 0!==n.animate&&(n.zoom=e({animate:n.animate},n.zoom),n.pan=e({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,n.zoom):this._tryAnimatedPan(t,n.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,i),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(mt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(mt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),s=(t instanceof D?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),r=this.containerPointToLatLng(o.add(s));return this.setView(r,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():N(t);var i=A(e.paddingTopLeft||e.padding||[0,0]),n=A(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var s=n.subtract(i).divideBy(2),r=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o);return{center:this.unproject(r.add(a).divideBy(2).add(s),o),zoom:o}},fitBounds:function(t,e){if(!(t=N(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=A(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new We,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ae(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!mt)return this.setView(t,e,i);this._stop();var n=this.project(this.getCenter()),o=this.project(t),s=this.getSize(),r=this._zoom;t=F(t),e=void 0===e?r:e;var a=Math.max(s.x,s.y),h=a*this.getZoomScale(r,e),l=o.distanceTo(n)||1,c=1.42,d=c*c;function u(t){var e=(h*h-a*a+(t?-1:1)*d*d*l*l)/(2*(t?h:a)*d*l),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var m=u(0);function g(t){return a*(f(m)*(p(e=m+c*t)/f(e))-p(m))/d;var e}var _=Date.now(),v=(u(1)-m)/c,y=i.duration?1e3*i.duration:1e3*v*.8;return this._moveStart(!0,i.noMoveStart),function i(){var s=(Date.now()-_)/y,h=function(t){return 1-Math.pow(1-t,1.5)}(s)*v;s<=1?(this._flyToFrame=T(i,this),this._move(this.unproject(n.add(o.subtract(n).multiplyBy(g(h)/l)),r),this.getScaleZoom(a/function(t){return a*(f(m)/f(m+c*t))}(h),r),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=N(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,N(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=A((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=A(e.paddingBottomRight||e.padding||[0,0]),o=this.getCenter(),s=this.project(o),r=this.project(t),a=this.getPixelBounds(),h=a.getSize().divideBy(2),l=z([a.min.add(i),a.max.subtract(n)]);if(!l.contains(r)){this._enforcingBounds=!0;var c=s.subtract(r),d=A(r.x+c.x,r.y+c.y);(r.x<l.min.x||r.x>l.max.x)&&(d.x=s.x-c.x,c.x>0?d.x+=h.x-i.x:d.x-=h.x-n.x),(r.y<l.min.y||r.y>l.max.y)&&(d.y=s.y-c.y,c.y>0?d.y+=h.y-i.y:d.y-=h.y-n.y),this.panTo(this.unproject(d),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),s=i.divideBy(2).round(),r=o.divideBy(2).round(),a=s.subtract(r);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=n(this._handleGeolocationResponse,this),o=n(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,o,t):navigator.geolocation.getCurrentPosition(i,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=new B(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),n=this._locateOptions;if(n.setView){var o=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(o,n.maxZoom):o)}var s={latlng:e,bounds:i,timestamp:t.timestamp};for(var r in t.coords)"number"==typeof t.coords[r]&&(s[r]=t.coords[r]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ie(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(S(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ie(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=ee("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new R(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=N(t),i=A(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),s=this.getMaxZoom(),r=t.getNorthWest(),a=t.getSouthEast(),h=this.getSize().subtract(i),l=z(this.project(a,n),this.project(r,n)).getSize(),c=mt?this.options.zoomSnap:1,d=h.x/l.x,u=h.y/l.y,p=e?Math.max(d,u):Math.min(d,u);return n=this.getScaleZoom(p,n),c&&(n=Math.round(n/(c/100))*(c/100),n=e?Math.ceil(n/c)*c:Math.floor(n/c)*c),Math.max(o,Math.min(s,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new I(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(F(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(A(t),e)},layerPointToLatLng:function(t){var e=A(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(F(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(F(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(N(t))},distance:function(t,e){return this.options.crs.distance(F(t),F(e))},containerPointToLayerPoint:function(t){return A(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return A(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(A(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(t)))},mouseEventToContainerPoint:function(t){return Re(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Qt(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Le(e,"scroll",this._onScroll,this),this._containerId=s(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&mt,ae(t,"leaflet-container"+(xt?" leaflet-touch":"")+(Lt?" leaflet-retina":"")+(J?" leaflet-oldie":"")+(ht?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=te(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fe(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ae(t.markerPane,"leaflet-zoom-hide"),ae(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){fe(this._mapPane,new D(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return S(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){fe(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[s(this._container)]=this;var e=t?Se:Le;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),mt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){S(this._resizeRequest),this._resizeRequest=T(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],o="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,a=!1;r;){if((i=this._targets[s(r)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(e,!0)){if(o&&!Ue(r,t))break;if(n.push(i),o)break}if(r===this._container)break;r=r.parentNode}return n.length||a||o||!Ue(r,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!He(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||ye(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,n){if("click"===t.type){var o=e({},t);o.type="preclick",this._fireDOMEvent(o,o.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,i))).length){var s=n[0];"contextmenu"===i&&s.listens(i,!0)&&Ie(t);var r={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var a=s.getLatLng&&(!s._radius||s._radius<=10);r.containerPoint=a?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?s.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var h=0;h<n.length;h++)if(n[h].fire(i,r,!0),r.originalEvent._stopped||!1===n[h].options.bubblingMouseEvents&&-1!==_(this._mouseEvents,i))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return me(this._mapPane)||new D(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return z([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),s=new I(n.subtract(o),n.add(o)),r=this._getBoundsOffset(s,i,e);return r.round().equals([0,0])?t:this.unproject(n.add(r),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new I(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=z(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),o=n.min.subtract(t.min),s=n.max.subtract(t.max);return new D(this._rebound(o.x,-s.x),this._rebound(o.y,-s.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=mt?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){he(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i))&&(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=ee("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=Xt,i=this._proxy.style[e];pe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ie(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();pe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(o))&&(T(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,o){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ae(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),setTimeout(n(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&he(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),T(function(){this._moveEnd(!0)},this))}});var Ve=M.extend({options:{position:"topright"},initialize:function(t){u(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return ae(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ie(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ge=function(t){return new Ve(t)};Ze.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=ee("div",e+"control-container",this._container);function n(n,o){var s=e+n+" "+e+o;t[n+o]=ee("div",s,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ie(this._controlCorners[t]);ie(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ye=Ve.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in u(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ve.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(s(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ae(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ae(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):he(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return he(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ee("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ae(e),Oe(e);var n=this._section=ee("section",t+"-list");i&&(this._map.on("click",this.collapse,this),et||Le(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=ee("a",t+"-toggle",e);o.href="#",o.title="Layers",xt?(Le(o,"click",ze),Le(o,"click",this.expand,this)):Le(o,"focus",this.expand,this),i||this.expand(),this._baseLayersList=ee("div",t+"-base",n),this._separator=ee("div",t+"-separator",n),this._overlaysList=ee("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&s(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(n(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ne(this._baseLayersList),ne(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,o=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(s(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+s(this),n),this._layerControlInputs.push(e),e.layerId=s(t.layer),Le(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var r=document.createElement("div");return i.appendChild(r),r.appendChild(e),r.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var s=i.length-1;s>=0;s--)t=i[s],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||o.push(e);for(s=0;s<o.length;s++)this._map.hasLayer(o[s])&&this._map.removeLayer(o[s]);for(s=0;s<n.length;s++)this._map.hasLayer(n[s])||this._map.addLayer(n[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),o=i.length-1;o>=0;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),qe=Ve.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=ee("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,o){var s=ee("a",i,n);return s.innerHTML=t,s.href="#",s.title=e,s.setAttribute("role","button"),s.setAttribute("aria-label",e),Ae(s),Le(s,"click",ze),Le(s,"click",o,this),Le(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";he(this._zoomInButton,e),he(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&ae(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&ae(this._zoomInButton,e)}});Ze.mergeOptions({zoomControl:!0}),Ze.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new qe,this.addControl(this.zoomControl))});var Xe=Ve.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=ee("div","leaflet-control-scale"),i=this.options;return this._addScales(i,"leaflet-control-scale-line",e),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=ee("div",e,i)),t.imperial&&(this._iScale=ee("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;o>5280?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),Ke=Ve.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){u(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ee("div","leaflet-control-attribution"),Ae(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}});Ze.mergeOptions({attributionControl:!0}),Ze.addInitHook(function(){this.options.attributionControl&&(new Ke).addTo(this)});Ve.Layers=Ye,Ve.Zoom=qe,Ve.Scale=Xe,Ve.Attribution=Ke,Ge.layers=function(t,e,i){return new Ye(t,e,i)},Ge.zoom=function(t){return new qe(t)},Ge.scale=function(t){return new Xe(t)},Ge.attribution=function(t){return new Ke(t)};var Je=M.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Je.addTo=function(t,e){return t.addHandler(e,this),this};var Qe,ti={Events:E},ei=xt?"touchstart mousedown":"mousedown",ii={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ni={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},oi=P.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){u(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(Le(this._dragStartTarget,ei,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(oi._dragging===this&&this.finishDrag(),Se(this._dragStartTarget,ei,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!re(this._element,"leaflet-zoom-anim")&&!(oi._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(oi._dragging=this,this._preventOutline&&ye(this._element),_e(),Zt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,i=xe(this._element);this._startPoint=new D(e.clientX,e.clientY),this._parentScale=we(i),Le(document,ni[t.type],this._onMove,this),Le(document,ii[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new D(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Ie(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=me(this._element).subtract(i),ae(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ae(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,S(this._animRequest),this._lastEvent=t,this._animRequest=T(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),fe(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in he(document.body,"leaflet-dragging"),this._lastTarget&&(he(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ni)Se(document,ni[t],this._onMove,this),Se(document,ii[t],this._onUp,this);ve(),Vt(),this._moved&&this._moving&&(S(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,oi._dragging=!1}});function si(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=function(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,function t(e,i,n,o,s){var r,a,h,l=0;for(a=o+1;a<=s-1;a++)(h=ci(e[a],e[o],e[s],!0))>l&&(r=a,l=h);l>n&&(i[r]=1,t(e,i,n,o,r),t(e,i,n,r,s))}(t,n,e,0,i-1);var o,s=[];for(o=0;o<i;o++)n[o]&&s.push(t[o]);return s}(t=function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;n<s;n++)r=t[n],a=t[o],void 0,void 0,h=a.x-r.x,l=a.y-r.y,h*h+l*l>e&&(i.push(t[n]),o=n);var r,a,h,l;o<s-1&&i.push(t[s-1]);return i}(t,i),i)}function ri(t,e,i){return Math.sqrt(ci(t,e,i,!0))}function ai(t,e,i,n,o){var s,r,a,h=n?Qe:li(t,i),l=li(e,i);for(Qe=l;;){if(!(h|l))return[t,e];if(h&l)return!1;a=li(r=hi(t,e,s=h||l,i,o),i),s===h?(t=r,h=a):(e=r,l=a)}}function hi(t,e,i,n,o){var s,r,a=e.x-t.x,h=e.y-t.y,l=n.min,c=n.max;return 8&i?(s=t.x+a*(c.y-t.y)/h,r=c.y):4&i?(s=t.x+a*(l.y-t.y)/h,r=l.y):2&i?(s=c.x,r=t.y+h*(c.x-t.x)/a):1&i&&(s=l.x,r=t.y+h*(l.x-t.x)/a),new D(s,r,o)}function li(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function ci(t,e,i,n){var o,s=e.x,r=e.y,a=i.x-s,h=i.y-r,l=a*a+h*h;return l>0&&((o=((t.x-s)*a+(t.y-r)*h)/l)>1?(s=i.x,r=i.y):o>0&&(s+=a*o,r+=h*o)),a=t.x-s,h=t.y-r,n?a*a+h*h:new D(s,r)}function di(t){return!g(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function ui(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),di(t)}var pi={simplify:si,pointToSegmentDistance:ri,closestPointOnSegment:function(t,e,i){return ci(t,e,i)},clipSegment:ai,_getEdgeIntersection:hi,_getBitCode:li,_sqClosestPointOnSegment:ci,isFlat:di,_flat:ui};function fi(t,e,i){var n,o,s,r,a,h,l,c,d,u=[1,4,2,8];for(o=0,l=t.length;o<l;o++)t[o]._code=li(t[o],e);for(r=0;r<4;r++){for(c=u[r],n=[],o=0,s=(l=t.length)-1;o<l;s=o++)a=t[o],h=t[s],a._code&c?h._code&c||((d=hi(h,a,c,e,i))._code=li(d,e),n.push(d)):(h._code&c&&((d=hi(h,a,c,e,i))._code=li(d,e),n.push(d)),n.push(a));t=n}return t}var mi={clipPolygon:fi},gi={project:function(t){return new D(t.lng,t.lat)},unproject:function(t){return new B(t.y,t.x)},bounds:new I([-180,-90],[180,90])},_i={R:6378137,R_MINOR:6356752.314245179,bounds:new I([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,s=Math.sqrt(1-o*o),r=s*Math.sin(n),a=Math.tan(Math.PI/4-n/2)/Math.pow((1-r)/(1+r),s/2);return n=-i*Math.log(Math.max(a,1e-10)),new D(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,o=this.R_MINOR/n,s=Math.sqrt(1-o*o),r=Math.exp(-t.y/n),a=Math.PI/2-2*Math.atan(r),h=0,l=.1;h<15&&Math.abs(l)>1e-7;h++)e=s*Math.sin(a),e=Math.pow((1-e)/(1+e),s/2),a+=l=Math.PI/2-2*Math.atan(r*e)-a;return new B(a*i,t.x*i/n)}},vi={LonLat:gi,Mercator:_i,SphericalMercator:$},yi=e({},U,{code:"EPSG:3395",projection:_i,transformation:function(){var t=.5/(Math.PI*_i.R);return Z(t,.5,-t,.5)}()}),bi=e({},U,{code:"EPSG:4326",projection:gi,transformation:Z(1/180,1,-1/180,.5)}),xi=e({},H,{projection:gi,transformation:Z(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});H.Earth=U,H.EPSG3395=yi,H.EPSG3857=V,H.EPSG900913=G,H.EPSG4326=bi,H.Simple=xi;var wi=P.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[s(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[s(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ze.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=s(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=s(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&s(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?g(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[s(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=s(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ki=wi.extend({initialize:function(t,e){var i,n;if(u(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return s(t)}}),Li=ki.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ki.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ki.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new R;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Ti=M.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){u(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var o=A(n),s=A("shadow"===e&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Lt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var Si=Ti.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Si.imagePath||(Si.imagePath=this._detectIconPath()),(this.options.imagePath||Si.imagePath)+Ti.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ee("div","leaflet-default-icon-path",document.body),e=te(t,"background-image")||te(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Ci=Je.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new oi(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ae(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&he(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,s=me(e._icon),r=i.getPixelBounds(),a=i.getPixelOrigin(),h=z(r.min._subtract(a).add(o),r.max._subtract(a).subtract(o));if(!h.contains(s)){var l=A((Math.max(h.max.x,s.x)-h.max.x)/(r.max.x-h.max.x)-(Math.min(h.min.x,s.x)-h.min.x)/(r.min.x-h.min.x),(Math.max(h.max.y,s.y)-h.max.y)/(r.max.y-h.max.y)-(Math.min(h.min.y,s.y)-h.min.y)/(r.min.y-h.min.y)).multiplyBy(n);i.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),fe(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=T(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(S(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=me(e._icon),o=e._map.layerPointToLatLng(n);i&&fe(i,n),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){S(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Mi=wi.extend({options:{icon:new Si,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){u(this,e),this._latlng=F(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),ae(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),s=!1;o!==this._shadow&&(this._removeShadow(),s=!0),o&&(ae(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&s&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ie(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ie(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&fe(this._icon,t),this._shadow&&fe(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ae(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ci)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ci(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&de(this._icon,t),this._shadow&&de(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Ei=wi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return u(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Pi=Ei.extend({options:{fill:!0,radius:10},initialize:function(t,e){u(this,e),this._latlng=F(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Ei.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new I(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Di=Pi.extend({initialize:function(t,i,n){if("number"==typeof i&&(i=e({},n,{radius:i})),u(this,i),this._latlng=F(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new R(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Ei.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===U.distance){var o=Math.PI/180,s=this._mRadius/U.R/o,r=i.project([e+s,t]),a=i.project([e-s,t]),h=r.add(a).divideBy(2),l=i.unproject(h).lat,c=Math.acos((Math.cos(s*o)-Math.sin(e*o)*Math.sin(l*o))/(Math.cos(e*o)*Math.cos(l*o)))/o;(isNaN(c)||0===c)&&(c=s/Math.cos(Math.PI/180*e)),this._point=h.subtract(i.getPixelOrigin()),this._radius=isNaN(c)?0:h.x-i.project([l,t-c]).x,this._radiusY=h.y-r.y}else{var d=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(d).x}this._updateBounds()}});var Oi=Ei.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){u(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,o=null,s=ci,r=0,a=this._parts.length;r<a;r++)for(var h=this._parts[r],l=1,c=h.length;l<c;l++){var d=s(t,e=h[l-1],i=h[l],!0);d<n&&(n=d,o=s(t,e,i))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a=this._rings[0],h=a.length;if(!h)return null;for(t=0,e=0;t<h-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,n=0;t<h-1;t++)if(o=a[t],s=a[t+1],(n+=i=o.distanceTo(s))>e)return r=(n-e)/i,this._map.layerPointToLatLng([s.x-r*(s.x-o.x),s.y-r*(s.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=F(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new R,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return di(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=di(t),n=0,o=t.length;n<o;n++)i?(e[n]=F(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new D(t,t);this._pxBounds=new I([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,i){var n,o,s=t[0]instanceof B,r=t.length;if(s){for(o=[],n=0;n<r;n++)o[n]=this._map.latLngToLayerPoint(t[n]),i.extend(o[n]);e.push(o)}else for(n=0;n<r;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,n,o,s,r,a,h=this._parts;for(e=0,n=0,o=this._rings.length;e<o;e++)for(i=0,s=(a=this._rings[e]).length;i<s-1;i++)(r=ai(a[i],a[i+1],t,i,!0))&&(h[n]=h[n]||[],h[n].push(r[0]),r[1]===a[i+1]&&i!==s-2||(h[n].push(r[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=si(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,o,s,r,a,h=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(n=0,o=(r=(a=this._parts[i]).length)-1;n<r;o=n++)if((e||0!==n)&&ri(t,a[o],a[n])<=h)return!0;return!1}});Oi._flat=ui;var Ai=Oi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a,h,l=this._rings[0],c=l.length;if(!c)return null;for(s=r=a=0,t=0,e=c-1;t<c;e=t++)i=l[t],n=l[e],o=i.y*n.x-n.y*i.x,r+=(i.x+n.x)*o,a+=(i.y+n.y)*o,s+=3*o;return h=0===s?l[0]:[r/s,a/s],this._map.layerPointToLatLng(h)},_convertLatLngs:function(t){var e=Oi.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof B&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Oi.prototype._setLatLngs.call(this,t),di(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return di(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new D(e,e);if(t=new I(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,o=0,s=this._rings.length;o<s;o++)(n=fi(this._rings[o],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,o,s,r,a,h,l=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,a=this._parts.length;o<a;o++)for(s=0,r=(h=(e=this._parts[o]).length)-1;s<h;r=s++)i=e[s],n=e[r],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(l=!l);return l||Oi.prototype._containsPoint.call(this,t,!0)}});var Ii=Li.extend({initialize:function(t,e){u(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,o=g(t)?t:t.features;if(o){for(e=0,i=o.length;e<i;e++)((n=o[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var s=this.options;if(s.filter&&!s.filter(t))return this;var r=zi(t,s);return r?(r.feature=Ui(t),r.defaultOptions=r.options,this.resetStyle(r),s.onEachFeature&&s.onEachFeature(t,r),this.addLayer(r)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function zi(t,e){var i,n,o,s,r="Feature"===t.type?t.geometry:t,a=r?r.coordinates:null,h=[],l=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Ni;if(!a&&!r)return null;switch(r.type){case"Point":return Ri(l,t,i=c(a),e);case"MultiPoint":for(o=0,s=a.length;o<s;o++)i=c(a[o]),h.push(Ri(l,t,i,e));return new Li(h);case"LineString":case"MultiLineString":return n=Bi(a,"LineString"===r.type?0:1,c),new Oi(n,e);case"Polygon":case"MultiPolygon":return n=Bi(a,"Polygon"===r.type?1:2,c),new Ai(n,e);case"GeometryCollection":for(o=0,s=r.geometries.length;o<s;o++){var d=zi({geometry:r.geometries[o],type:"Feature",properties:t.properties},e);d&&h.push(d)}return new Li(h);default:throw new Error("Invalid GeoJSON object.")}}function Ri(t,e,i,n){return t?t(e,i):new Mi(i,n&&n.markersInheritOptions&&n)}function Ni(t){return new B(t[1],t[0],t[2])}function Bi(t,e,i){for(var n,o=[],s=0,r=t.length;s<r;s++)n=e?Bi(t[s],e-1,i):(i||Ni)(t[s]),o.push(n);return o}function Fi(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[l(t.lng,e),l(t.lat,e),l(t.alt,e)]:[l(t.lng,e),l(t.lat,e)]}function ji(t,e,i,n){for(var o=[],s=0,r=t.length;s<r;s++)o.push(e?ji(t[s],e-1,i,n):Fi(t[s],n));return!e&&i&&o.push(o[0]),o}function Hi(t,i){return t.feature?e({},t.feature,{geometry:i}):Ui(i)}function Ui(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var $i={toGeoJSON:function(t){return Hi(this,{type:"Point",coordinates:Fi(this.getLatLng(),t)})}};function Wi(t,e){return new Ii(t,e)}Mi.include($i),Di.include($i),Pi.include($i),Oi.include({toGeoJSON:function(t){var e=!di(this._latlngs),i=ji(this._latlngs,e?1:0,!1,t);return Hi(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),Ai.include({toGeoJSON:function(t){var e=!di(this._latlngs),i=e&&!di(this._latlngs[0]),n=ji(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),Hi(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),ki.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),Hi(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,n=[];return this.eachLayer(function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t);if(i)n.push(o.geometry);else{var s=Ui(o);"FeatureCollection"===s.type?n.push.apply(n,s.features):n.push(s)}}}),i?Hi(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var Zi=Wi,Vi=wi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=N(e),u(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ae(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ie(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&oe(this._image),this},bringToBack:function(){return this._map&&se(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=N(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ee("img");ae(e,"leaflet-image-layer"),this._zoomAnimated&&ae(e,"leaflet-zoom-animated"),this.options.className&&ae(e,this.options.className),e.onselectstart=h,e.onmousemove=h,e.onload=n(this.fire,this,"load"),e.onerror=n(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;pe(this._image,i,e)},_reset:function(){var t=this._image,e=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();fe(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){de(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Gi=Vi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ee("video");if(ae(e,"leaflet-image-layer"),this._zoomAnimated&&ae(e,"leaflet-zoom-animated"),this.options.className&&ae(e,this.options.className),e.onselectstart=h,e.onmousemove=h,e.onloadeddata=n(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),o=[],s=0;s<i.length;s++)o.push(i[s].src);this._url=i.length>0?o:[e.src]}else{g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var r=0;r<this._url.length;r++){var a=ee("source");a.src=this._url[r],e.appendChild(a)}}}});var Yi=Vi.extend({_initImage:function(){var t=this._image=this._url;ae(t,"leaflet-image-layer"),this._zoomAnimated&&ae(t,"leaflet-zoom-animated"),this.options.className&&ae(t,this.options.className),t.onselectstart=h,t.onmousemove=h}});var qi=wi.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){u(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&de(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&de(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(de(this._container,0),this._removeTimeout=setTimeout(n(ie,void 0,this._container),200)):ie(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=F(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&oe(this._container),this},bringToBack:function(){return this._map&&se(this._container),this},_prepareOpen:function(t,e,i){if(e instanceof wi||(i=e,e=t),e instanceof Li)for(var n in t._layers){e=t._layers[n];break}if(!i)if(e.getCenter)i=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");i=e.getLatLng()}return this._source=e,this.update(),i},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=A(this.options.offset),i=this._getAnchor();this._zoomAnimated?fe(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),Xi=qi.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){qi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ei||this._source.on("preclick",De))},onRemove:function(t){qi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ei||this._source.off("preclick",De))},getEvents:function(){var t=qi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ee("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=ee("div",t+"-content-wrapper",e);if(this._contentNode=ee("div",t+"-content",i),Ae(e),Oe(this._contentNode),Le(e,"contextmenu",De),this._tipContainer=ee("div",t+"-tip-container",e),this._tip=ee("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=ee("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",Le(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight;o&&n>o?(e.height=o+"px",ae(t,"leaflet-popup-scrolled")):he(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();fe(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(te(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,o=new D(this._containerLeft,-i-this._containerBottom);o._add(me(this._container));var s=t.layerPointToContainerPoint(o),r=A(this.options.autoPanPadding),a=A(this.options.autoPanPaddingTopLeft||r),h=A(this.options.autoPanPaddingBottomRight||r),l=t.getSize(),c=0,d=0;s.x+n+h.x>l.x&&(c=s.x+n-l.x+h.x),s.x-c-a.x<0&&(c=s.x-a.x),s.y+i+h.y>l.y&&(d=s.y+i-l.y+h.y),s.y-d-a.y<0&&(d=s.y-a.y),(c||d)&&t.fire("autopanstart").panBy([c,d])}},_onCloseButtonClick:function(t){this._close(),ze(t)},_getAnchor:function(){return A(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ze.mergeOptions({closePopupOnClick:!0}),Ze.include({openPopup:function(t,e,i){return t instanceof Xi||(t=new Xi(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),wi.include({bindPopup:function(t,e){return t instanceof Xi?(u(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Xi(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(ze(t),e instanceof Ei?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Ki=qi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){qi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){qi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=qi.prototype.getEvents.call(this);return xt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ee("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,n=this._map,o=this._container,s=n.latLngToContainerPoint(n.getCenter()),r=n.layerPointToContainerPoint(t),a=this.options.direction,h=o.offsetWidth,l=o.offsetHeight,c=A(this.options.offset),d=this._getAnchor();"top"===a?(e=h/2,i=l):"bottom"===a?(e=h/2,i=0):"center"===a?(e=h/2,i=l/2):"right"===a?(e=0,i=l/2):"left"===a?(e=h,i=l/2):r.x<s.x?(a="right",e=0,i=l/2):(a="left",e=h+2*(c.x+d.x),i=l/2),t=t.subtract(A(e,i,!0)).add(c).add(d),he(o,"leaflet-tooltip-right"),he(o,"leaflet-tooltip-left"),he(o,"leaflet-tooltip-top"),he(o,"leaflet-tooltip-bottom"),ae(o,"leaflet-tooltip-"+a),fe(o,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&de(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return A(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ze.include({openTooltip:function(t,e,i){return t instanceof Ki||(t=new Ki(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),wi.include({bindTooltip:function(t,e){return t instanceof Ki?(u(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Ki(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),xt&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(ae(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(he(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var Ji=Ti.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(ne(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=A(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Ti.Default=Si;var Qi=wi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:gt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){u(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ie(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(oe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(se(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=r(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof D?t:new D(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),o=0,s=i.length;o<s;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!J){de(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var s=Math.min(1,(t-o.loaded)/200);de(o.el,s),s<1?e=!0:(o.active?i=!0:this._onOpaqueTile(o),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(S(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=ee("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(ie(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||((n=this._levels[t]={}).el=ee("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),n.el.offsetWidth,this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ie(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),s=Math.floor(e/2),r=i-1,a=new D(+o,+s);a.z=+r;var h=this._tileCoordsToKey(a),l=this._tiles[h];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),r>n&&this._retainParent(o,s,r,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var s=2*e;s<2*e+2;s++){var r=new D(o,s);r.z=i+1;var a=this._tileCoordsToKey(r),h=this._tiles[a];h&&h.active?h.retain=!0:(h&&h.loaded&&(h.retain=!0),i+1<n&&this._retainChildren(o,s,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var o=Math.round(e);o=void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom?void 0:this._clampZoom(o);var s=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!s||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();mt?pe(t.el,o,n):fe(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),o=e.project(t,this._tileZoom).floor(),s=e.getSize().divideBy(2*n);return new I(o.subtract(s),o.add(s))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),s=o.getCenter(),r=[],a=this.options.keepBuffer,h=new I(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&h.contains(new D(c.x,c.y))||(this._tiles[l].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(t,i);else{for(var d=o.min.y;d<=o.max.y;d++)for(var u=o.min.x;u<=o.max.x;u++){var p=new D(u,d);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:r.push(p)}}if(r.sort(function(t,e){return t.distanceTo(s)-e.distanceTo(s)}),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(u=0;u<r.length;u++)this._addTile(r[u],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return N(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i);return[e.unproject(n,t.z),e.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new R(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new D(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(ie(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ae(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=h,t.onmousemove=h,J&&this.options.opacity<1&&de(t,this.options.opacity),et&&!it&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),o=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),n(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&T(n(this._tileReady,this,t,null,s)),fe(s,i),this._tiles[o]={el:s,coords:t,current:!0},e.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var o=this._tileCoordsToKey(t);(i=this._tiles[o])&&(i.loaded=+new Date,this._map._fadeAnimated?(de(i.el,0),S(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(ae(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),J||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(n(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new D(this._wrapX?a(t.x,this._wrapX):t.x,this._wrapY?a(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new I(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var tn=Qi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=u(this,e)).detectRetina&&Lt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),et||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return Le(i,"load",n(this._tileOnLoad,this,e,i)),Le(i,"error",n(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var i={r:Lt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=n),i["-y"]=n}return m(this._url,e(i,this.options))},_tileOnLoad:function(t,e){J?setTimeout(n(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset;return i&&(t=e-t),t+n},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=h,e.onerror=h,e.complete||(e.src=v,ie(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return ot||e.el.setAttribute("src",v),Qi.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==v))return Qi.prototype._tileReady.call(this,t,e,i)}});function en(t,e){return new tn(t,e)}var nn=tn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var n=e({},this.defaultWmsParams);for(var o in i)o in this.options||(n[o]=i[o]);var s=(i=u(this,i)).detectRetina&&Lt?2:1,r=this.getTileSize();n.width=r.x*s,n.height=r.y*s,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,tn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=z(i.project(e[0]),i.project(e[1])),o=n.min,s=n.max,r=(this._wmsVersion>=1.3&&this._crs===bi?[o.y,o.x,s.y,s.x]:[o.x,o.y,s.x,s.y]).join(","),a=tn.prototype.getTileUrl.call(this,t);return a+p(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(t,i){return e(this.wmsParams,t),i||this.redraw(),this}});tn.WMS=nn,en.wms=function(t,e){return new nn(t,e)};var on=wi.extend({options:{padding:.1,tolerance:0},initialize:function(t){u(this,t),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ae(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=me(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,e),r=this._map.project(t,e).subtract(s),a=o.multiplyBy(-i).add(n).add(o).subtract(r);mt?pe(this._container,a,i):fe(this._container,a)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new I(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sn=on.extend({getEvents:function(){var t=on.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){on.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Le(t,"mousemove",this._onMouseMove,this),Le(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Le(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){S(this._redrawRequest),delete this._ctx,ie(this._container),Se(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){on.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=Lt?2:1;fe(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",Lt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){on.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[s(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[s(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,i,n=t.options.dashArray.split(/[, ]+/),o=[];for(i=0;i<n.length;i++){if(e=Number(n[i]),isNaN(e))return;o.push(e)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,o,s,r=t._parts,a=r.length,h=this._ctx;if(a){for(h.beginPath(),i=0;i<a;i++){for(n=0,o=r[i].length;n<o;n++)s=r[i][n],h[n?"lineTo":"moveTo"](s.x,s.y);e&&h.closePath()}this._fillStroke(h,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||n)/n;1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(n)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(i=e);i&&(je(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(he(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,o,s=this._drawFirst;s;s=s.next)(i=s.layer).options.interactive&&i._containsPoint(e)&&(o=i);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&(ae(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(n(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function rn(t){return St?new sn(t):null}var an=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),hn={_initContainer:function(){this._container=ee("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(on.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=an("shape");ae(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=an("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ie(e),t.removeInteractiveTarget(e),delete this._layers[s(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(e||(e=t._stroke=an("stroke")),o.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=g(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(o.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=an("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){oe(t._container)},_bringToBack:function(t){se(t._container)}},ln=Mt?an:Y,cn=on.extend({getEvents:function(){var t=on.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=ln("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ln("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ie(this._container),Se(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){on.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),fe(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=ln("path");t.options.className&&ae(e,t.options.className),t.options.interactive&&ae(e,"leaflet-interactive"),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ie(t._path),t.removeInteractiveTarget(t._path),delete this._layers[s(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,q(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){oe(t._path)},_bringToBack:function(t){se(t._path)}});function dn(t){return Ct||Mt?new cn(t):null}Mt&&cn.include(hn),Ze.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&rn(t)||dn(t)}});var un=Ai.extend({initialize:function(t,e){Ai.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=N(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});cn.create=ln,cn.pointsToPath=q,Ii.geometryToLayer=zi,Ii.coordsToLatLng=Ni,Ii.coordsToLatLngs=Bi,Ii.latLngToCoords=Fi,Ii.latLngsToCoords=ji,Ii.getFeature=Hi,Ii.asFeature=Ui,Ze.mergeOptions({boxZoom:!0});var pn=Je.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Le(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ie(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Zt(),_e(),this._startPoint=this._map.mouseEventToContainerPoint(t),Le(document,{contextmenu:ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ee("div","leaflet-zoom-box",this._container),ae(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new I(this._point,this._startPoint),i=e.getSize();fe(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(ie(this._box),he(this._container,"leaflet-crosshair")),Vt(),ve(),Se(document,{contextmenu:ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(n(this._resetState,this),0);var e=new R(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ze.addInitHook("addHandler","boxZoom",pn),Ze.mergeOptions({doubleClickZoom:!0});var fn=Je.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});Ze.addInitHook("addHandler","doubleClickZoom",fn),Ze.mergeOptions({dragging:!0,inertia:!it,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mn=Je.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new oi(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ae(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){he(this._map._container,"leaflet-grab"),he(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=N(this._map.options.maxBounds);this._offsetLimit=z(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,r=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,r=i.easeLinearity,a=o.multiplyBy(r/s),h=a.distanceTo([0,0]),l=Math.min(i.inertiaMaxSpeed,h),c=a.multiplyBy(l/h),d=l/(i.inertiaDeceleration*r),u=c.multiplyBy(-d/2).round();u.x||u.y?(u=e._limitOffset(u,e.options.maxBounds),T(function(){e.panBy(u,{duration:d,easeLinearity:r,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Ze.addInitHook("addHandler","dragging",mn),Ze.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gn=Je.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Le(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Se(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){Le(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(e=this._panKeys[i],t.shiftKey&&(e=A(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}ze(t)}}});Ze.addInitHook("addHandler","keyboard",gn),Ze.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _n=Je.extend({addHooks:function(){Le(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Se(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Be(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n(this._performZoom,this),o),ze(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,s=i?Math.ceil(o/i)*i:o,r=t._limitZoom(e+(this._delta>0?s:-s))-e;this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(e+r):t.setZoomAround(this._lastMousePos,e+r))}});Ze.addInitHook("addHandler","scrollWheelZoom",_n),Ze.mergeOptions({tap:!0,tapTolerance:15});var vn=Je.extend({addHooks:function(){Le(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Ie(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new D(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&ae(i,"leaflet-active"),this._holdTimeout=setTimeout(n(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Le(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Se(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&he(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new D(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});!xt||bt&&!ht||Ze.addInitHook("addHandler","tap",vn),Ze.mergeOptions({touchZoom:xt&&!it,bounceAtZoomLimits:!0});var yn=Je.extend({addHooks:function(){ae(this._map._container,"leaflet-touch-zoom"),Le(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){he(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Le(document,"touchmove",this._onTouchMove,this),Le(document,"touchend",this._onTouchEnd,this),Ie(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),s=i.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(s,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&s<1||this._zoom>e.getMaxZoom()&&s>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var r=i._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),S(this._animRequest);var a=n(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=T(a,this,!0),Ie(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,S(this._animRequest),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ze.addInitHook("addHandler","touchZoom",yn),Ze.BoxZoom=pn,Ze.DoubleClickZoom=fn,Ze.Drag=mn,Ze.Keyboard=gn,Ze.ScrollWheelZoom=_n,Ze.Tap=vn,Ze.TouchZoom=yn,t.version="1.6.0",t.Control=Ve,t.control=Ge,t.Browser=Pt,t.Evented=P,t.Mixin=ti,t.Util=C,t.Class=M,t.Handler=Je,t.extend=e,t.bind=n,t.stamp=s,t.setOptions=u,t.DomEvent=$e,t.DomUtil=ke,t.PosAnimation=We,t.Draggable=oi,t.LineUtil=pi,t.PolyUtil=mi,t.Point=D,t.point=A,t.Bounds=I,t.bounds=z,t.Transformation=W,t.transformation=Z,t.Projection=vi,t.LatLng=B,t.latLng=F,t.LatLngBounds=R,t.latLngBounds=N,t.CRS=H,t.GeoJSON=Ii,t.geoJSON=Wi,t.geoJson=Zi,t.Layer=wi,t.LayerGroup=ki,t.layerGroup=function(t,e){return new ki(t,e)},t.FeatureGroup=Li,t.featureGroup=function(t,e){return new Li(t,e)},t.ImageOverlay=Vi,t.imageOverlay=function(t,e,i){return new Vi(t,e,i)},t.VideoOverlay=Gi,t.videoOverlay=function(t,e,i){return new Gi(t,e,i)},t.SVGOverlay=Yi,t.svgOverlay=function(t,e,i){return new Yi(t,e,i)},t.DivOverlay=qi,t.Popup=Xi,t.popup=function(t,e){return new Xi(t,e)},t.Tooltip=Ki,t.tooltip=function(t,e){return new Ki(t,e)},t.Icon=Ti,t.icon=function(t){return new Ti(t)},t.DivIcon=Ji,t.divIcon=function(t){return new Ji(t)},t.Marker=Mi,t.marker=function(t,e){return new Mi(t,e)},t.TileLayer=tn,t.tileLayer=en,t.GridLayer=Qi,t.gridLayer=function(t){return new Qi(t)},t.SVG=cn,t.svg=dn,t.Renderer=on,t.Canvas=sn,t.canvas=rn,t.Path=Ei,t.CircleMarker=Pi,t.circleMarker=function(t,e){return new Pi(t,e)},t.Circle=Di,t.circle=function(t,e,i){return new Di(t,e,i)},t.Polyline=Oi,t.polyline=function(t,e){return new Oi(t,e)},t.Polygon=Ai,t.polygon=function(t,e){return new Ai(t,e)},t.Rectangle=un,t.rectangle=function(t,e){return new un(t,e)},t.Map=Ze,t.map=function(t,e){return new Ze(t,e)};var bn=window.L;t.noConflict=function(){return window.L=bn,this},window.L=t}),L.drawVersion="0.4.2",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Toolbar=L.Class.extend({initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null;var e=L.version.split(".");1===parseInt(e[0],10)&&parseInt(e[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,i=L.DomUtil.create("div","leaflet-draw-section"),n=0,o=this._toolbarClass||"",s=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;e<s.length;e++)s[e].enabled&&this._initModeHandler(s[e].handler,this._toolbarContainer,n++,o,s[e].title);if(n)return this._lastButtonIndex=--n,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),i.appendChild(this._toolbarContainer),i.appendChild(this._actionsContainer),i},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,i=this._actionButtons.length;e<i;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,i,n,o){var s=t.type;this._modes[s]={},this._modes[s].handler=t,this._modes[s].button=this._createButton({type:s,title:o,className:n+"-"+s,container:e,callback:this._modes[s].handler.enable,context:this._modes[s].handler}),this._modes[s].buttonIndex=i,this._modes[s].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container),i=L.DomUtil.create("span","sr-only",t.container);e.href="#",e.appendChild(i),t.title&&(e.title=t.title,i.innerHTML=t.title),t.text&&(e.innerHTML=t.text,i.innerHTML=t.text);var n=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"touchstart",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,n,t.callback,t.context),e},_disposeButton:function(t,e){var i=this._detectIOS()?"touchstart":"click";L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"touchstart",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,i,e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var e,i,n,o,s=this._actionsContainer,r=this.getActions(t),a=r.length;for(i=0,n=this._actionButtons.length;i<n;i++)this._disposeButton(this._actionButtons[i].button,this._actionButtons[i].callback);for(this._actionButtons=[];s.firstChild;)s.removeChild(s.firstChild);for(var h=0;h<a;h++)"enabled"in r[h]&&!r[h].enabled||(e=L.DomUtil.create("li","",s),o=this._createButton({title:r[h].title,text:r[h].text,container:e,callback:r[h].callback,context:r[h].context}),this._actionButtons.push({button:o,callback:r[h].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,i=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=i+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._visible=!1,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",t.text||t.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),i=this._container;return this._container&&(this._visible&&(i.style.visibility="inherit"),L.DomUtil.setPosition(i,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),function(){var t={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,i,n=t.length,o=0,s=Math.PI/180;if(n>2){for(var r=0;r<n;r++)e=t[r],o+=((i=t[(r+1)%n]).lng-e.lng)*s*(2+Math.sin(e.lat*s)+Math.sin(i.lat*s));o=6378137*o*6378137/2}return Math.abs(o)},formattedNumber:function(t,e){var i=parseFloat(t).toFixed(e),n=L.drawLocal.format&&L.drawLocal.format.numeric,o=n&&n.delimiters,s=o&&o.thousands,r=o&&o.decimal;if(s||r){var a=i.split(".");i=s?a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+s):a[0],r=r||".",a.length>1&&(i=i+r+a[1])}return i},readableArea:function(e,i,n){var o,s;n=L.Util.extend({},t,n);return i?(s=["ha","m"],type=typeof i,"string"===type?s=[i]:"boolean"!==type&&(s=i),o=e>=1e6&&-1!==s.indexOf("km")?L.GeometryUtil.formattedNumber(1e-6*e,n.km)+" km²":e>=1e4&&-1!==s.indexOf("ha")?L.GeometryUtil.formattedNumber(1e-4*e,n.ha)+" ha":L.GeometryUtil.formattedNumber(e,n.m)+" m²"):o=(e/=.836127)>=3097600?L.GeometryUtil.formattedNumber(e/3097600,n.mi)+" mi²":e>=4840?L.GeometryUtil.formattedNumber(e/4840,n.ac)+" acres":L.GeometryUtil.formattedNumber(e,n.yd)+" yd²",o},readableDistance:function(e,i,n,o,s){var r;s=L.Util.extend({},t,s);switch(i?"string"==typeof i?i:"metric":n?"feet":o?"nauticalMile":"yards"){case"metric":r=e>1e3?L.GeometryUtil.formattedNumber(e/1e3,s.km)+" km":L.GeometryUtil.formattedNumber(e,s.m)+" m";break;case"feet":e*=3.28083,r=L.GeometryUtil.formattedNumber(e,s.ft)+" ft";break;case"nauticalMile":e*=.53996,r=L.GeometryUtil.formattedNumber(e/1e3,s.nm)+" nm";break;case"yards":default:r=(e*=1.09361)>1760?L.GeometryUtil.formattedNumber(e/1760,s.mi)+" miles":L.GeometryUtil.formattedNumber(e,s.yd)+" yd"}return r},isVersion07x:function(){var t=L.version.split(".");return 0===parseInt(t[0],10)&&7===parseInt(t[1],10)}})}(),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],i=0,n=t.length;i<n;i++)Array.isArray(t[i])?e.push(L.LatLngUtil.cloneLatLngs(t[i])):e.push(this.cloneLatLng(t[i]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,i,n){return this._checkCounterclockwise(t,i,n)!==this._checkCounterclockwise(e,i,n)&&this._checkCounterclockwise(t,e,i)!==this._checkCounterclockwise(t,e,n)},_checkCounterclockwise:function(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}}),L.Polygon.include({intersects:function(){var t,e,i,n,o=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(t=o.length,e=o[0],i=o[t-1],n=t-2,this._lineSegmentsIntersectsRange(i,e,n,1)))}}),L.Polyline.include({intersects:function(){var t,e,i,n=this._getProjectedPoints(),o=n?n.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=o-1;t>=3;t--)if(e=n[t-1],i=n[t],this._lineSegmentsIntersectsRange(e,i,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var i=this._getProjectedPoints(),n=i?i.length:0,o=i?i[n-1]:null,s=n-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(o,t,s,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._getProjectedPoints(),i=e?e.length:0;return!e||(i+=t||0)<=3},_lineSegmentsIntersectsRange:function(t,e,i,n){var o,s,r=this._getProjectedPoints();n=n||0;for(var a=i;a>n;a--)if(o=r[a-1],s=r[a],L.LineUtil.segmentsIntersect(t,e,o,s))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var t=[],e=this._defaultShape(),i=0;i<e.length;i++)t.push(this._map.latLngToLayerPoint(e[i]));return t}}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart),L.DomEvent.off(this._container,"touchend",this._onTouchEnd),L.DomEvent.off(this._container,"touchmove",this._onTouchMove),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(t,e){var i={};if(void 0!==t.touches){if(!t.touches.length)return;i=t.touches[0]}else{if("touch"!==t.pointerType)return;if(i=t,!this._filterClick(t))return}var n=this._map.mouseEventToContainerPoint(i),o=this._map.mouseEventToLayerPoint(i),s=this._map.layerPointToLatLng(o);this._map.fire(e,{latlng:s,layerPoint:o,containerPoint:n,pageX:i.pageX,pageY:i.pageY,originalEvent:t})},_filterClick:function(t){var e=t.timeStamp||t.originalEvent.timeStamp,i=L.DomEvent._lastClick&&e-L.DomEvent._lastClick;return i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?(L.DomEvent.stop(t),!1):(L.DomEvent._lastClick=e,!0)},_onTouchStart:function(t){if(this._map._loaded){this._touchEvent(t,"touchstart")}},_onTouchEnd:function(t){if(this._map._loaded){this._touchEvent(t,"touchend")}},_onTouchCancel:function(t){if(this._map._loaded){var e="touchcancel";this._detectIE()&&(e="pointercancel"),this._touchEvent(t,e)}},_onTouchLeave:function(t){if(this._map._loaded){this._touchEvent(t,"touchleave")}},_onTouchMove:function(t){if(this._map._loaded){this._touchEvent(t,"touchmove")}},_detectIE:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var n=t.indexOf("Edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?e.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):e.concat(["touchcancel"]),L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this),L.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var i=0;i<e.length;i++)L.DomEvent.on(t,e[i],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var n=t.indexOf("Edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(t,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(t){return[{enabled:t.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t.completeShape,context:t},{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){for(var e in L.setOptions(this,t),this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e);var i=L.version.split(".");1===parseInt(i[0],10)&&parseInt(i[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire(L.Draw.Event.CREATED,{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),document.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(document,"mouseup",this._onMouseUp,this),L.DomEvent.off(document,"touchend",this._onMouseUp,this),document.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(document,"mouseup",this._onMouseUp,this).on(document,"touchend",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(t,e){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,i=e.getLatLngs(),n=i.splice(-1,1)[0];this._poly.setLatLngs(i),this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(n,!1)}},addVertex:function(t){this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(t,!0))},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var t=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e=this._poly.newLatLngIntersects(t[t.length-1]);!this.options.allowIntersection&&e||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),i=this._map.layerPointToLatLng(e);this._currentLatLng=i,this._updateTooltip(i),this._updateGuide(e),this._mouseMarker.setLatLng(i),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(t),this._clickHandled=!0,this._disableNewMarkers();var e=t.originalEvent,i=e.clientX,n=e.clientY;this._startPoint.call(this,i,n)}},_startPoint:function(t,e){this._mouseDownOrigin=L.point(t,e)},_onMouseUp:function(t){var e=t.originalEvent,i=e.clientX,n=e.clientY;this._endPoint.call(this,i,n,t),this._clickHandled=null},_endPoint:function(t,e,i){if(this._mouseDownOrigin){var n=L.point(t,e).distanceTo(this._mouseDownOrigin),o=this._calculateFinishDistance(i.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(i.latlng),this._finishShape()):o<10&&L.Browser.touch?this._finishShape():Math.abs(n)<9*(window.devicePixelRatio||1)&&this.addVertex(i.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t){var e,i,n=t.originalEvent;!n.touches||!n.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(e=n.touches[0].clientX,i=n.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,e,i),this._endPoint.call(this,e,i,t),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(t){var e;if(this._markers.length>0){var i;if(this.type===L.Draw.Polyline.TYPE)i=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;i=this._markers[0]}var n=this._map.latLngToContainerPoint(i.getLatLng()),o=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),s=this._map.latLngToContainerPoint(o.getLatLng());e=n.distanceTo(s)}else e=1/0;return e},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers?this._markers.length:0;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var i,n,o,s=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),r=this.options.guidelineDistance,a=this.options.maxGuideLineLength,h=s>a?s-a:r;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));h<s;h+=this.options.guidelineDistance)i=h/s,n={x:Math.floor(t.x*(1-i)+i*e.x),y:Math.floor(t.y*(1-i)+i*e.y)},(o=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(o,n)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,i=this._guidesContainer.childNodes.length;e<i;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,i=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=i?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var i,n,o=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(i=o-(e?2:1),n=L.GeometryUtil.isVersion07x()?t.distanceTo(this._markers[i].getLatLng())*(this.options.factor||1):this._map.distance(t,this._markers[i].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=n*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,i=this._markers[this._markers.length-1].getLatLng();return t=L.GeometryUtil.isVersion07x()?i&&e&&e.distanceTo?this._measurementRunningTotal+e.distanceTo(i)*(this.options.factor||1):this._measurementRunningTotal||0:i&&e?this._measurementRunningTotal+this._map.distance(e,i)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(t,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=this._createMarker(e),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(t){return new L.Marker(t,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(t){this._onMouseMove(t),this._onClick()},_fireCreatedEvent:function(){var t=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){if(L.GeometryUtil.isVersion07x())var e=this._startLatLng.distanceTo(t);else e=this._map.distance(this._startLatLng,t);this._shape?this._shape.setRadius(e):(this._shape=new L.Circle(this._startLatLng,e,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,i=t.latlng,n=this.options.showRadius,o=this.options.metric;if(this._tooltip.updatePosition(i),this._isDrawing){this._drawShape(i),e=this._shape.getRadius().toFixed(1);var s="";n&&(s=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,o,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:s})}}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},_fireCreatedEvent:function(){var t=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)},_createMarker:function(t){return new L.CircleMarker(t,this.options)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(t=L.drawLocal.draw.handlers.polygon.tooltip.cont,e=this._getMeasurementString()):(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area,e="";return t||this.options.showLength?(this.options.showLength&&(e=L.Draw.Polyline.prototype._getMeasurementString.call(this)),t&&(e+="<br>"+L.GeometryUtil.readableArea(t,this.options.metric,this.options.precision)),e):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t,e){var i;!this.options.allowIntersection&&this.options.showArea&&(i=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(i)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,showArea:!0,clickable:!0},metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(t){this._shape||this._isCurrentlyTwoClickDrawing?this._isCurrentlyTwoClickDrawing&&!_hasAncestor(t.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this):this._isCurrentlyTwoClickDrawing=!0},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,i,n=L.Draw.SimpleShape.prototype._getTooltipText.call(this),o=this._shape,s=this.options.showArea;return o&&(t=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),i=s?L.GeometryUtil.readableArea(e,this.options.metric):""),{text:n.text,subtext:i}}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t){t.edit&&(void 0===t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),t.poly&&(t.poly=L.extend({},this.options.poly,t.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(t){var e=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return t.removeAllLayers&&e.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),e},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var i=L.version.split(".");1===parseInt(i[0],10)&&parseInt(i[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),t._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:(t instanceof L.Marker||t instanceof L.CircleMarker)&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):(t instanceof L.Marker||t instanceof L.CircleMarker)&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,i,n=t.layer||t.target||t;this._backupLayer(n),this.options.poly&&(i=L.Util.extend({},this.options.poly),n.options.poly=i),this.options.selectedPathOptions&&((e=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(e.color=n.options.color,e.fillColor=n.options.fillColor),n.options.original=L.extend({},n.options),n.options.editing=e),n instanceof L.Marker?(n.editing&&n.editing.enable(),n.dragging.enable(),n.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):n.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing&&e.editing.disable(),delete e.options.editing,delete e.options.original,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):e.editing.disable()},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_onTouchMove:function(t){var e=t.originalEvent.changedTouches[0],i=this._map.mouseEventToLayerPoint(e),n=this._map.layerPointToLatLng(i);t.target.setLatLng(n)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var i=L.version.split(".");1===parseInt(i[0],10)&&parseInt(i[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t),t.fire("revert-deleted",{layer:t})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(t){this._removeLayer({layer:t})},this),this.save()},_enableLayerDelete:function(t){(t.layer||t.target||t).on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var e;L.Control.prototype.initialize.call(this,t),this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(t){var e,i=L.DomUtil.create("div","leaflet-draw"),n=!1;for(var o in this._toolbars)this._toolbars.hasOwnProperty(o)&&(e=this._toolbars[o].addToolbar(t))&&(n||(L.DomUtil.hasClass(e,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(e.childNodes[0],"leaflet-draw-toolbar-top"),n=!0),i.appendChild(e));return i},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var i in this._toolbars)this._toolbars[i]!==e&&this._toolbars[i].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(t){this.latlngs=[t._latlngs],t._holes&&(this.latlngs=this.latlngs.concat(t._holes)),this._poly=t,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(t){for(var e=0;e<this._verticesHandlers.length;e++)t(this._verticesHandlers[e])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(t){t.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(t){t.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(t){t.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var t=0;t<this.latlngs.length;t++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t],this._poly.options.poly))},_updateLatLngs:function(t){this.latlngs=[t.layer._latlngs],t.layer._holes&&(this.latlngs=this.latlngs.concat(t.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(t,e,i){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=t,i&&i.drawError&&(i.drawError=L.Util.extend({},this.options.drawError,i.drawError)),this._latlngs=e,L.setOptions(this,i)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var t=this._poly,e=t._path;t instanceof L.Polygon||(t.options.fill=!1,t.options.editing&&(t.options.editing.fill=!1)),e&&t.options.editing&&t.options.editing.className&&(t.options.original.className&&t.options.original.className.split(" ").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.editing.className.split(" ").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly,e=t._path;e&&t.options.editing&&t.options.editing.className&&(t.options.editing.className.split(" ").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.original.className&&t.options.original.className.split(" ").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,i,n,o,s,r=this._defaultShape();for(t=0,i=r.length;t<i;t++)(n=this._createMarker(r[t],t)).on("click",this._onMarkerClick,this),n.on("contextmenu",this._onContextMenu,this),this._markers.push(n);for(t=0,e=i-1;t<i;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(o=this._markers[e],s=this._markers[t],this._createMiddleMarker(o,s),this._updatePrevNext(o,s))},_createMarker:function(t,e){var i=new L.Marker.Touch(t,{draggable:!0,icon:this.options.icon});return i._origLatLng=t,i._index=e,i.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(i),i},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._poly._convertLatLngs(t,!0),this._poly.redraw(),e},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(t){var e=t.target,i=this._poly;if(L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),i.options.poly){var n=i._map._editTooltip;if(!i.options.poly.allowIntersection&&i.intersects()){var o=i.options.color;i.setStyle({color:this.options.drawError.color}),0!==L.version.indexOf("0.7")&&e.dragging._draggable._onUp(t),this._onMarkerClick(t),n&&n.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){i.setStyle({color:o}),n&&n.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var s=this._poly.getLatLngs();this._poly._convertLatLngs(s,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,i=t.target;this._defaultShape().length<e||(this._removeMarker(i),this._updatePrevNext(i._prev,i._next),i._middleLeft&&this._markerGroup.removeLayer(i._middleLeft),i._middleRight&&this._markerGroup.removeLayer(i._middleRight),i._prev&&i._next?this._createMiddleMarker(i._prev,i._next):i._prev?i._next||(i._prev._middleRight=null):i._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(t){var e=t.target;this._poly;this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:e,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),i=this._map.layerPointToLatLng(e),n=t.target;L.extend(n._origLatLng,i),n._middleLeft&&n._middleLeft.setLatLng(this._getMiddleLatLng(n._prev,n)),n._middleRight&&n._middleRight.setLatLng(this._getMiddleLatLng(n,n._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(i){i._index>t&&(i._index+=e)})},_createMiddleMarker:function(t,e){var i,n,o,s=this._getMiddleLatLng(t,e),r=this._createMarker(s);r.setOpacity(.6),t._middleRight=e._middleLeft=r,n=function(){r.off("touchmove",n,this);var o=e._index;r._index=o,r.off("click",i,this).on("click",this._onMarkerClick,this),s.lat=r.getLatLng().lat,s.lng=r.getLatLng().lng,this._spliceLatLngs(o,0,s),this._markers.splice(o,0,r),r.setOpacity(1),this._updateIndexes(o,1),e._index++,this._updatePrevNext(t,r),this._updatePrevNext(r,e),this._poly.fire("editstart")},o=function(){r.off("dragstart",n,this),r.off("dragend",o,this),r.off("touchmove",n,this),this._createMiddleMarker(t,r),this._createMiddleMarker(r,e)},i=function(){n.call(this),o.call(this),this._fireEdit()},r.on("click",i,this).on("dragstart",n,this).on("dragend",o,this).on("touchmove",n,this),this._markerGroup.addLayer(r)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var i=this._poly._map,n=i.project(t.getLatLng()),o=i.project(e.getLatLng());return i.unproject(n._add(o)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(t,e){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;this._shape._map&&(this._map=this._shape._map,t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,i=this._resizeMarkers.length;e<i;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var i=new L.Marker.Touch(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(i),this._markerGroup.addLayer(i),i},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(t){t.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,i=e.getLatLng();e===this._moveMarker?this._move(i):this._resize(i),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(t){t.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(t){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t),"function"==typeof this._getCorners){var e=this._getCorners(),i=t.target,n=i._cornerIndex;i.setOpacity(0),this._oppositeCorner=e[(n+2)%4],this._toggleCornerMarkers(0,n)}this._shape.fire("editstart")},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),i=this._map.layerPointToLatLng(e);return t.target===this._moveMarker?this._move(i):this._resize(i),this._shape.redraw(),!1},_onTouchEnd:function(t){t.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,i=t.length;e<i;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),i=t.target._cornerIndex;this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)},_onMarkerDragEnd:function(t){var e,i=t.target;i===this._moveMarker&&(e=this._shape.getBounds().getCenter(),i.setLatLng(e)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,i=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),n=this._shape.getBounds().getCenter(),o=[],s=0,r=i.length;s<r;s++)e=[i[s].lat-n.lat,i[s].lng-n.lng],o.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(o),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var t=this._shape.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_toggleCornerMarkers:function(t){for(var e=0,i=this._resizeMarkers.length;e<i;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,i=this._resizeMarkers.length;e<i;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_toggleMarkerHighlight:function(){var t=this._marker._icon;t&&(t.style.display="none",L.DomUtil.hasClass(t,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,4)),t.style.display="")},_offsetMarker:function(t,e){var i=parseInt(t.style.marginTop,10)-e,n=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=i+"px",t.style.marginLeft=n+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(t){if(this._resizeMarkers.length){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e)}this._shape.setLatLng(t),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),i=this._map.project(t);return this._map.unproject([i.x+e,i.y-e])},_resize:function(t){var e=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=e.distanceTo(t):radius=this._map.distance(e,t),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),function(t){if("function"==typeof define&&define.amd)define(["leaflet"],t);else if("undefined"!=typeof module)module.exports=t(require("leaflet"));else{if(void 0===window.L)throw new Error("Leaflet must be loaded first");t(window.L)}}(function(t){t.Control.Fullscreen=t.Control.extend({options:{position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},onAdd:function(e){var i=t.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=t.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",i),this.link.href="#",this._map=e,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),t.DomEvent.on(this.link,"click",this._click,this),i},_click:function(e){t.DomEvent.stopPropagation(e),t.DomEvent.preventDefault(e),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),t.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(t){var e=this.getContainer();this.isFullscreen()?t&&t.pseudoFullscreen?this._disablePseudoFullscreen(e):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(e):t&&t.pseudoFullscreen?this._enablePseudoFullscreen(e):e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen?e.msRequestFullscreen():this._enablePseudoFullscreen(e)},_enablePseudoFullscreen:function(e){t.DomUtil.addClass(e,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(e){t.DomUtil.removeClass(e,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(e){this._isFullscreen=e;var i=this.getContainer();e?t.DomUtil.addClass(i,"leaflet-fullscreen-on"):t.DomUtil.removeClass(i,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(t){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;e!==this.getContainer()||this._isFullscreen?e!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),t.Map.mergeOptions({fullscreenControl:!1}),t.Map.addInitHook(function(){var e;if(this.options.fullscreenControl&&(this.fullscreenControl=new t.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl)),"onfullscreenchange"in document?e="fullscreenchange":"onmozfullscreenchange"in document?e="mozfullscreenchange":"onwebkitfullscreenchange"in document?e="webkitfullscreenchange":"onmsfullscreenchange"in document&&(e="MSFullscreenChange"),e){var i=t.bind(this._onFullscreenChange,this);this.whenReady(function(){t.DomEvent.on(document,e,i)}),this.on("unload",function(){t.DomEvent.off(document,e,i)})}}),t.control.fullscreen=function(e){return new t.Control.Fullscreen(e)}}),function(){"use strict";function t(t){t.blockUI=function(n){!function(n,o){e&&i();e=t('<div class="loader"><div class="spinner"></div></div>');var s=o&&o.parentNode?o.parentNode:"body";e.prependTo(s)}(window,n)},t.unblockUI=function(t){i(window)};var e=null;function i(){e&&e.fadeOut("fast",function(){null!==e&&(e.remove(),e=null)})}}"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],t):t(jQuery)}(),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e=/\+/g;function i(t){return o.raw?t:encodeURIComponent(t)}function n(i,n){var s=o.raw?i:function(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(e," ")),o.json?JSON.parse(t):t}catch(t){}}(i);return t.isFunction(n)?n(s):s}var o=t.cookie=function(e,s,r){if(arguments.length>1&&!t.isFunction(s)){if("number"==typeof(r=t.extend({},o.defaults,r)).expires){var a=r.expires,h=r.expires=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*a)}return document.cookie=[i(e),"=",function(t){return i(o.json?JSON.stringify(t):String(t))}(s),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}for(var l,c=e?void 0:{},d=document.cookie?document.cookie.split("; "):[],u=0,p=d.length;u<p;u++){var f=d[u].split("="),m=(l=f.shift(),o.raw?l:decodeURIComponent(l)),g=f.join("=");if(e===m){c=n(g,s);break}e||void 0===(g=n(g))||(c[m]=g)}return c};o.defaults={},t.removeCookie=function(e,i){return t.cookie(e,"",t.extend({},i,{expires:-1})),!t.cookie(e)}});var PersianDatePicker=function(){var t=new Array("شنبه","یکشنبه","دوشنبه","سهشنبه","چهارشنبه","پنجشنبه","جمعه"),e=new Array("فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"),i=null,n=null,o=null,s=null,r=!1;function h(){s.visibility="hidden"}function l(t){o.value=t,o.focus(),h(),o.onchange()}function c(t,e){return t.substring(0,8)+(e<10?"0":"")+e}function u(t,e){var i=document.createElement(t);return e.appendChild(i),i}function p(t){return 682*((t-474)%2820+512)%2816<682}function f(t,e){return Math.abs(t-e*Math.floor(t/e))}function m(t,e){t.innerHTML=e}function g(t,e){t.className=e}function _(t){return parseInt(t,10)}function v(t){var e=t.split("/");return e[1]<8?31*(e[1]-1)+_(e[2]):186+30*(e[1]-7)+_(e[2])}function y(t){var e=t.split("/");return e[1]<7?31:e[1]<12?30:p(e[0])?30:29}this.show=function(b){null==n&&(n=u("div",document.body),(s=n.style).position="absolute",s.zIndex=1e7,n.onmousedown=function(){r=!0},n.onclick=function(){o.focus()}),i=function(){switch(a=new Date,d=a.getDay(),day=a.getDate(),month=a.getMonth()+1,year=a.getYear(),year=0==year?2e3:year,!(year<1e3)||(year+=1900),year-=month<3||3==month&&day<21?622:621,month){case 1:day<21?(month=10,day+=10):(month=11,day-=20);break;case 2:day<20?(month=11,day+=11):(month=12,day-=19);break;case 3:day<21?(month=12,day+=9):(month=1,day-=20);break;case 4:day<21?(month=1,day+=11):(month=2,day-=20);break;case 5:case 6:case 7:day<22?(month-=3,day+=10):(month-=2,day-=21);break;case 8:case 9:day<23?(month-=3,day+=9):(month-=2,day-=22);break;case 10:day<23?(month=7,day+=8):(month=8,day-=22);break;case 11:case 12:day<22?(month-=3,day+=9):(month-=2,day-=21)}return month=1===month.toString().length?"0"+month:month,day=1===day.toString().length?"0"+day:day,year+"/"+month+"/"+day}(),(o=b).onblur=function(){r||h(),r=!1};for(var x=0,w=0,k=o;k.offsetParent;)x+=k.offsetLeft,w+=k.offsetTop,k=k.offsetParent;s.left=x+"px",s.top=w+o.offsetHeight+"px",s.visibility="visible",function s(r){o.focus();var a=function(t){return f(function(t,e){for(var i=v(e)-v(t),n=t.split("/"),o=e.split("/"),s=n[0]<o[0]?n[0]:o[0],r=n[0]<o[0]?o[0]:n[0],a=s;a<r;a++)p(a)?i+=n[0]<o[0]?366:-366:i+=n[0]<o[0]?365:-365;return _(i)}("1392/03/25",t),7)}(r.substring(0,8)+"01");m(n,"");var h=u("table",n);g(h,"datePicker");h.cellSpacing=0;var d=h.insertRow(0);g(d,"datePickerHeader");var b=u("td",d);b.colSpan=3;var x=u("button",b);m(x,"&lt;");x.onclick=function(){s(function(t){var e=t.split("/");return e[1]>10?e[0]+"/"+(_(e[1])-1).toString()+"/"+e[2]:e[1]>1?e[0]+"/0"+(e[1]-1).toString()+"/"+e[2]:(_(e[0])-1).toString()+"/12/"+e[2]}(r))};var w=u("span",b);m(w,e[r.substring(5,7)-1]);g(w,"datePickerMonth");x=u("button",b);m(x,"&gt;");x.onclick=function(){s(function(t){var e=t.split("/");return e[1]<9?e[0]+"/0"+(_(e[1].substring(1,2))+1).toString()+"/"+e[2]:9==e[1]?e[0]+"/10/"+e[2]:e[1]<12?e[0]+"/"+(_(e[1])+1).toString()+"/"+e[2]:(_(e[0])+1).toString()+"/01/"+e[2]}(r))};b=u("td",d);b.colSpan=4;b.style.textAlign="left";x=u("button",b);m(x,"&lt;");x.onclick=function(){s(function(t){var e=t.split("/");return(_(e[0])-1).toString()+"/"+e[1]+"/"+e[2]}(r))};w=u("span",b);m(w,r.substring(0,4));g(w,"datePickerYear");x=u("button",b);m(x,"&gt;");x.onclick=function(){s(function(t){var e=t.split("/");return(_(e[0])+1).toString()+"/"+e[1]+"/"+e[2]}(r))};for(var k=0;k<7;k++){d=h.insertRow(k+1),6==k?g(d,"datePickerFriDay"):1!=f(k,2)&&g(d,"datePickerRow"),m(b=u("td",d),t[k]);for(var L=0;L<6;L++){var T=7*L+k-a+1;if(b=u("td",d),T>0&&T<=y(r)){m(b,T);var S=c(r,T),C="datePickerDay";S==o.value?C="datePickerDaySelect":S==i&&(C="datePickerToday"),g(b,C),b.onclick=function(){l(c(r,this.innerHTML))}}}}d=h.insertRow(8);g(d,"datePickerFooter");b=u("td",d);b.colSpan=2;x=u("button",b);m(x,"امروز");x.onclick=function(){l(i)};b=u("td",d);b.colSpan=5;b.style.textAlign="left";x=u("button",b);m(x,"خالی");x.onclick=function(){l("")}}(10==o.value.length?o.value:i)}},_persianDatePicker=new PersianDatePicker;if(PersianDatePicker.Show=function(t){_persianDatePicker.show(t)},function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["angular-file-upload"]=e():t["angular-file-upload"]=e()}(this,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}return i.m=t,i.c=e,i.p="",i(0)}([function(t,e,i){"use strict";var n=g(i(1)),o=g(i(2)),s=g(i(3)),r=g(i(4)),a=g(i(5)),h=g(i(6)),l=g(i(7)),c=g(i(8)),d=g(i(9)),u=g(i(10)),p=g(i(11)),f=g(i(12)),m=g(i(13));function g(t){return t&&t.__esModule?t:{default:t}}angular.module(n.default.name,[]).value("fileUploaderOptions",o.default).factory("FileUploader",s.default).factory("FileLikeObject",r.default).factory("FileItem",a.default).factory("FileDirective",h.default).factory("FileSelect",l.default).factory("FileDrop",d.default).factory("FileOver",u.default).factory("Pipeline",c.default).directive("nvFileSelect",p.default).directive("nvFileDrop",f.default).directive("nvFileOver",m.default).run(["FileUploader","FileLikeObject","FileItem","FileDirective","FileSelect","FileDrop","FileOver","Pipeline",function(t,e,i,n,o,s,r,a){t.FileLikeObject=e,t.FileItem=i,t.FileDirective=n,t.FileSelect=o,t.FileDrop=s,t.FileOver=r,t.Pipeline=a}])},function(t,e){t.exports={name:"angularFileUpload"}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1,disableMultipart:!1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=_;var o,s=i(1);(o=s)&&o.__esModule;var r=angular,a=r.bind,h=r.copy,l=r.extend,c=r.forEach,d=r.isObject,u=r.isNumber,p=r.isDefined,f=r.isArray,m=r.isUndefined,g=r.element;function _(t,e,i,o,s,r,_,v){var y=o.File,b=o.FormData,x=function(){function o(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var i=h(t);l(this,i,e,{isUploading:!1,_nextIndex:0,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}return o.prototype.addToQueue=function(t,e,i){var o=this,s=this.isArrayLikeObject(t)?Array.prototype.slice.call(t):[t],a=this._getFilters(i),h=this.queue.length,l=[],c=function(){o.queue.length!==h&&(o._onAfterAddingAll(l),o.progress=o._getTotalProgress()),o._render(),o.autoUpload&&o.uploadAll()};!function t(){var i=s.shift();if(m(i))return c();var h=o.isFile(i)?i:new r(i),d=o._convertFiltersToPipes(a),u=new v(d);u.onThrown=function(e){var i=e.pipe.originalFilter,s=n(e.args,2),r=s[0],a=s[1];o._onWhenAddingFileFailed(r,i,a),t()},u.onSuccessful=function(e,i){var n=new _(o,e,i);l.push(n),o.queue.push(n),o._onAfterAddingFile(n),t()},u.exec(h,e)}()},o.prototype.removeFromQueue=function(t){var e=this.getIndexOfItem(t),i=this.queue[e];i.isUploading&&i.cancel(),this.queue.splice(e,1),i._destroy(),this.progress=this._getTotalProgress()},o.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},o.prototype.uploadItem=function(t){var e=this.getIndexOfItem(t),i=this.queue[e],n=this.isHTML5?"_xhrTransport":"_iframeTransport";i._prepareToUploading(),this.isUploading||(this._onBeforeUploadItem(i),i.isCancel||(i.isUploading=!0,this.isUploading=!0,this[n](i),this._render()))},o.prototype.cancelItem=function(t){var e,i=this,n=this.getIndexOfItem(t),o=this.queue[n],r=this.isHTML5?"_xhr":"_form";o&&(o.isCancel=!0,o.isUploading?o[r].abort():(e=[void 0,0,{}],s(function(){i._onCancelItem.apply(i,[o].concat(e)),i._onCompleteItem.apply(i,[o].concat(e))})))},o.prototype.uploadAll=function(){var t=this.getNotUploadedItems().filter(function(t){return!t.isUploading});t.length&&(c(t,function(t){return t._prepareToUploading()}),t[0].upload())},o.prototype.cancelAll=function(){var t=this.getNotUploadedItems();c(t,function(t){return t.cancel()})},o.prototype.isFile=function(t){return this.constructor.isFile(t)},o.prototype.isFileLikeObject=function(t){return this.constructor.isFileLikeObject(t)},o.prototype.isArrayLikeObject=function(t){return this.constructor.isArrayLikeObject(t)},o.prototype.getIndexOfItem=function(t){return u(t)?t:this.queue.indexOf(t)},o.prototype.getNotUploadedItems=function(){return this.queue.filter(function(t){return!t.isUploaded})},o.prototype.getReadyItems=function(){return this.queue.filter(function(t){return t.isReady&&!t.isUploading}).sort(function(t,e){return t.index-e.index})},o.prototype.destroy=function(){var t=this;c(this._directives,function(e){c(t._directives[e],function(t){t.destroy()})})},o.prototype.onAfterAddingAll=function(t){},o.prototype.onAfterAddingFile=function(t){},o.prototype.onWhenAddingFileFailed=function(t,e,i){},o.prototype.onBeforeUploadItem=function(t){},o.prototype.onProgressItem=function(t,e){},o.prototype.onProgressAll=function(t){},o.prototype.onSuccessItem=function(t,e,i,n){},o.prototype.onErrorItem=function(t,e,i,n){},o.prototype.onCancelItem=function(t,e,i,n){},o.prototype.onCompleteItem=function(t,e,i,n){},o.prototype.onCompleteAll=function(){},o.prototype._getTotalProgress=function(t){if(this.removeAfterUpload)return t||0;var e=this.getNotUploadedItems().length,i=e?this.queue.length-e:this.queue.length,n=100/this.queue.length,o=(t||0)*n/100;return Math.round(i*n+o)},o.prototype._getFilters=function(t){if(!t)return this.filters;if(f(t))return t;var e=t.match(/[^\s,]+/g);return this.filters.filter(function(t){return-1!==e.indexOf(t.name)})},o.prototype._convertFiltersToPipes=function(t){var e=this;return t.map(function(t){var i=a(e,t.fn);return i.isAsync=3===t.fn.length,i.originalFilter=t,i})},o.prototype._render=function(){e.$$phase||e.$apply()},o.prototype._folderFilter=function(t){return!(!t.size&&!t.type)},o.prototype._queueLimitFilter=function(){return this.queue.length<this.queueLimit},o.prototype._isSuccessCode=function(t){return t>=200&&t<300||304===t},o.prototype._transformResponse=function(t,e){var n=this._headersGetter(e);return c(i.defaults.transformResponse,function(e){t=e(t,n)}),t},o.prototype._parseHeaders=function(t){var e,i,n,o={};return t?(c(t.split("\n"),function(t){n=t.indexOf(":"),e=t.slice(0,n).trim().toLowerCase(),i=t.slice(n+1).trim(),e&&(o[e]=o[e]?o[e]+", "+i:i)}),o):o},o.prototype._headersGetter=function(t){return function(e){return e?t[e.toLowerCase()]||null:t}},o.prototype._xhrTransport=function(t){var e,i=this,n=t._xhr=new XMLHttpRequest;if(t.disableMultipart?e=t._file:(e=new b,c(t.formData,function(t){c(t,function(t,i){e.append(i,t)})}),e.append(t.alias,t._file,t.file.name)),"number"!=typeof t._file.size)throw new TypeError("The file specified is no longer valid");n.upload.onprogress=function(e){var n=Math.round(e.lengthComputable?100*e.loaded/e.total:0);i._onProgressItem(t,n)},n.onload=function(){var e=i._parseHeaders(n.getAllResponseHeaders()),o=i._transformResponse(n.response,e),s=i._isSuccessCode(n.status)?"Success":"Error";i["_on"+s+"Item"](t,o,n.status,e),i._onCompleteItem(t,o,n.status,e)},n.onerror=function(){var e=i._parseHeaders(n.getAllResponseHeaders()),o=i._transformResponse(n.response,e);i._onErrorItem(t,o,n.status,e),i._onCompleteItem(t,o,n.status,e)},n.onabort=function(){var e=i._parseHeaders(n.getAllResponseHeaders()),o=i._transformResponse(n.response,e);i._onCancelItem(t,o,n.status,e),i._onCompleteItem(t,o,n.status,e)},n.open(t.method,t.url,!0),n.withCredentials=t.withCredentials,c(t.headers,function(t,e){n.setRequestHeader(e,t)}),n.send(e)},o.prototype._iframeTransport=function(t){var e=this,i=g('<form style="display: none;" />'),n=g('<iframe name="iframeTransport'+Date.now()+'">'),o=t._input;t._form&&t._form.replaceWith(o),t._form=i,o.prop("name",t.alias),c(t.formData,function(t){c(t,function(t,e){var n=g('<input type="hidden" name="'+e+'" />');n.val(t),i.append(n)})}),i.prop({action:t.url,method:"POST",target:n.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),n.bind("load",function(){var i="",o=200;try{i=n[0].contentDocument.body.innerHTML}catch(t){o=500}var s={response:i,status:o,dummy:!0},r={},a=e._transformResponse(s.response,r);e._onSuccessItem(t,a,s.status,r),e._onCompleteItem(t,a,s.status,r)}),i.abort=function(){var s=0,r={};n.unbind("load").prop("src","javascript:false;"),i.replaceWith(o),e._onCancelItem(t,void 0,s,r),e._onCompleteItem(t,void 0,s,r)},o.after(i),i.append(o).append(n),i[0].submit()},o.prototype._onWhenAddingFileFailed=function(t,e,i){this.onWhenAddingFileFailed(t,e,i)},o.prototype._onAfterAddingFile=function(t){this.onAfterAddingFile(t)},o.prototype._onAfterAddingAll=function(t){this.onAfterAddingAll(t)},o.prototype._onBeforeUploadItem=function(t){t._onBeforeUpload(),this.onBeforeUploadItem(t)},o.prototype._onProgressItem=function(t,e){var i=this._getTotalProgress(e);this.progress=i,t._onProgress(e),this.onProgressItem(t,e),this.onProgressAll(i),this._render()},o.prototype._onSuccessItem=function(t,e,i,n){t._onSuccess(e,i,n),this.onSuccessItem(t,e,i,n)},o.prototype._onErrorItem=function(t,e,i,n){t._onError(e,i,n),this.onErrorItem(t,e,i,n)},o.prototype._onCancelItem=function(t,e,i,n){t._onCancel(e,i,n),this.onCancelItem(t,e,i,n)},o.prototype._onCompleteItem=function(t,e,i,n){t._onComplete(e,i,n),this.onCompleteItem(t,e,i,n);var o=this.getReadyItems()[0];this.isUploading=!1,p(o)?o.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),this._render())},o.isFile=function(t){return y&&t instanceof y},o.isFileLikeObject=function(t){return t instanceof r},o.isArrayLikeObject=function(t){return d(t)&&"length"in t},o.inherit=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.super_=e},o}();return x.prototype.isHTML5=!(!y||!b),x.isHTML5=x.prototype.isHTML5,x}_.$inject=["fileUploaderOptions","$rootScope","$http","$window","$timeout","FileLikeObject","FileItem","Pipeline"]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=a(e),n=i?e.value:e,o=h(n)?"FakePath":"Object",s="_createFrom"+o;this[s](n)}return t.prototype._createFromFakePath=function(t){this.lastModifiedDate=null,this.size=null,this.type="like/"+t.slice(t.lastIndexOf(".")+1).toLowerCase(),this.name=t.slice(t.lastIndexOf("/")+t.lastIndexOf("\\")+2)},t.prototype._createFromObject=function(t){this.lastModifiedDate=r(t.lastModifiedDate),this.size=t.size,this.type=t.type,this.name=t.name},t}()};var n,o=i(1);(n=o)&&n.__esModule;var s=angular,r=s.copy,a=s.isElement,h=s.isString},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var n,o=i(1);(n=o)&&n.__esModule;var s=angular,r=s.copy,a=s.extend,h=s.element,l=s.isElement;function c(t,e){return function(){function i(t,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var s=l(n),c=s?h(n):null,d=s?null:n;a(this,{url:t.url,alias:t.alias,headers:r(t.headers),formData:r(t.formData),removeAfterUpload:t.removeAfterUpload,withCredentials:t.withCredentials,disableMultipart:t.disableMultipart,method:t.method},o,{uploader:t,file:new e(n),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:d,_input:c}),c&&this._replaceNode(c)}return i.prototype.upload=function(){try{this.uploader.uploadItem(this)}catch(e){var t=e.name+":"+e.message;this.uploader._onCompleteItem(this,t,e.code,[]),this.uploader._onErrorItem(this,t,e.code,[])}},i.prototype.cancel=function(){this.uploader.cancelItem(this)},i.prototype.remove=function(){this.uploader.removeFromQueue(this)},i.prototype.onBeforeUpload=function(){},i.prototype.onProgress=function(t){},i.prototype.onSuccess=function(t,e,i){},i.prototype.onError=function(t,e,i){},i.prototype.onCancel=function(t,e,i){},i.prototype.onComplete=function(t,e,i){},i.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},i.prototype._onProgress=function(t){this.progress=t,this.onProgress(t)},i.prototype._onSuccess=function(t,e,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(t,e,i)},i.prototype._onError=function(t,e,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(t,e,i)},i.prototype._onCancel=function(t,e,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(t,e,i)},i.prototype._onComplete=function(t,e,i){this.onComplete(t,e,i),this.removeAfterUpload&&this.remove()},i.prototype._destroy=function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input},i.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},i.prototype._replaceNode=function(e){var i=t(e.clone())(e.scope());i.prop("value",null),e.css("display","none"),e.after(i)},i}()}c.$inject=["$compile","FileLikeObject"]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,e),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}return t.prototype.bind=function(){for(var t in this.events){var e=this.events[t];this.element.bind(t,this[e])}},t.prototype.unbind=function(){for(var t in this.events)this.element.unbind(t,this.events[t])},t.prototype.destroy=function(){var t=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(t,1),this.unbind()},t.prototype._saveLinks=function(){for(var t in this.events){var e=this.events[t];this[e]=this[e].bind(this)}},t}();return t.prototype.events={},t};var n,o=i(1);(n=o)&&n.__esModule;var s=angular.extend},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n,o=i(1);(n=o)&&n.__esModule;var s=angular.extend;function r(t,e){return function(e){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=s(t,{events:{$destroy:"destroy",change:"onChange"},prop:"select"}),o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.call(this,n));return o.uploader.isHTML5||o.element.removeAttr("multiple"),o.element.prop("value",null),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,e),i.prototype.getOptions=function(){},i.prototype.getFilters=function(){},i.prototype.isEmptyAfterSelection=function(){return!!this.element.attr("multiple")},i.prototype.onChange=function(){var e=this.uploader.isHTML5?this.element[0].files:this.element[0],i=this.getOptions(),n=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(e,i,n),this.isEmptyAfterSelection()&&(this.element.prop("value",null),this.element.replaceWith(t(this.element.clone())(this.scope)))},i}(e)}r.$inject=["$compile","FileDirective"]},function(t,e){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=angular,o=n.bind,s=n.isUndefined;function r(t){return function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.pipes=t}return e.prototype.next=function(e){var n=this.pipes.shift();if(s(n))this.onSuccessful.apply(this,i(e));else{var r=new Error("The filter has not passed");if(r.pipe=n,r.args=e,n.isAsync){var a=t.defer(),h=o(this,this.next,e),l=o(this,this.onThrown,r);a.promise.then(h,l),n.apply(void 0,i(e).concat([a]))}else{Boolean(n.apply(void 0,i(e)))?this.next(e):this.onThrown(r)}}},e.prototype.exec=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.next(e)},e.prototype.onThrown=function(t){},e.prototype.onSuccessful=function(){},e}()}r.$inject=["$q"]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=h;var n,o=i(1);(n=o)&&n.__esModule;var s=angular,r=s.extend,a=s.forEach;function h(t){return function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r(i,{events:{$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},prop:"drop"});return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getOptions=function(){},e.prototype.getFilters=function(){},e.prototype.onDrop=function(t){var e=this._getTransfer(t);if(e){var i=this.getOptions(),n=this.getFilters();this._preventAndStop(t),a(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(e.files,i,n)}},e.prototype.onDragOver=function(t){var e=this._getTransfer(t);this._haveFiles(e.types)&&(e.dropEffect="copy",this._preventAndStop(t),a(this.uploader._directives.over,this._addOverClass,this))},e.prototype.onDragLeave=function(t){t.currentTarget!==this.element[0]&&(this._preventAndStop(t),a(this.uploader._directives.over,this._removeOverClass,this))},e.prototype._getTransfer=function(t){return t.dataTransfer?t.dataTransfer:t.originalEvent.dataTransfer},e.prototype._preventAndStop=function(t){t.preventDefault(),t.stopPropagation()},e.prototype._haveFiles=function(t){return!!t&&(t.indexOf?-1!==t.indexOf("Files"):!!t.contains&&t.contains("Files"))},e.prototype._addOverClass=function(t){t.addOverClass()},e.prototype._removeOverClass=function(t){t.removeOverClass()},e}(t)}h.$inject=["FileDirective"]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n,o=i(1);(n=o)&&n.__esModule;var s=angular.extend;function r(t){return function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=s(i,{events:{$destroy:"destroy"},prop:"over",overClass:"nv-file-over"});return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.addOverClass=function(){this.element.addClass(this.getOverClass())},e.prototype.removeOverClass=function(){this.element.removeClass(this.getOverClass())},e.prototype.getOverClass=function(){return this.overClass},e}(t)}r.$inject=["FileDirective"]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n,o=i(1);(n=o)&&n.__esModule;function s(t,e,i){return{link:function(n,o,s){var r=n.$eval(s.uploader);if(!(r instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');var a=new i({uploader:r,element:o,scope:n});a.getOptions=t(s.options).bind(a,n),a.getFilters=function(){return s.filters}}}}s.$inject=["$parse","FileUploader","FileSelect"]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n,o=i(1);(n=o)&&n.__esModule;function s(t,e,i){return{link:function(n,o,s){var r=n.$eval(s.uploader);if(!(r instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');if(r.isHTML5){var a=new i({uploader:r,element:o});a.getOptions=t(s.options).bind(a,n),a.getFilters=function(){return s.filters}}}}}s.$inject=["$parse","FileUploader","FileDrop"]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n,o=i(1);(n=o)&&n.__esModule;function s(t,e){return{link:function(i,n,o){var s=i.$eval(o.uploader);if(!(s instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');var r=new e({uploader:s,element:n});r.getOverClass=function(){return o.overClass||r.overClass}}}}s.$inject=["FileUploader","FileOver"]}])}),function(t){t.console||(t.console=function(){for(var t,e="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,table,time,timeEnd,timeStamp,trace,warn".split(","),i=function(){},n={};t=e.pop();)n[t]=i;return n}())}(window),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),function(t){"use strict";t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});return setTimeout(function(){i||t(n).trigger(t.support.transition.end)},e),this},t(function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.close=function(e){var n=t(this),o=n.attr("data-target");o||(o=(o=n.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,""));var s=t("#"===o?[]:o);function r(){s.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),s.length||(s=n.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",r).emulateTransitionEnd(i.TRANSITION_DURATION):r())};var n=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var n=t(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof e&&o[e].call(n)})},t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",e,i.prototype.close)}(jQuery),function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.isLoading=!1};function i(i){return this.each(function(){var n=t(this),o=n.data("bs.button"),s="object"==typeof i&&i;o||n.data("bs.button",o=new e(this,s)),"toggle"==i?o.toggle():i&&o.setState(i)})}e.VERSION="3.3.7",e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",s=n.data();e+="Text",null==s.resetText&&n.data("resetText",n[o]()),setTimeout(t.proxy(function(){n[o](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=i,t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var n=t(e.target).closest(".btn");i.call(n,"toggle"),t(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};function i(i){return this.each(function(){var n=t(this),o=n.data("bs.carousel"),s=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i),r="string"==typeof i?i:s.slide;o||n.data("bs.carousel",o=new e(this,s)),"number"==typeof i?o.to(i):r?o[r]():s.interval&&o.pause().cycle()})}e.VERSION="3.3.7",e.TRANSITION_DURATION=600,e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},e.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},e.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var n=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(n)},e.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){if(!this.sliding)return this.slide("next")},e.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},e.prototype.slide=function(i,n){var o=this.$element.find(".item.active"),s=n||this.getItemForDirection(i,o),r=this.interval,a="next"==i?"left":"right",h=this;if(s.hasClass("active"))return this.sliding=!1;var l=s[0],c=t.Event("slide.bs.carousel",{relatedTarget:l,direction:a});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(s)]);d&&d.addClass("active")}var u=t.Event("slid.bs.carousel",{relatedTarget:l,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(i),s[0].offsetWidth,o.addClass(a),s.addClass(a),o.one("bsTransitionEnd",function(){s.removeClass([i,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),h.sliding=!1,setTimeout(function(){h.$element.trigger(u)},0)}).emulateTransitionEnd(e.TRANSITION_DURATION)):(o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(u)),r&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=i,t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var o=function(e){var n,o=t(this),s=t(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var r=t.extend({},s.data(),o.data()),a=o.attr("data-slide-to");a&&(r.interval=!1),i.call(s,r),a&&s.data("bs.carousel").to(a),e.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+i.id+'"],[data-toggle="collapse"][data-target="#'+i.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function i(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function n(i){return this.each(function(){var n=t(this),o=n.data("bs.collapse"),s=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i);!o&&s.toggle&&/show|hide/.test(i)&&(s.toggle=!1),o||n.data("bs.collapse",o=new e(this,s)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.7",e.TRANSITION_DURATION=350,e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(i=o.data("bs.collapse"))&&i.transitioning)){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),i||o.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var h=t.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[r](this.$element[0][h])}}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var i=t.Event("hide.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return o.call(this);this.$element[n](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(e.TRANSITION_DURATION)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},e.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(e,n){var o=t(n);this.addAriaAndCollapsedClass(i(o),o)},this)).end()},e.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var o=t(this);o.attr("data-target")||e.preventDefault();var s=i(o),r=s.data("bs.collapse")?"toggle":o.data();n.call(s,r)})}(jQuery),function(t){"use strict";var e=".dropdown-backdrop",i='[data-toggle="dropdown"]',n=function(e){t(e).on("click.bs.dropdown",this.toggle)};function o(e){var i=e.attr("data-target");i||(i=(i=e.attr("href"))&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function s(n){n&&3===n.which||(t(e).remove(),t(i).each(function(){var e=t(this),i=o(e),s={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(i[0],n.target)||(i.trigger(n=t.Event("hide.bs.dropdown",s)),n.isDefaultPrevented()||(e.attr("aria-expanded","false"),i.removeClass("open").trigger(t.Event("hidden.bs.dropdown",s)))))}))}n.VERSION="3.3.7",n.prototype.toggle=function(e){var i=t(this);if(!i.is(".disabled, :disabled")){var n=o(i),r=n.hasClass("open");if(s(),!r){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",s);var a={relatedTarget:this};if(n.trigger(e=t.Event("show.bs.dropdown",a)),e.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger(t.Event("shown.bs.dropdown",a))}return!1}},n.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var s=o(n),r=s.hasClass("open");if(!r&&27!=e.which||r&&27==e.which)return 27==e.which&&s.find(i).trigger("focus"),n.trigger("click");var a=s.find(".dropdown-menu li:not(.disabled):visible a");if(a.length){var h=a.index(e.target);38==e.which&&h>0&&h--,40==e.which&&h<a.length-1&&h++,~h||(h=0),a.eq(h).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new n(this)),"string"==typeof e&&o[e].call(i)})},t.fn.dropdown.Constructor=n,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",s).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",i,n.prototype.toggle).on("keydown.bs.dropdown.data-api",i,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery),function(t){"use strict";var e=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function i(i,n){return this.each(function(){var o=t(this),s=o.data("bs.modal"),r=t.extend({},e.DEFAULTS,o.data(),"object"==typeof i&&i);s||o.data("bs.modal",s=new e(this,r)),"string"==typeof i?s[i](n):r.show&&s.show(n)})}e.VERSION="3.3.7",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(i){var n=this,o=t.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:i});o?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(e.TRANSITION_DURATION):n.$element.trigger("focus").trigger(s)}))},e.prototype.hide=function(i){i&&i.preventDefault(),i=t.Event("hide.bs.modal"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(i){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;s?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):i()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){n.removeBackdrop(),i&&i()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):r()}else i&&i()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=i,t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),o=n.attr("href"),s=t(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),r=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),n.data());n.is("a")&&e.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),i.call(s,r,this)})}(jQuery),function(t){"use strict";var e=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),s=o.length;s--;){var r=o[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",h="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(h+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState)i.hoverState="in";else{if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)}},e.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)}},e.prototype.show=function(){var i=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(i);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!n)return;var o=this,s=this.tip(),r=this.getUID(this.type);this.setContent(),s.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&s.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,l=h.test(a);l&&(a=a.replace(h,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),d=s[0].offsetWidth,u=s[0].offsetHeight;if(l){var p=a,f=this.getPosition(this.$viewport);a="bottom"==a&&c.bottom+u>f.bottom?"top":"top"==a&&c.top-u<f.top?"bottom":"right"==a&&c.right+d>f.width?"left":"left"==a&&c.left-d<f.left?"right":a,s.removeClass(p).addClass(a)}var m=this.getCalculatedOffset(a,c,d,u);this.applyPlacement(m,a);var g=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",g).emulateTransitionEnd(e.TRANSITION_DURATION):g()}},e.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,s=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.top+=r,e.left+=a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var h=n[0].offsetWidth,l=n[0].offsetHeight;"top"==i&&l!=s&&(e.top=e.top+s-l);var c=this.getViewportAdjustedDelta(i,e,h,l);c.left?e.left+=c.left:e.top+=c.top;var d=/top|bottom/.test(i),u=d?2*c.left-o+h:2*c.top-s+l,p=d?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(u,n[0][p],d)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(i){var n=this,o=t(this.$tip),s=t.Event("hide.bs."+this.type);function r(){"in"!=n.hoverState&&o.detach(),n.$element&&n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),i&&i()}if(this.$element.trigger(s),!s.isDefaultPrevented())return o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(e.TRANSITION_DURATION):r(),this.hoverState=null,this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(e){var i=(e=e||this.$element)[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var s=window.SVGElement&&i instanceof window.SVGElement,r=n?{top:0,left:0}:s?null:e.offset(),a={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},h=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,a,h,r)},e.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},e.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-s-r.scroll,h=e.top+s-r.scroll+n;a<r.top?o.top=r.top-a:h>r.top+r.height&&(o.top=r.top+r.height-h)}else{var l=e.left-s,c=e.left+s+i;l<r.left?o.left=r.left-l:c>r.right&&(o.left=r.left+r.width-c)}return o},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},e.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var n=t(this),o=n.data("bs.tooltip"),s="object"==typeof i&&i;!o&&/destroy|hide/.test(i)||(o||n.data("bs.tooltip",o=new e(this,s)),"string"==typeof i&&o[i]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.3.7",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var n=t(this),o=n.data("bs.popover"),s="object"==typeof i&&i;!o&&/destroy|hide/.test(i)||(o||n.data("bs.popover",o=new e(this,s)),"string"==typeof i&&o[i]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(i).is(document.body)?t(window):t(i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),o=n.data("bs.scrollspy"),s="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new e(this,s)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.7",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),s=/^#./.test(o)&&t(o);return s&&s.length&&s.is(":visible")&&[[s[i]().top+n,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,s=this.targets,r=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return r!=(t=s[s.length-1])&&this.activate(t);if(r&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)r!=s[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),function(t){"use strict";var e=function(e){this.element=t(e)};function i(i){return this.each(function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new e(this)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),r=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(s),e.trigger(r),!r.isDefaultPrevented()&&!s.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},e.prototype.activate=function(i,n,o){var s=n.find("> .active"),r=o&&t.support.transition&&(s.length&&s.hasClass("fade")||!!n.find("> .fade").length);function a(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(i[0].offsetWidth,i.addClass("in")):i.removeClass("fade"),i.parent(".dropdown-menu").length&&i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}s.length&&r?s.one("bsTransitionEnd",a).emulateTransitionEnd(e.TRANSITION_DURATION):a(),s.removeClass("in")};var n=t.fn.tab;t.fn.tab=i,t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var o=function(e){e.preventDefault(),i.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),function(t){"use strict";var e=function(i,n){this.options=t.extend({},e.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(i),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function i(i){return this.each(function(){var n=t(this),o=n.data("bs.affix"),s="object"==typeof i&&i;o||n.data("bs.affix",o=new e(this,s)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.7",e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0,target:window},e.prototype.getState=function(t,e,i,n){var o=this.$target.scrollTop(),s=this.$element.offset(),r=this.$target.height();if(null!=i&&"top"==this.affixed)return o<i&&"top";if("bottom"==this.affixed)return null!=i?!(o+this.unpin<=s.top)&&"bottom":!(o+r<=t-n)&&"bottom";var a=null==this.affixed,h=a?o:s.top;return null!=i&&o<=i?"top":null!=n&&h+(a?r:e)>=t-n&&"bottom"},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var i=this.$element.height(),n=this.options.offset,o=n.top,s=n.bottom,r=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(s=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof s&&(s=n.bottom(this.$element));var a=this.getState(r,i,o,s);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var h="affix"+(a?"-"+a:""),l=t.Event(h+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(h).trigger(h.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:r-i-s})}};var n=t.fn.affix;t.fn.affix=i,t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),i.call(e,n)})})}(jQuery);"use strict";!function(t,e){"function"==typeof define&&define.amd?define(["angular","ckeditor"],function(t){return e(t)}):e(t)}(angular||null,function(t){var e,i=t.module("ngCkeditor",[]),n=!1;return i.run(["$q","$timeout",function(i,o){function s(){"loaded"===CKEDITOR.status?(n=!0,e.resolve()):s()}if(e=i.defer(),t.isUndefined(CKEDITOR))throw new Error("CKEDITOR not found");CKEDITOR.disableAutoInline=!0,CKEDITOR.on("loaded",s),o(s,100)}]),i.directive("ckeditor",["$timeout","$q",function(i,o){return{restrict:"AC",require:["ngModel","^?form"],scope:!1,link:function(s,r,a,h){var l=h[0],c=h[1]||null,d="textarea"===r[0].tagName.toLowerCase(),u=[],p=!1;d||r.attr("contenteditable",!0);var f=function(){var e={toolbar:"full",toolbar_full:[{name:"basicstyles",items:["Bold","Italic","Strike","Underline"]},{name:"paragraph",items:["BulletedList","NumberedList","Blockquote"]},{name:"editing",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"tools",items:["SpellChecker","Maximize"]},"/",{name:"styles",items:["Format","FontSize","TextColor","PasteText","PasteFromWord","RemoveFormat"]},{name:"insert",items:["Image","Table","SpecialChar"]},{name:"forms",items:["Outdent","Indent"]},{name:"clipboard",items:["Undo","Redo"]},{name:"document",items:["PageBreak","Source"]}],disableNativeSpellChecker:!1,uiColor:"#FAFAFA",height:"400px",width:"100%"};e=t.extend(e,s[a.ckeditor]);var n=d?CKEDITOR.replace(r[0],e):CKEDITOR.inline(r[0],e),h=o.defer();r.bind("$destroy",function(){n&&CKEDITOR.instances[n.name]&&CKEDITOR.instances[n.name].destroy()});var f=function(t){var e=n.getData();""===e&&(e=null),i(function(){(!0!==t||e!==l.$viewValue)&&l.$setViewValue(e),!0===t&&c&&c.$setPristine()},0)},m=function(t){if(u.length){var e=u.pop()||"<p></p>";p=!1,n.setData(e,function(){f(t),p=!0})}};n.on("change",f),n.on("blur",f),n.on("instanceReady",function(){s.$broadcast("ckeditor.ready"),s.$apply(function(){m(!0)}),n.document.on("keyup",f)}),n.on("customConfigLoaded",function(){h.resolve()}),l.$render=function(){u.push(l.$viewValue),p&&m()}};"loaded"===CKEDITOR.status&&(n=!0),n?f():e.promise.then(f)}}}]),i}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Chart=e()}(this,function(){function t(){}const e=function(){let t=0;return function(){return t++}}();function i(t){return null==t}function n(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function o(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const s=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function r(t,e){return s(t)?t:e}function a(t,e){return void 0===t?e:t}const h=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:t/e,l=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function c(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function d(t,e,i,s){let r,a,h;if(n(t))if(a=t.length,s)for(r=a-1;r>=0;r--)e.call(i,t[r],r);else for(r=0;r<a;r++)e.call(i,t[r],r);else if(o(t))for(a=(h=Object.keys(t)).length,r=0;r<a;r++)e.call(i,t[h[r]],h[r])}function u(t,e){let i,n,o,s;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(o=t[i],s=e[i],o.datasetIndex!==s.datasetIndex||o.index!==s.index)return!1;return!0}function p(t){if(n(t))return t.map(p);if(o(t)){const e=Object.create(null),i=Object.keys(t),n=i.length;let o=0;for(;o<n;++o)e[i[o]]=p(t[i[o]]);return e}return t}function f(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function m(t,e,i,n){if(!f(t))return;const s=e[t],r=i[t];o(s)&&o(r)?g(s,r,n):e[t]=p(r)}function g(t,e,i){const s=n(e)?e:[e],r=s.length;if(!o(t))return t;const a=(i=i||{}).merger||m;for(let n=0;n<r;++n){if(!o(e=s[n]))continue;const r=Object.keys(e);for(let n=0,o=r.length;n<o;++n)a(r[n],t,e,i)}return t}function _(t,e){return g(t,e,{merger:v})}function v(t,e,i){if(!f(t))return;const n=e[t],s=i[t];o(n)&&o(s)?_(n,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=p(s))}const y={"":t=>t,x:t=>t.x,y:t=>t.y};function b(t,e){return(y[e]||(y[e]=function(t){const e=x(t);return t=>{for(const i of e){if(""===i)break;t=t&&t[i]}return t}}(e)))(t)}function x(t){const e=t.split("."),i=[];let n="";for(const t of e)(n+=t).endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function w(t){return t.charAt(0).toUpperCase()+t.slice(1)}const k=t=>void 0!==t,L=t=>"function"==typeof t,T=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function S(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const C=Math.PI,M=2*C,E=M+C,P=Number.POSITIVE_INFINITY,D=C/180,O=C/2,A=C/4,I=2*C/3,z=Math.log10,R=Math.sign;function N(t){const e=Math.round(t);t=j(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(z(t))),n=t/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function B(t){const e=[],i=Math.sqrt(t);let n;for(n=1;n<i;n++)t%n==0&&(e.push(n),e.push(t/n));return i===(0|i)&&e.push(i),e.sort((t,e)=>t-e).pop(),e}function F(t){return!isNaN(parseFloat(t))&&isFinite(t)}function j(t,e,i){return Math.abs(t-e)<i}function H(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function U(t,e,i){let n,o,s;for(n=0,o=t.length;n<o;n++)s=t[n][i],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function $(t){return t*(C/180)}function W(t){return t*(180/C)}function Z(t){if(!s(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function V(t,e){const i=e.x-t.x,n=e.y-t.y,o=Math.sqrt(i*i+n*n);let s=Math.atan2(n,i);return s<-.5*C&&(s+=M),{angle:s,distance:o}}function G(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Y(t,e){return(t-e+E)%M-C}function q(t){return(t%M+M)%M}function X(t,e,i,n){const o=q(t),s=q(e),r=q(i),a=q(s-o),h=q(r-o),l=q(o-s),c=q(o-r);return o===s||o===r||n&&s===r||a>h&&l<c}function K(t,e,i){return Math.max(e,Math.min(i,t))}function J(t){return K(t,-32768,32767)}function Q(t,e,i,n=1e-6){return t>=Math.min(e,i)-n&&t<=Math.max(e,i)+n}function tt(t,e,i){i=i||(i=>t[i]<e);let n,o=t.length-1,s=0;for(;o-s>1;)i(n=s+o>>1)?s=n:o=n;return{lo:s,hi:o}}const et=(t,e,i,n)=>tt(t,i,n?n=>t[n][e]<=i:n=>t[n][e]<i),it=(t,e,i)=>tt(t,i,n=>t[n][e]>=i);function nt(t,e,i){let n=0,o=t.length;for(;n<o&&t[n]<e;)n++;for(;o>n&&t[o-1]>i;)o--;return n>0||o<t.length?t.slice(n,o):t}const ot=["push","pop","shift","splice","unshift"];function st(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ot.forEach(e=>{const i="_onData"+w(e),n=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const o=n.apply(this,e);return t._chartjs.listeners.forEach(t=>{"function"==typeof t[i]&&t[i](...e)}),o}})}))}function rt(t,e){const i=t._chartjs;if(!i)return;const n=i.listeners,o=n.indexOf(e);-1!==o&&n.splice(o,1),n.length>0||(ot.forEach(e=>{delete t[e]}),delete t._chartjs)}function at(t){const e=new Set;let i,n;for(i=0,n=t.length;i<n;++i)e.add(t[i]);return e.size===n?t:Array.from(e)}const ht="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function lt(t,e,i){const n=i||(t=>Array.prototype.slice.call(t));let o=!1,s=[];return function(...i){s=n(i),o||(o=!0,ht.call(window,()=>{o=!1,t.apply(e,s)}))}}function ct(t,e){let i;return function(...n){return e?(clearTimeout(i),i=setTimeout(t,e,n)):t.apply(this,n),e}}const dt=t=>"start"===t?"left":"end"===t?"right":"center",ut=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2,pt=(t,e,i,n)=>t===(n?"left":"right")?i:"center"===t?(e+i)/2:e;function ft(t,e,i){const n=e.length;let o=0,s=n;if(t._sorted){const{iScale:r,_parsed:a}=t,h=r.axis,{min:l,max:c,minDefined:d,maxDefined:u}=r.getUserBounds();d&&(o=K(Math.min(et(a,r.axis,l).lo,i?n:et(e,h,r.getPixelForValue(l)).lo),0,n-1)),s=u?K(Math.max(et(a,r.axis,c,!0).hi+1,i?0:et(e,h,r.getPixelForValue(c),!0).hi+1),o,n)-o:n-o}return{start:o,count:s}}function mt(t){const{xScale:e,yScale:i,_scaleRanges:n}=t,o={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!n)return t._scaleRanges=o,!0;const s=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,o),s}var gt=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,n){const o=e.listeners[n],s=e.duration;o.forEach(n=>n({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(i-e.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=ht.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const o=i.items;let s,r=o.length-1,a=!1;for(;r>=0;--r)(s=o[r])._active?(s._total>i.duration&&(i.duration=s._total),s.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(n.draw(),this._notify(n,i,t,"progress")),o.length||(i.running=!1,this._notify(n,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};function _t(t){return t+.5|0}const vt=(t,e,i)=>Math.max(Math.min(t,i),e);function yt(t){return vt(_t(2.55*t),0,255)}function bt(t){return vt(_t(255*t),0,255)}function xt(t){return vt(_t(t/2.55)/100,0,1)}function wt(t){return vt(_t(100*t),0,100)}const kt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Lt=[..."0123456789ABCDEF"],Tt=t=>Lt[15&t],St=t=>Lt[(240&t)>>4]+Lt[15&t],Ct=t=>(240&t)>>4==(15&t);const Mt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Et(t,e,i){const n=e*Math.min(i,1-i),o=(e,o=(e+t/30)%12)=>i-n*Math.max(Math.min(o-3,9-o,1),-1);return[o(0),o(8),o(4)]}function Pt(t,e,i){const n=(n,o=(n+t/60)%6)=>i-i*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function Dt(t,e,i){const n=Et(t,1,.5);let o;for(e+i>1&&(e*=o=1/(e+i),i*=o),o=0;o<3;o++)n[o]*=1-e-i,n[o]+=e;return n}function Ot(t){const e=t.r/255,i=t.g/255,n=t.b/255,o=Math.max(e,i,n),s=Math.min(e,i,n),r=(o+s)/2;let a,h,l;return o!==s&&(l=o-s,h=r>.5?l/(2-o-s):l/(o+s),a=60*(a=function(t,e,i,n,o){return t===o?(e-i)/l+(e<i?6:0):e===o?(i-t)/l+2:(t-e)/l+4}(e,i,n,0,o))+.5),[0|a,h||0,r]}function At(t,e,i,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,n)).map(bt)}function It(t,e,i){return At(Et,t,e,i)}function zt(t){return(t%360+360)%360}const Rt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Nt={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Bt;const Ft=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,jt=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,Ht=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Ut(t,e,i){if(t){let n=Ot(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*i,0===e?360:1)),n=It(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function $t(t,e){return t?Object.assign(e||{},t):t}function Wt(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=bt(t[3]))):(e=$t(t,{r:0,g:0,b:0,a:1})).a=bt(e.a),e}function Zt(t){return"r"===t.charAt(0)?function(t){const e=Ft.exec(t);let i,n,o,s=255;if(e){if(e[7]!==i){const t=+e[7];s=e[8]?yt(t):vt(255*t,0,255)}return i=+e[1],n=+e[3],o=+e[5],{r:i=255&(e[2]?yt(i):vt(i,0,255)),g:n=255&(e[4]?yt(n):vt(n,0,255)),b:o=255&(e[6]?yt(o):vt(o,0,255)),a:s}}}(t):function(t){const e=Mt.exec(t);let i,n=255;if(!e)return;e[5]!==i&&(n=e[6]?yt(+e[5]):bt(+e[5]));const o=zt(+e[2]),s=+e[3]/100,r=+e[4]/100;return{r:(i="hwb"===e[1]?At(Dt,o,s,r):"hsv"===e[1]?At(Pt,o,s,r):It(o,s,r))[0],g:i[1],b:i[2],a:n}}(t)}class Vt{constructor(t){if(t instanceof Vt)return t;const e=typeof t;let i;var n,o,s;"object"===e?i=Wt(t):"string"===e&&(s=(n=t).length,"#"===n[0]&&(4===s||5===s?o={r:255&17*kt[n[1]],g:255&17*kt[n[2]],b:255&17*kt[n[3]],a:5===s?17*kt[n[4]]:255}:7!==s&&9!==s||(o={r:kt[n[1]]<<4|kt[n[2]],g:kt[n[3]]<<4|kt[n[4]],b:kt[n[5]]<<4|kt[n[6]],a:9===s?kt[n[7]]<<4|kt[n[8]]:255})),i=o||function(t){Bt||((Bt=function(){const t={},e=Object.keys(Nt),i=Object.keys(Rt);let n,o,s,r,a;for(n=0;n<e.length;n++){for(r=a=e[n],o=0;o<i.length;o++)s=i[o],a=a.replace(s,Rt[s]);s=parseInt(Nt[r],16),t[a]=[s>>16&255,s>>8&255,255&s]}return t}()).transparent=[0,0,0,0]);const e=Bt[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(t)||Zt(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=$t(this._rgb);return t&&(t.a=xt(t.a)),t}set rgb(t){this._rgb=Wt(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${xt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?(t=this._rgb,e=(t=>Ct(t.r)&&Ct(t.g)&&Ct(t.b)&&Ct(t.a))(t)?Tt:St,t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0):void 0;var t,e}hslString(){return this._valid?function(t){if(!t)return;const e=Ot(t),i=e[0],n=wt(e[1]),o=wt(e[2]);return t.a<255?`hsla(${i}, ${n}%, ${o}%, ${xt(t.a)})`:`hsl(${i}, ${n}%, ${o}%)`}(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,n=t.rgb;let o;const s=e===o?.5:e,r=2*s-1,a=i.a-n.a,h=((r*a==-1?r:(r+a)/(1+r*a))+1)/2;o=1-h,i.r=255&h*i.r+o*n.r+.5,i.g=255&h*i.g+o*n.g+.5,i.b=255&h*i.b+o*n.b+.5,i.a=s*i.a+(1-s)*n.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,i){const n=Ht(xt(t.r)),o=Ht(xt(t.g)),s=Ht(xt(t.b));return{r:bt(jt(n+i*(Ht(xt(e.r))-n))),g:bt(jt(o+i*(Ht(xt(e.g))-o))),b:bt(jt(s+i*(Ht(xt(e.b))-s))),a:t.a+i*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new Vt(this.rgb)}alpha(t){return this._rgb.a=bt(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=_t(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ut(this._rgb,2,t),this}darken(t){return Ut(this._rgb,2,-t),this}saturate(t){return Ut(this._rgb,1,t),this}desaturate(t){return Ut(this._rgb,1,-t),this}rotate(t){return function(t,e){var i=Ot(t);i[0]=zt(i[0]+e),i=It(i),t.r=i[0],t.g=i[1],t.b=i[2]}(this._rgb,t),this}}function Gt(t){return new Vt(t)}function Yt(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function qt(t){return Yt(t)?t:Gt(t)}function Xt(t){return Yt(t)?t:Gt(t).saturate(.5).darken(.1).hexString()}const Kt=Object.create(null),Jt=Object.create(null);function Qt(t,e){if(!e)return t;const i=e.split(".");for(let e=0,n=i.length;e<n;++e){const n=i[e];t=t[n]||(t[n]=Object.create(null))}return t}function te(t,e,i){return"string"==typeof e?g(Qt(t,e),i):g(Qt(t,""),e)}var ee=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=(t=>t.chart.platform.getDevicePixelRatio()),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=((t,e)=>Xt(e.backgroundColor)),this.hoverBorderColor=((t,e)=>Xt(e.borderColor)),this.hoverColor=((t,e)=>Xt(e.color)),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return te(this,t,e)}get(t){return Qt(this,t)}describe(t,e){return te(Jt,t,e)}override(t,e){return te(Kt,t,e)}route(t,e,i,n){const s=Qt(this,t),r=Qt(this,i),h="_"+e;Object.defineProperties(s,{[h]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[h],e=r[n];return o(t)?Object.assign({},e,t):a(t,e)},set(t){this[h]=t}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function ie(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ne(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function oe(t,e,i){let n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}const se=t=>window.getComputedStyle(t,null);function re(t,e){return se(t).getPropertyValue(e)}const ae=["top","right","bottom","left"];function he(t,e,i){const n={};i=i?"-"+i:"";for(let o=0;o<4;o++){const s=ae[o];n[s]=parseFloat(t[e+"-"+s+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function le(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:n}=e,o=se(i),s="border-box"===o.boxSizing,r=he(o,"padding"),a=he(o,"border","width"),{x:h,y:l,box:c}=function(t,e){const i=t.touches,n=i&&i.length?i[0]:t,{offsetX:o,offsetY:s}=n;let r,a,h=!1;if(((t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot))(o,s,t.target))r=o,a=s;else{const t=e.getBoundingClientRect();r=n.clientX-t.left,a=n.clientY-t.top,h=!0}return{x:r,y:a,box:h}}(t,i),d=r.left+(c&&a.left),u=r.top+(c&&a.top);let{width:p,height:f}=e;return s&&(p-=r.width+a.width,f-=r.height+a.height),{x:Math.round((h-d)/p*i.width/n),y:Math.round((l-u)/f*i.height/n)}}const ce=t=>Math.round(10*t)/10;function de(t,e,i,n){const o=se(t),s=he(o,"margin"),r=oe(o.maxWidth,t,"clientWidth")||P,a=oe(o.maxHeight,t,"clientHeight")||P,h=function(t,e,i){let n,o;if(void 0===e||void 0===i){const s=ne(t);if(s){const t=s.getBoundingClientRect(),r=se(s),a=he(r,"border","width"),h=he(r,"padding");e=t.width-h.width-a.width,i=t.height-h.height-a.height,n=oe(r.maxWidth,s,"clientWidth"),o=oe(r.maxHeight,s,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:n||P,maxHeight:o||P}}(t,e,i);let{width:l,height:c}=h;if("content-box"===o.boxSizing){const t=he(o,"border","width"),e=he(o,"padding");l-=e.width+t.width,c-=e.height+t.height}return l=Math.max(0,l-s.width),c=Math.max(0,n?Math.floor(l/n):c-s.height),l=ce(Math.min(l,r,h.maxWidth)),c=ce(Math.min(c,a,h.maxHeight)),l&&!c&&(c=ce(l/2)),{width:l,height:c}}function ue(t,e,i){const n=e||1,o=Math.floor(t.height*n),s=Math.floor(t.width*n);t.height=o/n,t.width=s/n;const r=t.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${t.height}px`,r.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==n||r.height!==o||r.width!==s)&&(t.currentDevicePixelRatio=n,r.height=o,r.width=s,t.ctx.setTransform(n,0,0,n,0,0),!0)}const pe=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function fe(t,e){const i=re(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function me(t){return!t||i(t.size)||i(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ge(t,e,i,n,o){let s=e[o];return s||(s=e[o]=t.measureText(o).width,i.push(o)),s>n&&(n=s),n}function _e(t,e,i,o){let s=(o=o||{}).data=o.data||{},r=o.garbageCollect=o.garbageCollect||[];o.font!==e&&(s=o.data={},r=o.garbageCollect=[],o.font=e),t.save(),t.font=e;let a=0;const h=i.length;let l,c,d,u,p;for(l=0;l<h;l++)if(null!=(u=i[l])&&!0!==n(u))a=ge(t,s,r,a,u);else if(n(u))for(c=0,d=u.length;c<d;c++)null==(p=u[c])||n(p)||(a=ge(t,s,r,a,p));t.restore();const f=r.length/2;if(f>i.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return a}function ve(t,e,i){const n=t.currentDevicePixelRatio,o=0!==i?Math.max(i/2,.5):0;return Math.round((e-o)*n)/n+o}function ye(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function be(t,e,i,n){xe(t,e,i,n,null)}function xe(t,e,i,n,o){let s,r,a,h,l,c;const d=e.pointStyle,u=e.rotation,p=e.radius;let f=(u||0)*D;if(d&&"object"==typeof d&&("[object HTMLImageElement]"===(s=d.toString())||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(i,n),t.rotate(f),t.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),void t.restore();if(!(isNaN(p)||p<=0)){switch(t.beginPath(),d){default:o?t.ellipse(i,n,o/2,p,0,0,M):t.arc(i,n,p,0,M),t.closePath();break;case"triangle":t.moveTo(i+Math.sin(f)*p,n-Math.cos(f)*p),f+=I,t.lineTo(i+Math.sin(f)*p,n-Math.cos(f)*p),f+=I,t.lineTo(i+Math.sin(f)*p,n-Math.cos(f)*p),t.closePath();break;case"rectRounded":h=p-(l=.516*p),r=Math.cos(f+A)*h,a=Math.sin(f+A)*h,t.arc(i-r,n-a,l,f-C,f-O),t.arc(i+a,n-r,l,f-O,f),t.arc(i+r,n+a,l,f,f+O),t.arc(i-a,n+r,l,f+O,f+C),t.closePath();break;case"rect":if(!u){h=Math.SQRT1_2*p,c=o?o/2:h,t.rect(i-c,n-h,2*c,2*h);break}f+=A;case"rectRot":r=Math.cos(f)*p,a=Math.sin(f)*p,t.moveTo(i-r,n-a),t.lineTo(i+a,n-r),t.lineTo(i+r,n+a),t.lineTo(i-a,n+r),t.closePath();break;case"crossRot":f+=A;case"cross":r=Math.cos(f)*p,a=Math.sin(f)*p,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a),t.moveTo(i+a,n-r),t.lineTo(i-a,n+r);break;case"star":r=Math.cos(f)*p,a=Math.sin(f)*p,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a),t.moveTo(i+a,n-r),t.lineTo(i-a,n+r),f+=A,r=Math.cos(f)*p,a=Math.sin(f)*p,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a),t.moveTo(i+a,n-r),t.lineTo(i-a,n+r);break;case"line":r=o?o/2:Math.cos(f)*p,a=Math.sin(f)*p,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a);break;case"dash":t.moveTo(i,n),t.lineTo(i+Math.cos(f)*p,n+Math.sin(f)*p)}t.fill(),e.borderWidth>0&&t.stroke()}}function we(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function ke(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Le(t){t.restore()}function Te(t,e,i,n,o){if(!e)return t.lineTo(i.x,i.y);if("middle"===o){const n=(e.x+i.x)/2;t.lineTo(n,e.y),t.lineTo(n,i.y)}else"after"===o!=!!n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function Se(t,e,i,n){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function Ce(t,e,o,s,r,a={}){const h=n(e)?e:[e],l=a.strokeWidth>0&&""!==a.strokeColor;let c,d;for(t.save(),t.font=r.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),i(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,a),c=0;c<h.length;++c)d=h[c],l&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),i(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(d,o,s,a.maxWidth)),t.fillText(d,o,s,a.maxWidth),Me(t,o,s,d,a),s+=r.lineHeight;t.restore()}function Me(t,e,i,n,o){if(o.strikethrough||o.underline){const s=t.measureText(n),r=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,h=i-s.actualBoundingBoxAscent,l=i+s.actualBoundingBoxDescent,c=o.strikethrough?(h+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(r,c),t.lineTo(a,c),t.stroke()}}function Ee(t,e){const{x:i,y:n,w:o,h:s,radius:r}=e;t.arc(i+r.topLeft,n+r.topLeft,r.topLeft,-O,C,!0),t.lineTo(i,n+s-r.bottomLeft),t.arc(i+r.bottomLeft,n+s-r.bottomLeft,r.bottomLeft,C,O,!0),t.lineTo(i+o-r.bottomRight,n+s),t.arc(i+o-r.bottomRight,n+s-r.bottomRight,r.bottomRight,O,0,!0),t.lineTo(i+o,n+r.topRight),t.arc(i+o-r.topRight,n+r.topRight,r.topRight,0,-O,!0),t.lineTo(i+r.topLeft,n)}function Pe(t,e=[""],i=t,n,o=(()=>t[0])){return k(n)||(n=He("_fallback",t)),new Proxy({[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:o,override:o=>Pe([o,...t],e,i,n)},{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,n)=>ze(i,n,()=>(function(t,e,i,n){let o;for(const s of e)if(o=He(Ae(s,t),i),k(o))return Ie(t,o)?Fe(i,n,t,o):o})(n,e,t,i)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>Ue(t).includes(e),ownKeys:t=>Ue(t),set(t,e,i){const n=t._storage||(t._storage=o());return t[e]=n[e]=i,delete t._keys,!0}})}function De(t,e,i,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:Oe(t,s),setContext:e=>De(t,e,i,s),override:n=>De(t.override(n),e,i,s)};return new Proxy(r,{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>ze(t,e,()=>(function(t,e,i){const{_proxy:s,_context:r,_subProxy:a,_descriptors:h}=t;let l=s[e];return L(l)&&h.isScriptable(e)&&(l=function(t,e,i,n){const{_proxy:o,_context:s,_subProxy:r,_stack:a}=i;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);return a.add(t),e=e(s,r||n),a.delete(t),Ie(t,e)&&(e=Fe(o._scopes,o,t,e)),e}(e,l,t,i)),n(l)&&l.length&&(l=function(t,e,i,n){const{_proxy:s,_context:r,_subProxy:a,_descriptors:h}=i;if(k(r.index)&&n(t))e=e[r.index%e.length];else if(o(e[0])){const i=e,n=s._scopes.filter(t=>t!==i);e=[];for(const o of i){const i=Fe(n,s,t,o);e.push(De(i,r,a&&a[t],h))}}return e}(e,l,t,h.isIndexable)),Ie(e,l)&&(l=De(l,r,a&&a[e],h)),l})(t,e,i)),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,n)=>(t[i]=n,delete e[i],!0)})}function Oe(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:n=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:i,indexable:n,isScriptable:L(i)?i:()=>i,isIndexable:L(n)?n:()=>n}}const Ae=(t,e)=>t?t+w(e):e,Ie=(t,e)=>o(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function ze(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const n=i();return t[e]=n,n}function Re(t,e,i){return L(t)?t(e,i):t}const Ne=(t,e)=>!0===t?e:"string"==typeof t?b(e,t):void 0;function Be(t,e,i,n,o){for(const s of e){const e=Ne(i,s);if(e){t.add(e);const s=Re(e._fallback,i,o);if(k(s)&&s!==i&&s!==n)return s}else if(!1===e&&k(n)&&i!==n)return null}return!1}function Fe(t,e,i,s){const r=e._rootScopes,a=Re(e._fallback,i,s),h=[...t,...r],l=new Set;l.add(s);let c=je(l,h,i,a||i,s);return null!==c&&(!k(a)||a===i||null!==(c=je(l,h,a,c,s)))&&Pe(Array.from(l),[""],r,a,()=>(function(t,e,i){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return n(r)&&o(i)?i:r})(e,i,s))}function je(t,e,i,n,o){for(;i;)i=Be(t,e,i,n,o);return i}function He(t,e){for(const i of e){if(!i)continue;const e=i[t];if(k(e))return e}}function Ue(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const i of t)for(const t of Object.keys(i).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function $e(t,e,i,n){const{iScale:o}=t,{key:s="r"}=this._parsing,r=new Array(n);let a,h,l,c;for(a=0,h=n;a<h;++a)c=e[l=a+i],r[a]={r:o.parse(b(c,s),l)};return r}const We=Number.EPSILON||1e-14,Ze=(t,e)=>e<t.length&&!t[e].skip&&t[e],Ve=t=>"x"===t?"y":"x";function Ge(t,e,i,n){const o=t.skip?e:t,s=e,r=i.skip?e:i,a=G(s,o),h=G(r,s);let l=a/(a+h),c=h/(a+h);const d=n*(l=isNaN(l)?0:l),u=n*(c=isNaN(c)?0:c);return{previous:{x:s.x-d*(r.x-o.x),y:s.y-d*(r.y-o.y)},next:{x:s.x+u*(r.x-o.x),y:s.y+u*(r.y-o.y)}}}function Ye(t,e="x"){const i=Ve(e),n=t.length,o=Array(n).fill(0),s=Array(n);let r,a,h,l=Ze(t,0);for(r=0;r<n;++r)if(a=h,h=l,l=Ze(t,r+1),h){if(l){const t=l[e]-h[e];o[r]=0!==t?(l[i]-h[i])/t:0}s[r]=a?l?R(o[r-1])!==R(o[r])?0:(o[r-1]+o[r])/2:o[r-1]:o[r]}!function(t,e,i){const n=t.length;let o,s,r,a,h,l=Ze(t,0);for(let c=0;c<n-1;++c)h=l,l=Ze(t,c+1),h&&l&&(j(e[c],0,We)?i[c]=i[c+1]=0:(o=i[c]/e[c],s=i[c+1]/e[c],(a=Math.pow(o,2)+Math.pow(s,2))<=9||(r=3/Math.sqrt(a),i[c]=o*r*e[c],i[c+1]=s*r*e[c])))}(t,o,s),function(t,e,i="x"){const n=Ve(i),o=t.length;let s,r,a,h=Ze(t,0);for(let l=0;l<o;++l){if(r=a,a=h,h=Ze(t,l+1),!a)continue;const o=a[i],c=a[n];r&&(s=(o-r[i])/3,a[`cp1${i}`]=o-s,a[`cp1${n}`]=c-s*e[l]),h&&(s=(h[i]-o)/3,a[`cp2${i}`]=o+s,a[`cp2${n}`]=c+s*e[l])}}(t,s,e)}function qe(t,e,i){return Math.max(Math.min(t,i),e)}function Xe(t,e,i,n,o){let s,r,a,h;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)Ye(t,o);else{let i=n?t[t.length-1]:t[0];for(s=0,r=t.length;s<r;++s)h=Ge(i,a=t[s],t[Math.min(s+1,r-(n?0:1))%r],e.tension),a.cp1x=h.previous.x,a.cp1y=h.previous.y,a.cp2x=h.next.x,a.cp2y=h.next.y,i=a}e.capBezierPoints&&function(t,e){let i,n,o,s,r,a=we(t[0],e);for(i=0,n=t.length;i<n;++i)r=s,s=a,a=i<n-1&&we(t[i+1],e),s&&(o=t[i],r&&(o.cp1x=qe(o.cp1x,e.left,e.right),o.cp1y=qe(o.cp1y,e.top,e.bottom)),a&&(o.cp2x=qe(o.cp2x,e.left,e.right),o.cp2y=qe(o.cp2y,e.top,e.bottom)))}(t,i)}const Ke=t=>0===t||1===t,Je=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*M/i),Qe=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*M/i)+1,ti={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*O),easeOutSine:t=>Math.sin(t*O),easeInOutSine:t=>-.5*(Math.cos(C*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Ke(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ke(t)?t:Je(t,.075,.3),easeOutElastic:t=>Ke(t)?t:Qe(t,.075,.3),easeInOutElastic:t=>Ke(t)?t:t<.5?.5*Je(2*t,.1125,.45):.5+.5*Qe(2*t-1,.1125,.45),easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-ti.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*ti.easeInBounce(2*t):.5*ti.easeOutBounce(2*t-1)+.5};function ei(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function ii(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:"middle"===n?i<.5?t.y:e.y:"after"===n?i<1?t.y:e.y:i>0?e.y:t.y}}function ni(t,e,i,n){const o={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},r=ei(t,o,i),a=ei(o,s,i),h=ei(s,e,i);return ei(ei(r,a,i),ei(a,h,i),i)}const oi=new Map;function si(t,e,i){return function(t,e){e=e||{};const i=t+JSON.stringify(e);let n=oi.get(i);return n||(n=new Intl.NumberFormat(t,e),oi.set(i,n)),n}(e,i).format(t)}const ri=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),ai=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function hi(t,e){const i=(""+t).match(ri);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}function li(t,e){const i={},n=o(e),s=n?Object.keys(e):e,r=o(t)?n?i=>a(t[i],t[e[i]]):e=>t[e]:()=>t;for(const t of s)i[t]=+r(t)||0;return i}function ci(t){return li(t,{top:"y",right:"x",bottom:"y",left:"x"})}function di(t){return li(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ui(t){const e=ci(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function pi(t,e){t=t||{},e=e||ee.font;let i=a(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let n=a(t.style,e.style);n&&!(""+n).match(ai)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const o={family:a(t.family,e.family),lineHeight:hi(a(t.lineHeight,e.lineHeight),i),size:i,style:n,weight:a(t.weight,e.weight),string:""};return o.string=me(o),o}function fi(t,e,i,o){let s,r,a,h=!0;for(s=0,r=t.length;s<r;++s)if(void 0!==(a=t[s])&&(void 0!==e&&"function"==typeof a&&(a=a(e),h=!1),void 0!==i&&n(a)&&(a=a[i%a.length],h=!1),void 0!==a))return o&&!h&&(o.cacheable=!1),a}function mi(t,e,i){const{min:n,max:o}=t,s=l(e,(o-n)/2),r=(t,e)=>i&&0===t?0:t+e;return{min:r(n,-Math.abs(s)),max:r(o,s)}}function gi(t,e){return Object.assign(Object.create(t),e)}function _i(t,e,i){return t?function(t,e){return{x:i=>t+t+e-i,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,i):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function vi(t,e){let i,n;"ltr"!==e&&"rtl"!==e||(n=[(i=t.canvas.style).getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)}function yi(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function bi(t){return"angle"===t?{between:X,compare:Y,normalize:q}:{between:Q,compare:(t,e)=>t-e,normalize:t=>t}}function xi({start:t,end:e,count:i,loop:n,style:o}){return{start:t%i,end:e%i,loop:n&&(e-t+1)%i==0,style:o}}function wi(t,e,i){if(!i)return[t];const{property:n,start:o,end:s}=i,r=e.length,{compare:a,between:h,normalize:l}=bi(n),{start:c,end:d,loop:u,style:p}=function(t,e,i){const{property:n,start:o,end:s}=i,{between:r,normalize:a}=bi(n),h=e.length;let l,c,{start:d,end:u,loop:p}=t;if(p){for(d+=h,u+=h,l=0,c=h;l<c&&r(a(e[d%h][n]),o,s);++l)d--,u--;d%=h,u%=h}return u<d&&(u+=h),{start:d,end:u,loop:p,style:t.style}}(t,e,i),f=[];let m,g,_,v=!1,y=null;const b=()=>v||h(o,_,m)&&0!==a(o,_),x=()=>!v||0===a(s,m)||h(s,_,m);for(let t=c,i=c;t<=d;++t)(g=e[t%r]).skip||(m=l(g[n]))!==_&&(v=h(m,o,s),null===y&&b()&&(y=0===a(m,o)?t:i),null!==y&&x()&&(f.push(xi({start:y,end:t,loop:u,count:r,style:p})),y=null),i=t,_=m);return null!==y&&f.push(xi({start:y,end:d,loop:u,count:r,style:p})),f}function ki(t,e){const i=[],n=t.segments;for(let o=0;o<n.length;o++){const s=wi(n[o],t.points,e);s.length&&i.push(...s)}return i}function Li(t,e){const i=t.points,n=t.options.spanGaps,o=i.length;if(!o)return[];const s=!!t._loop,{start:r,end:a}=function(t,e,i,n){let o=0,s=e-1;if(i&&!n)for(;o<e&&!t[o].skip;)o++;for(;o<e&&t[o].skip;)o++;for(o%=e,i&&(s+=o);s>o&&t[s%e].skip;)s--;return{start:o,end:s%=e}}(i,o,s,n);return Ti(t,!0===n?[{start:r,end:a,loop:s}]:function(t,e,i,n){const o=t.length,s=[];let r,a=e,h=t[e];for(r=e+1;r<=i;++r){const i=t[r%o];i.skip||i.stop?h.skip||(n=!1,s.push({start:e%o,end:(r-1)%o,loop:n}),e=a=i.stop?r:null):(a=r,h.skip&&(e=r)),h=i}return null!==a&&s.push({start:e%o,end:a%o,loop:n}),s}(i,r,a<r?a+o:a,!!t._fullLoop&&0===r&&a===o-1),i,e)}function Ti(t,e,i,n){return n&&n.setContext&&i?function(t,e,i,n){const o=t._chart.getContext(),s=Si(t.options),{_datasetIndex:r,options:{spanGaps:a}}=t,h=i.length,l=[];let c=s,d=e[0].start,u=d;function p(t,e,n,o){const s=a?-1:1;if(t!==e){for(t+=h;i[t%h].skip;)t-=s;for(;i[e%h].skip;)e+=s;t%h!=e%h&&(l.push({start:t%h,end:e%h,loop:n,style:o}),c=o,d=e%h)}}for(const t of e){d=a?d:t.start;let e,s=i[d%h];for(u=d+1;u<=t.end;u++){const a=i[u%h];Ci(e=Si(n.setContext(gi(o,{type:"segment",p0:s,p1:a,p0DataIndex:(u-1)%h,p1DataIndex:u%h,datasetIndex:r}))),c)&&p(d,u-1,t.loop,c),s=a,c=e}d<u-1&&p(d,u-1,t.loop,c)}return l}(t,e,i,n):e}function Si(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Ci(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var Mi=Object.freeze({__proto__:null,easingEffects:ti,isPatternOrGradient:Yt,color:qt,getHoverColor:Xt,noop:t,uid:e,isNullOrUndef:i,isArray:n,isObject:o,isFinite:s,finiteOrDefault:r,valueOrDefault:a,toPercentage:h,toDimension:l,callback:c,each:d,_elementsEqual:u,clone:p,_merger:m,merge:g,mergeIf:_,_mergerIf:v,_deprecated:function(t,e,i,n){void 0!==e&&console.warn(t+': "'+i+'" is deprecated. Please use "'+n+'" instead')},resolveObjectKey:b,_splitKey:x,_capitalize:w,defined:k,isFunction:L,setsEqual:T,_isClickEvent:S,toFontString:me,_measureText:ge,_longestText:_e,_alignPixel:ve,clearCanvas:ye,drawPoint:be,drawPointLegend:xe,_isPointInArea:we,clipArea:ke,unclipArea:Le,_steppedLineTo:Te,_bezierCurveTo:Se,renderText:Ce,addRoundedRectPath:Ee,_lookup:tt,_lookupByKey:et,_rlookupByKey:it,_filterBetween:nt,listenArrayEvents:st,unlistenArrayEvents:rt,_arrayUnique:at,_createResolver:Pe,_attachContext:De,_descriptors:Oe,_parseObjectDataRadialScale:$e,splineCurve:Ge,splineCurveMonotone:Ye,_updateBezierControlPoints:Xe,_isDomSupported:ie,_getParentNode:ne,getStyle:re,getRelativePosition:le,getMaximumSize:de,retinaScale:ue,supportsEventListenerOptions:pe,readUsedSize:fe,fontString:function(t,e,i){return e+" "+t+"px "+i},requestAnimFrame:ht,throttled:lt,debounce:ct,_toLeftRightCenter:dt,_alignStartEnd:ut,_textX:pt,_getStartAndCountOfVisiblePoints:ft,_scaleRangesChanged:mt,_pointInLine:ei,_steppedInterpolation:ii,_bezierInterpolation:ni,formatNumber:si,toLineHeight:hi,_readValueToProps:li,toTRBL:ci,toTRBLCorners:di,toPadding:ui,toFont:pi,resolve:fi,_addGrace:mi,createContext:gi,PI:C,TAU:M,PITAU:E,INFINITY:P,RAD_PER_DEG:D,HALF_PI:O,QUARTER_PI:A,TWO_THIRDS_PI:I,log10:z,sign:R,niceNum:N,_factorize:B,isNumber:F,almostEquals:j,almostWhole:H,_setMinAndMaxByKey:U,toRadians:$,toDegrees:W,_decimalPlaces:Z,getAngleFromPoint:V,distanceBetweenPoints:G,_angleDiff:Y,_normalizeAngle:q,_angleBetween:X,_limitValue:K,_int16Range:J,_isBetween:Q,getRtlAdapter:_i,overrideTextDirection:vi,restoreTextDirection:yi,_boundSegment:wi,_boundSegments:ki,_computeSegments:Li});function Ei(t,e,i,n){const{controller:o,data:s,_sorted:r}=t,a=o._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&r&&s.length){const t=a._reversePixels?it:et;if(!n)return t(s,e,i);if(o._sharedOptions){const n=s[0],o="function"==typeof n.getRange&&n.getRange(e);if(o){const n=t(s,e,i-o),r=t(s,e,i+o);return{lo:n.lo,hi:r.hi}}}}return{lo:0,hi:s.length-1}}function Pi(t,e,i,n,o){const s=t.getSortedVisibleDatasetMetas(),r=i[e];for(let t=0,i=s.length;t<i;++t){const{index:i,data:a}=s[t],{lo:h,hi:l}=Ei(s[t],e,r,o);for(let t=h;t<=l;++t){const e=a[t];e.skip||n(e,i,t)}}}function Di(t,e,i,n,o){const s=[];return o||t.isPointInArea(e)?(Pi(t,i,e,function(i,r,a){(o||we(i,t.chartArea,0))&&i.inRange(e.x,e.y,n)&&s.push({element:i,datasetIndex:r,index:a})},!0),s):s}function Oi(t,e,i,n,o,s){return s||t.isPointInArea(e)?"r"!==i||n?function(t,e,i,n,o,s){let r=[];const a=function(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,n){const o=e?Math.abs(t.x-n.x):0,s=i?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}(i);let h=Number.POSITIVE_INFINITY;return Pi(t,i,e,function(i,l,c){const d=i.inRange(e.x,e.y,o);if(n&&!d)return;const u=i.getCenterPoint(o);if(!s&&!t.isPointInArea(u)&&!d)return;const p=a(e,u);p<h?(r=[{element:i,datasetIndex:l,index:c}],h=p):p===h&&r.push({element:i,datasetIndex:l,index:c})}),r}(t,e,i,n,o,s):function(t,e,i,n){let o=[];return Pi(t,i,e,function(t,i,s){const{startAngle:r,endAngle:a}=t.getProps(["startAngle","endAngle"],n),{angle:h}=V(t,{x:e.x,y:e.y});X(h,r,a)&&o.push({element:t,datasetIndex:i,index:s})}),o}(t,e,i,o):[]}function Ai(t,e,i,n,o){const s=[],r="x"===i?"inXRange":"inYRange";let a=!1;return Pi(t,i,e,(t,n,h)=>{t[r](e[i],o)&&(s.push({element:t,datasetIndex:n,index:h}),a=a||t.inRange(e.x,e.y,o))}),n&&!a?[]:s}var Ii={evaluateInteractionItems:Pi,modes:{index(t,e,i,n){const o=le(e,t),s=i.axis||"x",r=i.includeInvisible||!1,a=i.intersect?Di(t,o,s,n,r):Oi(t,o,s,!1,n,r),h=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=a[0].index,i=t.data[e];i&&!i.skip&&h.push({element:i,datasetIndex:t.index,index:e})}),h):[]},dataset(t,e,i,n){const o=le(e,t),s=i.axis||"xy",r=i.includeInvisible||!1;let a=i.intersect?Di(t,o,s,n,r):Oi(t,o,s,!1,n,r);if(a.length>0){const e=a[0].datasetIndex,i=t.getDatasetMeta(e).data;a=[];for(let t=0;t<i.length;++t)a.push({element:i[t],datasetIndex:e,index:t})}return a},point:(t,e,i,n)=>Di(t,le(e,t),i.axis||"xy",n,i.includeInvisible||!1),nearest(t,e,i,n){const o=le(e,t),s=i.axis||"xy",r=i.includeInvisible||!1;return Oi(t,o,s,i.intersect,n,r)},x:(t,e,i,n)=>Ai(t,le(e,t),"x",i.intersect,n),y:(t,e,i,n)=>Ai(t,le(e,t),"y",i.intersect,n)}};const zi=["left","top","right","bottom"];function Ri(t,e){return t.filter(t=>t.pos===e)}function Ni(t,e){return t.filter(t=>-1===zi.indexOf(t.pos)&&t.box.axis===e)}function Bi(t,e){return t.sort((t,i)=>{const n=e?i:t,o=e?t:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function Fi(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function ji(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Hi(t,e,i,n){const{pos:s,box:r}=i,a=t.maxPadding;if(!o(s)){i.size&&(t[s]-=i.size);const e=n[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?r.height:r.width),i.size=e.size/e.count,t[s]+=i.size}r.getPadding&&ji(a,r.getPadding());const h=Math.max(0,e.outerWidth-Fi(a,t,"left","right")),l=Math.max(0,e.outerHeight-Fi(a,t,"top","bottom")),c=h!==t.w,d=l!==t.h;return t.w=h,t.h=l,i.horizontal?{same:c,other:d}:{same:d,other:c}}function Ui(t,e){const i=e.maxPadding;return function(t){const n={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{n[t]=Math.max(e[t],i[t])}),n}(t?["left","right"]:["top","bottom"])}function $i(t,e,i,n){const o=[];let s,r,a,h,l,c;for(s=0,r=t.length,l=0;s<r;++s){(h=(a=t[s]).box).update(a.width||e.w,a.height||e.h,Ui(a.horizontal,e));const{same:r,other:d}=Hi(e,i,a,n);l|=r&&o.length,c=c||d,h.fullSize||o.push(a)}return l&&$i(o,e,i,n)||c}function Wi(t,e,i,n,o){t.top=i,t.left=e,t.right=e+n,t.bottom=i+o,t.width=n,t.height=o}function Zi(t,e,i,n){const o=i.padding;let{x:s,y:r}=e;for(const a of t){const t=a.box,h=n[a.stack]||{count:1,placed:0,weight:1},l=a.stackWeight/h.weight||1;if(a.horizontal){const n=e.w*l,s=h.size||t.height;k(h.start)&&(r=h.start),t.fullSize?Wi(t,o.left,r,i.outerWidth-o.right-o.left,s):Wi(t,e.left+h.placed,r,n,s),h.start=r,h.placed+=n,r=t.bottom}else{const n=e.h*l,r=h.size||t.width;k(h.start)&&(s=h.start),t.fullSize?Wi(t,s,o.top,r,i.outerHeight-o.bottom-o.top):Wi(t,s,e.top+h.placed,r,n),h.start=s,h.placed+=n,s=t.right}}e.x=s,e.y=r}ee.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Vi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,n){if(!t)return;const o=ui(t.options.layout.padding),s=Math.max(e-o.width,0),r=Math.max(i-o.height,0),a=function(t){const e=function(t){const e=[];let i,n,o,s,r,a;for(i=0,n=(t||[]).length;i<n;++i)o=t[i],({position:s,options:{stack:r,stackWeight:a=1}}=o),e.push({index:i,box:o,pos:s,horizontal:o.isHorizontal(),weight:o.weight,stack:r&&s+r,stackWeight:a});return e}(t),i=Bi(e.filter(t=>t.box.fullSize),!0),n=Bi(Ri(e,"left"),!0),o=Bi(Ri(e,"right")),s=Bi(Ri(e,"top"),!0),r=Bi(Ri(e,"bottom")),a=Ni(e,"x"),h=Ni(e,"y");return{fullSize:i,leftAndTop:n.concat(s),rightAndBottom:o.concat(h).concat(r).concat(a),chartArea:Ri(e,"chartArea"),vertical:n.concat(o).concat(h),horizontal:s.concat(r).concat(a)}}(t.boxes),h=a.vertical,l=a.horizontal;d(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});const c=h.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:i,padding:o,availableWidth:s,availableHeight:r,vBoxMaxWidth:s/2/c,hBoxMaxHeight:r/2}),p=Object.assign({},o);ji(p,ui(n));const f=Object.assign({maxPadding:p,w:s,h:r,x:o.left,y:o.top},o),m=function(t,e){const i=function(t){const e={};for(const i of t){const{stack:t,pos:n,stackWeight:o}=i;if(!t||!zi.includes(n))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return e}(t),{vBoxMaxWidth:n,hBoxMaxHeight:o}=e;let s,r,a;for(s=0,r=t.length;s<r;++s){a=t[s];const{fullSize:r}=a.box,h=i[a.stack],l=h&&a.stackWeight/h.weight;a.horizontal?(a.width=l?l*n:r&&e.availableWidth,a.height=o):(a.width=n,a.height=l?l*o:r&&e.availableHeight)}return i}(h.concat(l),u);$i(a.fullSize,f,u,m),$i(h,f,u,m),$i(l,f,u,m)&&$i(h,f,u,m),function(t){const e=t.maxPadding;function i(i){const n=Math.max(e[i]-t[i],0);return t[i]+=n,n}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(f),Zi(a.leftAndTop,f,u,m),f.x+=f.w,f.y+=f.h,Zi(a.rightAndBottom,f,u,m),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},d(a.chartArea,e=>{const i=e.box;Object.assign(i,t.chartArea),i.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Gi{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,n){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):i)}}isAttached(t){return!0}updateConfig(t){}}class Yi extends Gi{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const qi={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Xi=t=>null===t||""===t,Ki=!!pe&&{passive:!0};function Ji(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function Qi(t,e,i){const n=t.canvas,o=new MutationObserver(t=>{let e=!1;for(const i of t)e=(e=e||Ji(i.addedNodes,n))&&!Ji(i.removedNodes,n);e&&i()});return o.observe(document,{childList:!0,subtree:!0}),o}function tn(t,e,i){const n=t.canvas,o=new MutationObserver(t=>{let e=!1;for(const i of t)e=(e=e||Ji(i.removedNodes,n))&&!Ji(i.addedNodes,n);e&&i()});return o.observe(document,{childList:!0,subtree:!0}),o}const en=new Map;let nn=0;function on(){const t=window.devicePixelRatio;t!==nn&&(nn=t,en.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function sn(t,e,i){const n=t.canvas,o=n&&ne(n);if(!o)return;const s=lt((t,e)=>{const n=o.clientWidth;i(t,e),n<o.clientWidth&&i()},window),r=new ResizeObserver(t=>{const e=t[0],i=e.contentRect.width,n=e.contentRect.height;0===i&&0===n||s(i,n)});return r.observe(o),function(t,e){en.size||window.addEventListener("resize",on),en.set(t,e)}(t,s),r}function rn(t,e,i){i&&i.disconnect(),"resize"===e&&function(t){en.delete(t),en.size||window.removeEventListener("resize",on)}(t)}function an(t,e,i){const n=t.canvas,o=lt(e=>{null!==t.ctx&&i(function(t,e){const i=qi[t.type]||t.type,{x:n,y:o}=le(t,e);return{type:i,chart:e,native:t,x:void 0!==n?n:null,y:void 0!==o?o:null}}(e,t))},t,t=>{const e=t[0];return[e,e.offsetX,e.offsetY]});return function(t,e,i){n.addEventListener(e,i,Ki)}(0,e,o),o}class hn extends Gi{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function(t,e){const i=t.style,n=t.getAttribute("height"),o=t.getAttribute("width");if(t.$chartjs={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Xi(o)){const e=fe(t,"width");void 0!==e&&(t.width=e)}if(Xi(n))if(""===t.style.height)t.height=t.width/(e||2);else{const e=fe(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e.$chartjs)return!1;const n=e.$chartjs.initial;["height","width"].forEach(t=>{const o=n[t];i(o)?e.removeAttribute(t):e.setAttribute(t,o)});const o=n.style||{};return Object.keys(o).forEach(t=>{e.style[t]=o[t]}),e.width=e.width,delete e.$chartjs,!0}addEventListener(t,e,i){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),o={attach:Qi,detach:tn,resize:sn}[e]||an;n[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),n=i[e];n&&(({attach:rn,detach:rn,resize:rn}[e]||function(t,e,i){t.canvas.removeEventListener(e,i,Ki)})(t,e,n),i[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,n){return de(t,e,i,n)}isAttached(t){const e=ne(t);return!(!e||!e.isConnected)}}function ln(t){return!ie()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Yi:hn}var cn=Object.freeze({__proto__:null,_detectPlatform:ln,BasePlatform:Gi,BasicPlatform:Yi,DomPlatform:hn});const dn="transparent",un={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){const n=qt(t||dn),o=n.valid&&qt(e||dn);return o&&o.valid?o.mix(n,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class pn{constructor(t,e,i,n){const o=e[i];n=fi([t.to,n,o,t.from]);const s=fi([t.from,o,n]);this._active=!0,this._fn=t.fn||un[t.type||typeof s],this._easing=ti[t.easing]||ti.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=s,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const n=this._target[this._prop],o=i-this._start,s=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=fi([t.to,e,n,t.from]),this._from=fi([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,n=this._prop,o=this._from,s=this._loop,r=this._to;let a;if(this._active=o!==r&&(s||e<i),!this._active)return this._target[n]=r,void this._notify(!0);e<0?this._target[n]=o:(a=e/i%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[n]=this._fn(o,r,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}ee.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const fn=Object.keys(ee.animation);ee.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),ee.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),ee.describe("animations",{_fallback:"animation"}),ee.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class mn{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!o(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const s=t[i];if(!o(s))return;const r={};for(const t of fn)r[t]=s[t];(n(s.properties)&&s.properties||[i]).forEach(t=>{t!==i&&e.has(t)||e.set(t,r)})})}_animateOptions(t,e){const i=e.options,n=function(t,e){if(!e)return;let i=t.options;if(i)return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i;t.options=e}(t,i);if(!n)return[];const o=this._createAnimations(n,i);return i.$shared&&function(t,e){const i=[],n=Object.keys(e);for(let e=0;e<n.length;e++){const o=t[n[e]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,n=[],o=t.$animations||(t.$animations={}),s=Object.keys(e),r=Date.now();let a;for(a=s.length-1;a>=0;--a){const h=s[a];if("$"===h.charAt(0))continue;if("options"===h){n.push(...this._animateOptions(t,e));continue}const l=e[h];let c=o[h];const d=i.get(h);if(c){if(d&&c.active()){c.update(d,l,r);continue}c.cancel()}d&&d.duration?(o[h]=c=new pn(d,t,h,l),n.push(c)):t[h]=l}return n}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(gt.add(this._chart,i),!0):void 0}}function gn(t,e){const i=t&&t.options||{},n=i.reverse,o=void 0===i.min?e:0,s=void 0===i.max?e:0;return{start:n?s:o,end:n?o:s}}function _n(t,e){const i=[],n=t._getSortedDatasetMetas(e);let o,s;for(o=0,s=n.length;o<s;++o)i.push(n[o].index);return i}function vn(t,e,i,n={}){const o=t.keys,r="single"===n.mode;let a,h,l,c;if(null!==e){for(a=0,h=o.length;a<h;++a){if((l=+o[a])===i){if(n.all)continue;break}c=t.values[l],s(c)&&(r||0===e||R(e)===R(c))&&(e+=c)}return e}}function yn(t,e){const i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function bn(t,e,i){const n=t[e]||(t[e]={});return n[i]||(n[i]={})}function xn(t,e,i,n){for(const o of e.getMatchingVisibleMetas(n).reverse()){const e=t[o.index];if(i&&e>0||!i&&e<0)return o.index}return null}function wn(t,e){const{chart:i,_cachedMeta:n}=t,o=i._stacks||(i._stacks={}),{iScale:s,vScale:r,index:a}=n,h=s.axis,l=r.axis,c=function(t,e,i){return`${s.id}.${e.id}.${i.stack||i.type}`}(0,r,n),d=e.length;let u;for(let t=0;t<d;++t){const i=e[t],{[h]:s,[l]:d}=i;(u=(i._stacks||(i._stacks={}))[l]=bn(o,c,s))[a]=d,u._top=xn(u,r,!0,n.type),u._bottom=xn(u,r,!1,n.type)}}function kn(t,e){const i=t.scales;return Object.keys(i).filter(t=>i[t].axis===e).shift()}function Ln(t,e){const i=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[n]||void 0===e[n][i])return;delete e[n][i]}}}const Tn=t=>"reset"===t||"none"===t,Sn=(t,e)=>e?t:Object.assign({},t);class Cn{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=yn(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Ln(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),n=(t,e,i,n)=>"x"===t?e:"r"===t?n:i,o=e.xAxisID=a(i.xAxisID,kn(t,"x")),s=e.yAxisID=a(i.yAxisID,kn(t,"y")),r=e.rAxisID=a(i.rAxisID,kn(t,"r")),h=e.indexAxis,l=e.iAxisID=n(h,o,s,r),c=e.vAxisID=n(h,s,o,r);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(r),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&rt(this._data,this),t._stacked&&Ln(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(o(e))this._data=function(t){const e=Object.keys(t),i=new Array(e.length);let n,o,s;for(n=0,o=e.length;n<o;++n)s=e[n],i[n]={x:s,y:t[s]};return i}(e);else if(i!==e){if(i){rt(i,this);const t=this._cachedMeta;Ln(t),t._parsed=[]}e&&Object.isExtensible(e)&&st(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const o=e._stacked;e._stacked=yn(e.vScale,e),e.stack!==i.stack&&(n=!0,Ln(e),e.stack=i.stack),this._resyncElements(t),(n||o!==e._stacked)&&wn(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:a}=i,h=r.axis;let l,c,d,u=0===t&&e===s.length||i._sorted,p=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=s,i._sorted=!0,d=s;else{d=n(s[t])?this.parseArrayData(i,s,t,e):o(s[t])?this.parseObjectData(i,s,t,e):this.parsePrimitiveData(i,s,t,e);const r=()=>null===c[h]||p&&c[h]<p[h];for(l=0;l<e;++l)i._parsed[l+t]=c=d[l],u&&(r()&&(u=!1),p=c);i._sorted=u}a&&wn(this,d)}parsePrimitiveData(t,e,i,n){const{iScale:o,vScale:s}=t,r=o.axis,a=s.axis,h=o.getLabels(),l=o===s,c=new Array(n);let d,u,p;for(d=0,u=n;d<u;++d)p=d+i,c[d]={[r]:l||o.parse(h[p],p),[a]:s.parse(e[p],p)};return c}parseArrayData(t,e,i,n){const{xScale:o,yScale:s}=t,r=new Array(n);let a,h,l,c;for(a=0,h=n;a<h;++a)c=e[l=a+i],r[a]={x:o.parse(c[0],l),y:s.parse(c[1],l)};return r}parseObjectData(t,e,i,n){const{xScale:o,yScale:s}=t,{xAxisKey:r="x",yAxisKey:a="y"}=this._parsing,h=new Array(n);let l,c,d,u;for(l=0,c=n;l<c;++l)u=e[d=l+i],h[l]={x:o.parse(b(u,r),d),y:s.parse(b(u,a),d)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const n=this.chart,o=this._cachedMeta,s=e[t.axis];return vn({keys:_n(n,!0),values:e._stacks[t.axis]},s,o.index,{mode:i})}updateRangeFromParsed(t,e,i,n){const o=i[e.axis];let s=null===o?NaN:o;const r=n&&i._stacks[e.axis];n&&r&&(n.values=r,s=vn(n,o,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const i=this._cachedMeta,n=i._parsed,o=i._sorted&&t===i.iScale,r=n.length,a=this._getOtherScale(t),h=((t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:_n(i,!0),values:null})(e,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(t){const{min:e,max:i,minDefined:n,maxDefined:o}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:o?i:Number.POSITIVE_INFINITY}}(a);let u,p;function f(){const e=(p=n[u])[a.axis];return!s(p[t.axis])||c>e||d<e}for(u=0;u<r&&(f()||(this.updateRangeFromParsed(l,t,p,h),!o));++u);if(o)for(u=r-1;u>=0;--u)if(!f()){this.updateRangeFromParsed(l,t,p,h);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let n,o,r;for(n=0,o=e.length;n<o;++n)r=e[n][t.axis],s(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,n=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,i,n,s;return o(t)?(e=t.top,i=t.right,n=t.bottom,s=t.left):e=i=n=s=t,{top:e,right:i,bottom:n,left:s,disabled:!1===t}}(a(this.options.clip,function(t,e,i){if(!1===i)return!1;const n=gn(t,i),o=gn(e,i);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,n=i.data||[],o=e.chartArea,s=[],r=this._drawStart||0,a=this._drawCount||n.length-r,h=this.options.drawActiveElementsOnTop;let l;for(i.dataset&&i.dataset.draw(t,o,r,a),l=r;l<r+a;++l){const e=n[l];e.hidden||(e.active&&h?s.push(e):e.draw(t,o))}for(l=0;l<s.length;++l)s[l].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const n=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];(o=e.$context||(e.$context=function(t,e,i){return gi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}(this.getContext(),t,e))).parsed=this.getParsed(t),o.raw=n.data[t],o.index=o.dataIndex=t}else(o=this.$context||(this.$context=function(t,e){return gi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index))).dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const n="active"===e,o=this._cachedDataOpts,s=t+"-"+e,r=o[s],a=this.enableOptionSharing&&k(i);if(r)return Sn(r,a);const h=this.chart.config,l=h.datasetElementScopeKeys(this._type,t),c=n?[`${t}Hover`,"hover",t,""]:[t,""],d=h.getOptionScopes(this.getDataset(),l),u=Object.keys(ee.elements[t]),p=h.resolveNamedOptions(d,u,()=>this.getContext(i,n),c);return p.$shared&&(p.$shared=a,o[s]=Object.freeze(Sn(p,a))),p}_resolveAnimations(t,e,i){const n=this.chart,o=this._cachedDataOpts,s=`animation-${e}`,r=o[s];if(r)return r;let a;if(!1!==n.options.animation){const n=this.chart.config,o=n.datasetAnimationScopeKeys(this._type,e),s=n.getOptionScopes(this.getDataset(),o);a=n.createResolver(s,this.getContext(t,i,e))}const h=new mn(n,a&&a.animations);return a&&a._cacheable&&(o[s]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Tn(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),n=this._sharedOptions,o=this.getSharedOptions(i),s=this.includeOptions(e,o)||o!==n;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:s}}updateElement(t,e,i,n){Tn(n)?Object.assign(t,i):this._resolveAnimations(e,n).update(t,i)}updateSharedOptions(t,e,i){t&&!Tn(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,n){t.active=n;const o=this.getStyle(e,n);this._resolveAnimations(e,i,n).update(t,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[t,e,i]of this._syncList)this[t](e,i);this._syncList=[];const n=i.length,o=e.length,s=Math.min(o,n);s&&this.parse(0,s),o>n?this._insertElements(n,o-n,t):o<n&&this._removeElements(o,n-o)}_insertElements(t,e,i=!0){const n=this._cachedMeta,o=n.data,s=t+e;let r;const a=t=>{for(t.length+=e,r=t.length-1;r>=s;r--)t[r]=t[r-e]};for(a(o),r=t;r<s;++r)o[r]=new this.dataElementType;this._parsing&&a(n._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,n){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(t,e);i._stacked&&Ln(i,n)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,n]=t;this[e](i,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Cn.defaults={},Cn.prototype.datasetElementType=null,Cn.prototype.dataElementType=null;class Mn{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return F(this.x)&&F(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const n={};return t.forEach(t=>{n[t]=i[t]&&i[t].active()?i[t]._to:this[t]}),n}}Mn.defaults={},Mn.defaultRoutes=void 0;const En={values:t=>n(t)?t:""+t,numeric(t,e,i){if(0===t)return"0";const n=this.chart.options.locale;let o,s=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(o="scientific"),s=function(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t)),i}(t,i)}const r=z(Math.abs(s)),a=Math.max(Math.min(-1*Math.floor(r),20),0),h={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(h,this.options.ticks.format),si(t,n,h)},logarithmic(t,e,i){if(0===t)return"0";const n=t/Math.pow(10,Math.floor(z(t)));return 1===n||2===n||5===n?En.numeric.call(this,t,e,i):""}};var Pn={formatters:En};function Dn(t,e){const n=t.options.ticks,o=n.maxTicksLimit||function(t){const e=t.options.offset,i=t._tickSize(),n=t._length/i+(e?0:1),o=t._maxLength/i;return Math.floor(Math.min(n,o))}(t),s=n.major.enabled?function(t){const e=[];let i,n;for(i=0,n=t.length;i<n;i++)t[i].major&&e.push(i);return e}(e):[],r=s.length,a=s[0],h=s[r-1],l=[];if(r>o)return function(t,e,i,n){let o,s=0,r=i[0];for(n=Math.ceil(n),o=0;o<t.length;o++)o===r&&(e.push(t[o]),r=i[++s*n])}(e,l,s,r/o),l;const c=function(t,e,i){const n=function(t){const e=t.length;let i,n;if(e<2)return!1;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return!1;return n}(t),o=e.length/i;if(!n)return Math.max(o,1);const s=B(n);for(let t=0,e=s.length-1;t<e;t++){const e=s[t];if(e>o)return e}return Math.max(o,1)}(s,e,o);if(r>0){let t,n;const o=r>1?Math.round((h-a)/(r-1)):null;for(On(e,l,c,i(o)?0:a-o,a),t=0,n=r-1;t<n;t++)On(e,l,c,s[t],s[t+1]);return On(e,l,c,h,i(o)?e.length:h+o),l}return On(e,l,c),l}function On(t,e,i,n,o){const s=a(n,0),r=Math.min(a(o,t.length),t.length);let h,l,c,d=0;for(i=Math.ceil(i),o&&(i=(h=o-n)/Math.floor(h/i)),c=s;c<0;)d++,c=Math.round(s+d*i);for(l=Math.max(s,0);l<r;l++)l===c&&(e.push(t[l]),d++,c=Math.round(s+d*i))}ee.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Pn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),ee.route("scale.ticks","color","","color"),ee.route("scale.grid","color","","borderColor"),ee.route("scale.grid","borderColor","","borderColor"),ee.route("scale.title","color","","color"),ee.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),ee.describe("scales",{_fallback:"scale"}),ee.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const An=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i;function In(t,e){const i=[],n=t.length/e,o=t.length;let s=0;for(;s<o;s+=n)i.push(t[Math.floor(s)]);return i}function zn(t,e,i){const n=t.ticks.length,o=Math.min(e,n-1),s=t._startPixel,r=t._endPixel;let a,h=t.getPixelForTick(o);if(!(i&&(a=1===n?Math.max(h-s,r-h):0===e?(t.getPixelForTick(1)-h)/2:(h-t.getPixelForTick(o-1))/2,h+=o<e?a:-a,h<s-1e-6||h>r+1e-6)))return h}function Rn(t){return t.drawTicks?t.tickLength:0}function Nn(t,e){if(!t.display)return 0;const i=pi(t.font,e),o=ui(t.padding);return(n(t.text)?t.text.length:1)*i.lineHeight+o.height}class Bn extends Mn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:n}=this;return t=r(t,Number.POSITIVE_INFINITY),e=r(e,Number.NEGATIVE_INFINITY),i=r(i,Number.POSITIVE_INFINITY),n=r(n,Number.NEGATIVE_INFINITY),{min:r(t,i),max:r(e,n),minDefined:s(t),maxDefined:s(e)}}getMinMax(t){let e,{min:i,max:n,minDefined:o,maxDefined:s}=this.getUserBounds();if(o&&s)return{min:i,max:n};const a=this.getMatchingVisibleMetas();for(let r=0,h=a.length;r<h;++r)e=a[r].controller.getMinMax(this,t),o||(i=Math.min(i,e.min)),s||(n=Math.max(n,e.max));return{min:r(i=s&&i>n?n:i,r(n=o&&i>n?i:n,i)),max:r(n,r(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){c(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:n,grace:o,ticks:s}=this.options,r=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=mi(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=r<this.ticks.length;this._convertTicksToLabels(a?In(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Dn(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){c(this.options.afterUpdate,[this])}beforeSetDimensions(){c(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){c(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),c(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){c(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,n,o;for(i=0,n=t.length;i<n;i++)(o=t[i]).label=c(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){c(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){c(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=this.ticks.length,n=e.minRotation||0,o=e.maxRotation;let s,r,a,h=n;if(!this._isVisible()||!e.display||n>=o||i<=1||!this.isHorizontal())return void(this.labelRotation=n);const l=this._getLabelSizes(),c=l.widest.width,d=l.highest.height,u=K(this.chart.width-c,0,this.maxWidth);c+6>(s=t.offset?this.maxWidth/i:u/(i-1))&&(s=u/(i-(t.offset?.5:1)),r=this.maxHeight-Rn(t.grid)-e.padding-Nn(t.title,this.chart.options.font),a=Math.sqrt(c*c+d*d),h=W(Math.min(Math.asin(K((l.highest.height+6)/s,-1,1)),Math.asin(K(r/a,-1,1))-Math.asin(K(d/a,-1,1)))),h=Math.max(n,Math.min(o,h))),this.labelRotation=h}afterCalculateLabelRotation(){c(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){c(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:n,grid:o}}=this,s=this._isVisible(),r=this.isHorizontal();if(s){const s=Nn(n,e.options.font);if(r?(t.width=this.maxWidth,t.height=Rn(o)+s):(t.height=this.maxHeight,t.width=Rn(o)+s),i.display&&this.ticks.length){const{first:e,last:n,widest:o,highest:s}=this._getLabelSizes(),a=2*i.padding,h=$(this.labelRotation),l=Math.cos(h),c=Math.sin(h);if(r){const e=i.mirror?0:c*o.width+l*s.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=i.mirror?0:l*o.width+c*s.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,n,c,l)}}this._handleMargins(),r?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,n){const{ticks:{align:o,padding:s},position:r}=this.options,a=0!==this.labelRotation,h="top"!==r&&"x"===this.axis;if(this.isHorizontal()){const r=this.getPixelForTick(0)-this.left,l=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,d=0;a?h?(c=n*t.width,d=i*e.height):(c=i*t.height,d=n*e.width):"start"===o?d=e.width:"end"===o?c=t.width:"inner"!==o&&(c=t.width/2,d=e.width/2),this.paddingLeft=Math.max((c-r+s)*this.width/(this.width-r),0),this.paddingRight=Math.max((d-l+s)*this.width/(this.width-l),0)}else{let i=e.height/2,n=t.height/2;"start"===o?(i=0,n=t.height):"end"===o&&(i=e.height,n=0),this.paddingTop=i+s,this.paddingBottom=n+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){c(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)i(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=In(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length)}return t}_computeLabelSizes(t,e){const{ctx:o,_longestTextCache:s}=this,r=[],a=[];let h,l,c,u,p,f,m,g,_,v,y,b=0,x=0;for(h=0;h<e;++h){if(u=t[h].label,p=this._resolveTickFontOptions(h),o.font=f=p.string,m=s[f]=s[f]||{data:{},gc:[]},g=p.lineHeight,_=v=0,i(u)||n(u)){if(n(u))for(l=0,c=u.length;l<c;++l)i(y=u[l])||n(y)||(_=ge(o,m.data,m.gc,_,y),v+=g)}else _=ge(o,m.data,m.gc,_,u),v=g;r.push(_),a.push(v),b=Math.max(_,b),x=Math.max(v,x)}!function(t,e){d(s,t=>{const i=t.gc,n=i.length/2;let o;if(n>e){for(o=0;o<n;++o)delete t.data[i[o]];i.splice(0,n)}})}(0,e);const w=r.indexOf(b),k=a.indexOf(x),L=t=>({width:r[t]||0,height:a[t]||0});return{first:L(0),last:L(e-1),widest:L(w),highest:L(k),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return J(this._alignToPixels?ve(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function(t,e,i){return gi(t,{tick:i,index:e,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=gi(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=$(this.labelRotation),i=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),o=this._getLabelSizes(),s=t.autoSkipPadding||0,r=o?o.widest.width+s:0,a=o?o.highest.height+s:0;return this.isHorizontal()?a*i>r*n?r/i:a/n:a*n<r*i?a/i:r/n}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,n=this.options,{grid:s,position:r}=n,h=s.offset,l=this.isHorizontal(),c=this.ticks.length+(h?1:0),d=Rn(s),u=[],p=s.setContext(this.getContext()),f=p.drawBorder?p.borderWidth:0,m=f/2,g=function(t){return ve(i,t,f)};let _,v,y,b,x,w,k,L,T,S,C,M;if("top"===r)_=g(this.bottom),w=this.bottom-d,L=_-m,S=g(t.top)+m,M=t.bottom;else if("bottom"===r)_=g(this.top),S=t.top,M=g(t.bottom)-m,w=_+m,L=this.top+d;else if("left"===r)_=g(this.right),x=this.right-d,k=_-m,T=g(t.left)+m,C=t.right;else if("right"===r)_=g(this.left),T=t.left,C=g(t.right)-m,x=_+m,k=this.left+d;else if("x"===e){if("center"===r)_=g((t.top+t.bottom)/2+.5);else if(o(r)){const t=Object.keys(r)[0],e=r[t];_=g(this.chart.scales[t].getPixelForValue(e))}S=t.top,M=t.bottom,L=(w=_+m)+d}else if("y"===e){if("center"===r)_=g((t.left+t.right)/2);else if(o(r)){const t=Object.keys(r)[0],e=r[t];_=g(this.chart.scales[t].getPixelForValue(e))}k=(x=_-m)-d,T=t.left,C=t.right}const E=a(n.ticks.maxTicksLimit,c),P=Math.max(1,Math.ceil(c/E));for(v=0;v<c;v+=P){const t=s.setContext(this.getContext(v)),e=t.lineWidth,n=t.color,o=t.borderDash||[],r=t.borderDashOffset,a=t.tickWidth,c=t.tickColor,d=t.tickBorderDash||[],p=t.tickBorderDashOffset;void 0!==(y=zn(this,v,h))&&(b=ve(i,y,e),l?x=k=T=C=b:w=L=S=M=b,u.push({tx1:x,ty1:w,tx2:k,ty2:L,x1:T,y1:S,x2:C,y2:M,width:e,color:n,borderDash:o,borderDashOffset:r,tickWidth:a,tickColor:c,tickBorderDash:d,tickBorderDashOffset:p}))}return this._ticksLength=c,this._borderValue=_,u}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:r}=i,a=this.isHorizontal(),h=this.ticks,{align:l,crossAlign:c,padding:d,mirror:u}=r,p=Rn(i.grid),f=p+d,m=u?-d:f,g=-$(this.labelRotation),_=[];let v,y,b,x,w,k,L,T,S,C,M,E,P="middle";if("top"===s)k=this.bottom-m,L=this._getXAxisLabelAlignment();else if("bottom"===s)k=this.top+m,L=this._getXAxisLabelAlignment();else if("left"===s){const t=this._getYAxisLabelAlignment(p);L=t.textAlign,w=t.x}else if("right"===s){const t=this._getYAxisLabelAlignment(p);L=t.textAlign,w=t.x}else if("x"===e){if("center"===s)k=(t.top+t.bottom)/2+f;else if(o(s)){const t=Object.keys(s)[0],e=s[t];k=this.chart.scales[t].getPixelForValue(e)+f}L=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===s)w=(t.left+t.right)/2-f;else if(o(s)){const t=Object.keys(s)[0],e=s[t];w=this.chart.scales[t].getPixelForValue(e)}L=this._getYAxisLabelAlignment(p).textAlign}"y"===e&&("start"===l?P="top":"end"===l&&(P="bottom"));const D=this._getLabelSizes();for(v=0,y=h.length;v<y;++v){x=(b=h[v]).label;const t=r.setContext(this.getContext(v));T=this.getPixelForTick(v)+r.labelOffset,C=(S=this._resolveTickFontOptions(v)).lineHeight;const e=(M=n(x)?x.length:1)/2,i=t.color,o=t.textStrokeColor,l=t.textStrokeWidth;let d,p=L;if(a?(w=T,"inner"===L&&(p=v===y-1?this.options.reverse?"left":"right":0===v?this.options.reverse?"right":"left":"center"),E="top"===s?"near"===c||0!==g?-M*C+C/2:"center"===c?-D.highest.height/2-e*C+C:-D.highest.height+C/2:"near"===c||0!==g?C/2:"center"===c?D.highest.height/2-e*C:D.highest.height-M*C,u&&(E*=-1)):(k=T,E=(1-M)*C/2),t.showLabelBackdrop){const e=ui(t.backdropPadding),i=D.heights[v],n=D.widths[v];let o=k+E-e.top,s=w-e.left;switch(P){case"middle":o-=i/2;break;case"bottom":o-=i}switch(L){case"center":s-=n/2;break;case"right":s-=n}d={left:s,top:o,width:n+e.width,height:i+e.height,color:t.backdropColor}}_.push({rotation:g,label:x,font:S,color:i,strokeColor:o,strokeWidth:l,textOffset:E,textAlign:p,textBaseline:P,translation:[w,k],backdrop:d})}return _}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-$(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:n,padding:o}}=this.options,s=t+o,r=this._getLabelSizes().widest.width;let a,h;return"left"===e?n?(h=this.right+o,"near"===i?a="left":"center"===i?(a="center",h+=r/2):(a="right",h+=r)):(h=this.right-s,"near"===i?a="right":"center"===i?(a="center",h-=r/2):(a="left",h=this.left)):"right"===e?n?(h=this.left+o,"near"===i?a="right":"center"===i?(a="center",h-=r/2):(a="left",h-=r)):(h=this.left+s,"near"===i?a="left":"center"===i?(a="center",h+=r/2):(a="right",h=this.right)):a="right",{textAlign:a,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:n,width:o,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,n,o,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(e=>e.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,s;const r=(t,e,n)=>{n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(e.display)for(o=0,s=n.length;o<s;++o){const t=n[o];e.drawOnChartArea&&r({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&r({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:i}}=this,n=i.setContext(this.getContext()),o=i.drawBorder?n.borderWidth:0;if(!o)return;const s=i.setContext(this.getContext(0)).lineWidth,r=this._borderValue;let a,h,l,c;this.isHorizontal()?(a=ve(t,this.left,o)-o/2,h=ve(t,this.right,s)+s/2,l=c=r):(l=ve(t,this.top,o)-o/2,c=ve(t,this.bottom,s)+s/2,a=h=r),e.save(),e.lineWidth=n.borderWidth,e.strokeStyle=n.borderColor,e.beginPath(),e.moveTo(a,l),e.lineTo(h,c),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,i=this._computeLabelArea();i&&ke(e,i);const n=this._labelItems||(this._labelItems=this._computeLabelItems(t));let o,s;for(o=0,s=n.length;o<s;++o){const t=n[o],i=t.font,s=t.label;t.backdrop&&(e.fillStyle=t.backdrop.color,e.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),Ce(e,s,0,t.textOffset,i,t)}i&&Le(e)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const r=pi(i.font),a=ui(i.padding),h=i.align;let l=r.lineHeight/2;"bottom"===e||"center"===e||o(e)?(l+=a.bottom,n(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=a.top;const{titleX:c,titleY:d,maxWidth:u,rotation:p}=function(t,e,i,n){const{top:s,left:r,bottom:a,right:h,chart:l}=t,{chartArea:c,scales:d}=l;let u,p,f,m=0;const g=a-s,_=h-r;if(t.isHorizontal()){if(p=ut(n,r,h),o(i)){const t=Object.keys(i)[0],n=i[t];f=d[t].getPixelForValue(n)+g-e}else f="center"===i?(c.bottom+c.top)/2+g-e:An(t,i,e);u=h-r}else{if(o(i)){const t=Object.keys(i)[0],n=i[t];p=d[t].getPixelForValue(n)-_+e}else p="center"===i?(c.left+c.right)/2-_+e:An(t,i,e);f=ut(n,a,s),m="left"===i?-O:O}return{titleX:p,titleY:f,maxWidth:u,rotation:m}}(this,l,e,h);Ce(t,i.text,0,0,r,{color:i.color,maxWidth:u,rotation:p,textAlign:function(t,e,i){let n=dt(t);return(i&&"right"!==e||!i&&"right"===e)&&(n=(t=>"left"===t?"right":"right"===t?"left":t)(n)),n}(h,e,s),textBaseline:"middle",translation:[c,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=a(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===Bn.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let o,s;for(o=0,s=e.length;o<s;++o){const s=e[o];s[i]!==this.id||t&&s.type!==t||n.push(s)}return n}_resolveTickFontOptions(t){return pi(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Fn{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;"id"in e&&"defaults"in e&&(i=this.register(e));const n=this.items,o=t.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in n||(n[o]=t,function(t,e,i){const n=g(Object.create(null),[i?ee.get(i):{},ee.get(e),t.defaults]);ee.set(e,n),t.defaultRoutes&&function(t,e){Object.keys(e).forEach(i=>{const n=i.split("."),o=n.pop(),s=[t].concat(n).join("."),r=e[i].split("."),a=r.pop(),h=r.join(".");ee.route(s,o,h,a)})}(e,t.defaultRoutes),t.descriptors&&ee.describe(e,t.descriptors)}(t,s,i),this.override&&ee.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,n=this.scope;i in e&&delete e[i],n&&i in ee[n]&&(delete ee[n][i],this.override&&delete Kt[i])}}var jn=new class{constructor(){this.controllers=new Fn(Cn,"datasets",!0),this.elements=new Fn(Mn,"elements"),this.plugins=new Fn(Object,"plugins"),this.scales=new Fn(Bn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(e=>{const n=i||this._getRegistryForType(e);i||n.isForType(e)||n===this.plugins&&e.id?this._exec(t,n,e):d(e,e=>{const n=i||this._getRegistryForType(e);this._exec(t,n,e)})})}_exec(t,e,i){const n=w(t);c(i["before"+n],[],i),e[t](i),c(i["after"+n],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const n=e.get(t);if(void 0===n)throw new Error('"'+t+'" is not a registered '+i+".");return n}};class Hn{constructor(){this._init=[]}notify(t,e,i,n){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=n?this._descriptors(t).filter(n):this._descriptors(t),s=this._notify(o,t,e,i);return"afterDestroy"===e&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,e,i,n){n=n||{};for(const o of t){const t=o.plugin;if(!1===c(t[i],[e,n,o.options],t)&&n.cancelable)return!1}return!0}invalidate(){i(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,n=a(i.options&&i.options.plugins,{}),o=function(t){const e={},i=[],n=Object.keys(jn.plugins.items);for(let t=0;t<n.length;t++)i.push(jn.getPlugin(n[t]));const o=t.plugins||[];for(let t=0;t<o.length;t++){const n=o[t];-1===i.indexOf(n)&&(i.push(n),e[n.id]=!0)}return{plugins:i,localIds:e}}(i);return!1!==n||e?function(t,{plugins:e,localIds:i},n,o){const s=[],r=t.getContext();for(const a of e){const e=a.id,h=Un(n[e],o);null!==h&&s.push({plugin:a,options:$n(t.config,{plugin:a,local:i[e]},h,r)})}return s}(t,o,n,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,n=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(n(e,i),t,"stop"),this._notify(n(i,e),t,"start")}}function Un(t,e){return e||!1!==t?!0===t?{}:t:null}function $n(t,{plugin:e,local:i},n,o){const s=t.pluginScopeKeys(e),r=t.getOptionScopes(n,s);return i&&e.defaults&&r.push(e.defaults),t.createResolver(r,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Wn(t,e){const i=ee.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function Zn(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(i=e.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.charAt(0).toLowerCase();var i}function Vn(t){const e=t.options||(t.options={});e.plugins=a(e.plugins,{}),e.scales=function(t,e){const i=Kt[t.type]||{scales:{}},n=e.scales||{},s=Wn(t.type,e),r=Object.create(null),a=Object.create(null);return Object.keys(n).forEach(t=>{const e=n[t];if(!o(e))return console.error(`Invalid scale configuration for scale: ${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const h=Zn(t,e),l=h===s?"_index_":"_value_",c=i.scales||{};r[h]=r[h]||t,a[t]=_(Object.create(null),[{axis:h},e,c[h],c[l]])}),t.data.datasets.forEach(i=>{const o=i.type||t.type,s=i.indexAxis||Wn(o,e),h=(Kt[o]||{}).scales||{};Object.keys(h).forEach(t=>{const e=function(t,e){let i=t;return"_index_"===t?i=s:"_value_"===t&&(i="x"===s?"y":"x"),i}(t),o=i[e+"AxisID"]||r[e]||e;a[o]=a[o]||Object.create(null),_(a[o],[{axis:e},n[o],h[t]])})}),Object.keys(a).forEach(t=>{const e=a[t];_(e,[ee.scales[e.type],ee.scale])}),a}(t,e)}function Gn(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Yn=new Map,qn=new Set;function Xn(t,e){let i=Yn.get(t);return i||(i=e(),Yn.set(t,i),qn.add(i)),i}const Kn=(t,e,i)=>{const n=b(e,i);void 0!==n&&t.add(n)};class Jn{constructor(t){this._config=function(t){return(t=t||{}).data=Gn(t.data),Vn(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Gn(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Vn(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Xn(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Xn(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Xn(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return Xn(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let n=i.get(t);return n&&!e||(n=new Map,i.set(t,n)),n}getOptionScopes(t,e,i){const{options:n,type:o}=this,s=this._cachedScopes(t,i),r=s.get(e);if(r)return r;const a=new Set;e.forEach(e=>{t&&(a.add(t),e.forEach(e=>Kn(a,t,e))),e.forEach(t=>Kn(a,n,t)),e.forEach(t=>Kn(a,Kt[o]||{},t)),e.forEach(t=>Kn(a,ee,t)),e.forEach(t=>Kn(a,Jt,t))});const h=Array.from(a);return 0===h.length&&h.push(Object.create(null)),qn.has(e)&&s.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,Kt[e]||{},ee.datasets[e]||{},{type:e},ee,Jt]}resolveNamedOptions(t,e,i,o=[""]){const s={$shared:!0},{resolver:r,subPrefixes:a}=Qn(this._resolverCache,t,o);let h=r;(function(t,e){const{isScriptable:i,isIndexable:o}=Oe(t);for(const s of e){const e=i(s),r=o(s),a=(r||e)&&t[s];if(e&&(L(a)||to(a))||r&&n(a))return!0}return!1})(r,e)&&(s.$shared=!1,h=De(r,i=L(i)?i():i,this.createResolver(t,i,a)));for(const t of e)s[t]=h[t];return s}createResolver(t,e,i=[""],n){const{resolver:s}=Qn(this._resolverCache,t,i);return o(e)?De(s,e,void 0,n):s}}function Qn(t,e,i){let n=t.get(e);n||(n=new Map,t.set(e,n));const o=i.join();let s=n.get(o);return s||(s={resolver:Pe(e,i),subPrefixes:i.filter(t=>!t.toLowerCase().includes("hover"))},n.set(o,s)),s}const to=t=>o(t)&&Object.getOwnPropertyNames(t).reduce((e,i)=>e||L(t[i]),!1),eo=["top","bottom","left","right","chartArea"];function io(t,e){return"top"===t||"bottom"===t||-1===eo.indexOf(t)&&"x"===e}function no(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}function oo(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),c(i&&i.onComplete,[t],e)}function so(t){const e=t.chart,i=e.options.animation;c(i&&i.onProgress,[t],e)}function ro(t){return ie()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ao={},ho=t=>{const e=ro(t);return Object.values(ao).filter(t=>t.canvas===e).pop()};function lo(t,e,i){const n=Object.keys(t);for(const o of n){const n=+o;if(n>=e){const s=t[o];delete t[o],(i>0||n>e)&&(t[n+i]=s)}}}class co{constructor(t,i){const n=this.config=new Jn(i),o=ro(t),s=ho(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||ln(o)),this.platform.updateConfig(n);const a=this.platform.acquireContext(o,r.aspectRatio),h=a&&a.canvas,l=h&&h.height,c=h&&h.width;this.id=e(),this.ctx=a,this.canvas=h,this.width=c,this.height=l,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hn,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ct(t=>this.update(t),r.resizeDelay||0),this._dataChanges=[],ao[this.id]=this,a&&h?(gt.listen(this,"complete",oo),gt.listen(this,"progress",so),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:o,_aspectRatio:s}=this;return i(t)?e&&s?s:o?n/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ue(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ye(this.canvas,this.ctx),this}stop(){return gt.stop(this),this}resize(t,e){gt.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,n=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(n,t,e,o),r=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,ue(this,r,!0)&&(this.notifyPlugins("resize",{size:s}),c(i.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){d(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,n=Object.keys(i).reduce((t,e)=>(t[e]=!1,t),{});let o=[];e&&(o=o.concat(Object.keys(e).map(t=>{const i=e[t],n=Zn(t,i),o="r"===n,s="x"===n;return{options:i,dposition:o?"chartArea":s?"bottom":"left",dtype:o?"radialLinear":s?"category":"linear"}}))),d(o,e=>{const o=e.options,s=o.id,r=Zn(s,o),h=a(o.type,e.dtype);void 0!==o.position&&io(o.position,r)===io(e.dposition)||(o.position=e.dposition),n[s]=!0;let l=null;s in i&&i[s].type===h?l=i[s]:(l=new(jn.getScale(h))({id:s,type:h,ctx:this.ctx,chart:this}),i[l.id]=l),l.init(o,t)}),d(n,(t,e)=>{t||delete i[e]}),d(i,t=>{Vi.configure(this,t,t.options),Vi.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((t,e)=>t.index-e.index),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(no("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,i)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=e.length;i<n;i++){const n=e[i];let o=this.getDatasetMeta(i);const s=n.type||this.config.type;if(o.type&&o.type!==s&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=s,o.indexAxis=n.indexAxis||Wn(s,this.options),o.order=n.order||0,o.index=i,o.label=""+n.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const e=jn.getController(s),{datasetElementType:n,dataElementType:r}=ee.datasets[s];Object.assign(e.prototype,{dataElementType:jn.getElement(r),datasetElementType:n&&jn.getElement(n)}),o.controller=new e(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){d(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),i=!n&&-1===o.indexOf(e);e.buildOrUpdateElements(i),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=i.layout.autoPadding?s:0,this._updateLayout(s),n||d(o,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(no("z","_idx"));const{_active:r,_lastEvent:a}=this;a?this._eventHandler(a,!0):r.length&&this._updateHoverStyles(r,r,!0),this.render()}_updateScales(){d(this.scales,t=>{Vi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);T(e,i)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:o}of e)lo(t,n,"_removeElements"===i?-o:o)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),n=i(0);for(let t=1;t<e;t++)if(!T(n,i(t)))return;return Array.from(n).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Vi.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],d(this.boxes,t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,L(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),n={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(i.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(gt.has(this)?this.attached&&!gt.running(this)&&gt.start(this):(this.draw(),oo({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let n,o;for(n=0,o=e.length;n<o;++n){const o=e[n];t&&!o.visible||i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,n=!i.disabled,o=this.chartArea,s={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(n&&ke(e,{left:!1===i.left?0:o.left-i.left,right:!1===i.right?this.width:o.right+i.right,top:!1===i.top?0:o.top-i.top,bottom:!1===i.bottom?this.height:o.bottom+i.bottom}),t.controller.draw(),n&&Le(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return we(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,n){const o=Ii.modes[e];return"function"==typeof o?o(this,t,i,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let n=i.filter(t=>t&&t._dataset===e).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=gi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const n=i?"show":"hide",o=this.getDatasetMeta(t),s=o.controller._resolveAnimations(void 0,n);k(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),s.update(o,{visible:i}),this.update(e=>e.datasetIndex===t?n:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),gt.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),ye(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete ao[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(i,n)=>{e.addEventListener(this,i,n),t[i]=n},n=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};d(this.options.events,t=>i(t,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(i,n)=>{e.addEventListener(this,i,n),t[i]=n},n=(i,n)=>{t[i]&&(e.removeEventListener(this,i,n),delete t[i])},o=(t,e)=>{this.canvas&&this.resize(t,e)};let s;const r=()=>{n("attach",r),this.attached=!0,this.resize(),i("resize",o),i("detach",s)};s=(()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),i("attach",r)}),e.isAttached(this.canvas)?r():s()}unbindEvents(){d(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},d(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const n=i?"set":"remove";let o,s,r,a;for("dataset"===e&&(o=this.getDatasetMeta(t[0].datasetIndex)).controller["_"+n+"DatasetHoverStyle"](),r=0,a=t.length;r<a;++r){const e=(s=t[r])&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[n+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:t,index:e})=>{const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}});!u(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}_updateHoverStyles(t,e,i){const n=this.options.hover,o=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),s=o(e,t),r=i?t:o(t,e);s.length&&this.updateHoverStyle(s,n.mode,!1),r.length&&n.mode&&this.updateHoverStyle(r,n.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,n))return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:n=[],options:o}=this,s=e,r=this._getActiveElements(t,n,i,s),a=S(t),h=function(t,e,i,n){return i&&"mouseout"!==t.type?n?e:t:null}(t,this._lastEvent,i,a);i&&(this._lastEvent=null,c(o.onHover,[t,r,this],this),a&&c(o.onClick,[t,r,this],this));const l=!u(r,n);return(l||e)&&(this._active=r,this._updateHoverStyles(r,n,e)),this._lastEvent=h,l}_getActiveElements(t,e,i,n){if("mouseout"===t.type)return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,n)}}const uo=()=>d(co.instances,t=>t._plugins.invalidate());function po(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}Object.defineProperties(co,{defaults:{enumerable:!0,value:ee},instances:{enumerable:!0,value:ao},overrides:{enumerable:!0,value:Kt},registry:{enumerable:!0,value:jn},version:{enumerable:!0,value:"3.9.1"},getChart:{enumerable:!0,value:ho},register:{enumerable:!0,value:(...t)=>{jn.add(...t),uo()}},unregister:{enumerable:!0,value:(...t)=>{jn.remove(...t),uo()}}});class fo{constructor(t){this.options=t||{}}init(t){}formats(){return po()}parse(t,e){return po()}format(t,e){return po()}add(t,e,i){return po()}diff(t,e,i){return po()}startOf(t,e,i){return po()}endOf(t,e){return po()}}fo.override=function(t){Object.assign(fo.prototype,t)};var mo={_date:fo};function go(t,e,i,o){return n(t)?function(t,e,i,n){const o=i.parse(t[0],n),s=i.parse(t[1],n),r=Math.min(o,s),a=Math.max(o,s);let h=r,l=a;Math.abs(r)>Math.abs(a)&&(h=a,l=r),e[i.axis]=l,e._custom={barStart:h,barEnd:l,start:o,end:s,min:r,max:a}}(t,e,i,o):e[i.axis]=i.parse(t,o),e}function _o(t,e,i,n){const o=t.iScale,s=t.vScale,r=o.getLabels(),a=o===s,h=[];let l,c,d,u;for(l=i,c=i+n;l<c;++l)u=e[l],(d={})[o.axis]=a||o.parse(r[l],l),h.push(go(u,d,s,l));return h}function vo(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function yo(t,e,i,n){let o=e.borderSkipped;const s={};if(!o)return void(t.borderSkipped=s);if(!0===o)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:r,end:a,reverse:h,top:l,bottom:c}=function(t){let e,i,n,o,s;return t.horizontal?(e=t.base>t.x,i="left",n="right"):(e=t.base<t.y,i="bottom",n="top"),e?(o="end",s="start"):(o="start",s="end"),{start:i,end:n,reverse:e,top:o,bottom:s}}(t);"middle"===o&&i&&(t.enableBorderRadius=!0,(i._top||0)===n?o=l:(i._bottom||0)===n?o=c:(s[bo(c,r,a,h)]=!0,o=l)),s[bo(o,r,a,h)]=!0,t.borderSkipped=s}function bo(t,e,i,n){var o,s,r;return n?(r=i,t=xo(t=(o=t)===(s=e)?r:o===r?s:o,i,e)):t=xo(t,e,i),t}function xo(t,e,i){return"start"===t?e:"end"===t?i:t}function wo(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?1===i?.33:0:e}class ko extends Cn{parsePrimitiveData(t,e,i,n){return _o(t,e,i,n)}parseArrayData(t,e,i,n){return _o(t,e,i,n)}parseObjectData(t,e,i,n){const{iScale:o,vScale:s}=t,{xAxisKey:r="x",yAxisKey:a="y"}=this._parsing,h="x"===o.axis?r:a,l="x"===s.axis?r:a,c=[];let d,u,p,f;for(d=i,u=i+n;d<u;++d)f=e[d],(p={})[o.axis]=o.parse(b(f,h),d),c.push(go(b(f,l),p,s,d));return c}updateRangeFromParsed(t,e,i,n){super.updateRangeFromParsed(t,e,i,n);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:n}=e,o=this.getParsed(t),s=o._custom,r=vo(s)?"["+s.start+", "+s.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:r}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,o){const s="reset"===o,{index:r,_cachedMeta:{vScale:a}}=this,h=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(e,o);for(let p=e;p<e+n;p++){const e=this.getParsed(p),n=s||i(e[a.axis])?{base:h,head:h}:this._calculateBarValuePixels(p),f=this._calculateBarIndexPixels(p,c),m=(e._stacks||{})[a.axis],g={horizontal:l,base:n.base,enableBorderRadius:!m||vo(e._custom)||r===m._top||r===m._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};u&&(g.options=d||this.resolveDataElementOptions(p,t[p].active?"active":o));const _=g.options||t[p].options;yo(g,_,m,r),wo(g,_,c.ratio),this.updateElement(t[p],p,g,o)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,o=n.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),s=n.options.stacked,r=[],a=t=>{const n=t.controller.getParsed(e),o=n&&n[t.vScale.axis];if(i(o)||isNaN(o))return!0};for(const i of o)if((void 0===e||!a(i))&&((!1===s||-1===r.indexOf(i.stack)||void 0===s&&void 0===i.stack)&&r.push(i.stack),i.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const n=this._getStacks(t,i),o=void 0!==e?n.indexOf(e):-1;return-1===o?n.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,n=[];let o,s;for(o=0,s=e.data.length;o<s;++o)n.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const r=t.barThickness;return{min:r||function(t){const e=t.iScale,i=function(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let n=[];for(let e=0,o=i.length;e<o;e++)n=n.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=at(n.sort((t,e)=>t-e))}return t._cache.$bar}(e,t.type);let n,o,s,r,a=e._length;const h=()=>{32767!==s&&-32768!==s&&(k(r)&&(a=Math.min(a,Math.abs(s-r)||a)),r=s)};for(n=0,o=i.length;n<o;++n)s=e.getPixelForValue(i[n]),h();for(r=void 0,n=0,o=e.ticks.length;n<o;++n)s=e.getPixelForTick(n),h();return a}(e),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:r?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n},options:{base:o,minBarLength:s}}=this,r=o||0,a=this.getParsed(t),h=a._custom,l=vo(h);let c,d,u=a[e.axis],p=0,f=n?this.applyStack(e,a,n):u;f!==u&&(p=f-u,f=u),l&&(u=h.barStart,f=h.barEnd-h.barStart,0!==u&&R(u)!==R(h.barEnd)&&(p=0),p+=u);const m=i(o)||l?p:o;let g=e.getPixelForValue(m);if(d=(c=this.chart.getDataVisibility(t)?e.getPixelForValue(p+f):g)-g,Math.abs(d)<s){d=function(t,e,i){return 0!==d?R(d):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}(0,e,r)*s,u===r&&(g-=d/2);const t=e.getPixelForDecimal(0),i=e.getPixelForDecimal(1),n=Math.min(t,i),o=Math.max(t,i);c=(g=Math.max(Math.min(g,o),n))+d}if(g===e.getPixelForValue(r)){const t=R(d)*e.getLineWidthForValue(r)/2;g+=t,d-=t}return{size:d,base:g,head:c,center:c+d/2}}_calculateBarIndexPixels(t,e){const n=e.scale,o=this.options,s=o.skipNull,r=a(o.maxBarThickness,1/0);let h,l;if(e.grouped){const n=s?this._getStackCount(t):e.stackCount,a="flex"===o.barThickness?function(t,e,i,n){const o=e.pixels,s=o[t];let r=t>0?o[t-1]:null,a=t<o.length-1?o[t+1]:null;const h=i.categoryPercentage;null===r&&(r=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-r);const l=s-(s-Math.min(r,a))/2*h;return{chunk:Math.abs(a-r)/2*h/n,ratio:i.barPercentage,start:l}}(t,e,o,n):function(t,e,n,o){const s=n.barThickness;let r,a;return i(s)?(r=e.min*n.categoryPercentage,a=n.barPercentage):(r=s*o,a=1),{chunk:r/o,ratio:a,start:e.pixels[t]-r/2}}(t,e,o,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);h=a.start+a.chunk*c+a.chunk/2,l=Math.min(r,a.chunk*a.ratio)}else h=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(r,e.min*e.ratio);return{base:h-l/2,head:h+l/2,center:h,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,n=i.length;let o=0;for(;o<n;++o)null!==this.getParsed(o)[e.axis]&&i[o].draw(this._ctx)}}ko.id="bar",ko.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},ko.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class Lo extends Cn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,n){const o=super.parsePrimitiveData(t,e,i,n);for(let t=0;t<o.length;t++)o[t]._custom=this.resolveDataElementOptions(t+i).radius;return o}parseArrayData(t,e,i,n){const o=super.parseArrayData(t,e,i,n);for(let t=0;t<o.length;t++){const n=e[i+t];o[t]._custom=a(n[2],this.resolveDataElementOptions(t+i).radius)}return o}parseObjectData(t,e,i,n){const o=super.parseObjectData(t,e,i,n);for(let t=0;t<o.length;t++){const n=e[i+t];o[t]._custom=a(n&&n.r&&+n.r,this.resolveDataElementOptions(t+i).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:i,yScale:n}=e,o=this.getParsed(t),s=i.getLabelForValue(o.x),r=n.getLabelForValue(o.y),a=o._custom;return{label:e.label,value:"("+s+", "+r+(a?", "+a:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,n){const o="reset"===n,{iScale:s,vScale:r}=this._cachedMeta,{sharedOptions:a,includeOptions:h}=this._getSharedOptions(e,n),l=s.axis,c=r.axis;for(let d=e;d<e+i;d++){const e=t[d],i=!o&&this.getParsed(d),u={},p=u[l]=o?s.getPixelForDecimal(.5):s.getPixelForValue(i[l]),f=u[c]=o?r.getBasePixel():r.getPixelForValue(i[c]);u.skip=isNaN(p)||isNaN(f),h&&(u.options=a||this.resolveDataElementOptions(d,e.active?"active":n),o&&(u.options.radius=0)),this.updateElement(e,d,u,n)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let n=super.resolveDataElementOptions(t,e);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const o=n.radius;return"active"!==e&&(n.radius=0),n.radius+=a(i&&i._custom,o),n}}Lo.id="bubble",Lo.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Lo.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class To extends Cn{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=i;else{let s,r,a=t=>+i[t];if(o(i[t])){const{key:t="value"}=this._parsing;a=(e=>+b(i[e],t))}for(s=t,r=t+e;s<r;++s)n._parsed[s]=a(s)}}_getRotation(){return $(this.options.rotation-90)}_getCircumference(){return $(this.options.circumference)}_getRotationExtents(){let t=M,e=-M;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)){const n=this.chart.getDatasetMeta(i).controller,o=n._getRotation(),s=n._getCircumference();t=Math.min(t,o),e=Math.max(e,o+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,n=this._cachedMeta,o=n.data,s=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,r=Math.max((Math.min(i.width,i.height)-s)/2,0),a=Math.min(h(this.options.cutout,r),1),c=this._getRingWeight(this.index),{circumference:d,rotation:u}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:m,offsetY:g}=function(t,e,i){let n=1,o=1,s=0,r=0;if(l<M){const t=c,e=t+l,a=Math.cos(t),h=Math.sin(t),l=Math.cos(e),c=Math.sin(e),d=(n,o,s)=>X(n,t,e,!0)?1:Math.max(o,o*i,s,s*i),u=(n,o,s)=>X(n,t,e,!0)?-1:Math.min(o,o*i,s,s*i),p=d(0,a,l),f=d(O,h,c),m=u(C,a,l),g=u(C+O,h,c);n=(p-m)/2,o=(f-g)/2,s=-(p+m)/2,r=-(f+g)/2}return{ratioX:n,ratioY:o,offsetX:s,offsetY:r}}(0,0,a),_=(i.width-s)/p,v=(i.height-s)/f,y=Math.max(Math.min(_,v)/2,0),b=l(this.options.radius,y),x=(b-Math.max(b*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*b,this.offsetY=g*b,n.total=this.calculateTotal(),this.outerRadius=b-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const i=this.options,n=this._cachedMeta,o=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===n._parsed[t]||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*o/M)}updateElements(t,e,i,n){const o="reset"===n,s=this.chart,r=s.chartArea,a=s.options.animation,h=(r.left+r.right)/2,l=(r.top+r.bottom)/2,c=o&&a.animateScale,d=c?0:this.innerRadius,u=c?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(e,n);let m,g=this._getRotation();for(m=0;m<e;++m)g+=this._circumference(m,o);for(m=e;m<e+i;++m){const e=this._circumference(m,o),i=t[m],s={x:h+this.offsetX,y:l+this.offsetY,startAngle:g,endAngle:g+e,circumference:e,outerRadius:u,innerRadius:d};f&&(s.options=p||this.resolveDataElementOptions(m,i.active?"active":n)),g+=e,this.updateElement(i,m,s,n)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i,n=0;for(i=0;i<e.length;i++){const o=t._parsed[i];null===o||isNaN(o)||!this.chart.getDataVisibility(i)||e[i].hidden||(n+=Math.abs(o))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?M*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=si(e._parsed[t],i.options.locale);return{label:n[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const i=this.chart;let n,o,s,r,a;if(!t)for(n=0,o=i.data.datasets.length;n<o;++n)if(i.isDatasetVisible(n)){t=(s=i.getDatasetMeta(n)).data,r=s.controller;break}if(!t)return 0;for(n=0,o=t.length;n<o;++n)"inner"!==(a=r.resolveDataElementOptions(n)).borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,n=t.length;i<n;++i){const t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(a(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}To.id="doughnut",To.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},To.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},To.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const i=": "+t.formattedValue;return n(e)?(e=e.slice())[0]+=i:e+=i,e}}}}};class So extends Cn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:n=[],_dataset:o}=e,s=this.chart._animationsDisabled;let{start:r,count:a}=ft(e,n,s);this._drawStart=r,this._drawCount=a,mt(e)&&(r=0,a=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(i,void 0,{animated:!s,options:h},t),this.updateElements(n,r,a,t)}updateElements(t,e,n,o){const s="reset"===o,{iScale:r,vScale:a,_stacked:h,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(e,o),u=r.axis,p=a.axis,{spanGaps:f,segment:m}=this.options,g=F(f)?f:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||"none"===o;let v=e>0&&this.getParsed(e-1);for(let f=e;f<e+n;++f){const e=t[f],n=this.getParsed(f),y=_?e:{},b=i(n[p]),x=y[u]=r.getPixelForValue(n[u],f),w=y[p]=s||b?a.getBasePixel():a.getPixelForValue(h?this.applyStack(a,n,h):n[p],f);y.skip=isNaN(x)||isNaN(w)||b,y.stop=f>0&&Math.abs(n[u]-v[u])>g,m&&(y.parsed=n,y.raw=l.data[f]),d&&(y.options=c||this.resolveDataElementOptions(f,e.active?"active":o)),_||this.updateElement(e,f,y,o),v=n}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,n=t.data||[];if(!n.length)return i;const o=n[0].size(this.resolveDataElementOptions(0)),s=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,o,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}So.id="line",So.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},So.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Co extends Cn{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=si(e._parsed[t].r,i.options.locale);return{label:n[t]||"",value:o}}parseObjectData(t,e,i,n){return $e.bind(this)(t,e,i,n)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((t,i)=>{const n=this.getParsed(i).r;!isNaN(n)&&this.chart.getDataVisibility(i)&&(n<e.min&&(e.min=n),n>e.max&&(e.max=n))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,n=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(n/2,0),s=(o-Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=o-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(t,e,i,n){const o="reset"===n,s=this.chart,r=s.options.animation,a=this._cachedMeta.rScale,h=a.xCenter,l=a.yCenter,c=a.getIndexAngle(0)-.5*C;let d,u=c;const p=360/this.countVisibleElements();for(d=0;d<e;++d)u+=this._computeAngle(d,n,p);for(d=e;d<e+i;d++){const e=t[d];let i=u,f=u+this._computeAngle(d,n,p),m=s.getDataVisibility(d)?a.getDistanceFromCenterForValue(this.getParsed(d).r):0;u=f,o&&(r.animateScale&&(m=0),r.animateRotate&&(i=f=c));const g={x:h,y:l,innerRadius:0,outerRadius:m,startAngle:i,endAngle:f,options:this.resolveDataElementOptions(d,e.active?"active":n)};this.updateElement(e,d,g,n)}}countVisibleElements(){let t=0;return this._cachedMeta.data.forEach((e,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?$(this.resolveDataElementOptions(t,e).angle||i):0}}Co.id="polarArea",Co.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Co.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class Mo extends To{}Mo.id="pie",Mo.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class Eo extends Cn{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,n){return $e.bind(this)(t,e,i,n)}update(t){const e=this._cachedMeta,i=e.dataset,n=e.data||[],o=e.iScale.getLabels();if(i.points=n,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const s={_loop:!0,_fullLoop:o.length===n.length,options:e};this.updateElement(i,void 0,s,t)}this.updateElements(n,0,n.length,t)}updateElements(t,e,i,n){const o=this._cachedMeta.rScale,s="reset"===n;for(let r=e;r<e+i;r++){const e=t[r],i=this.resolveDataElementOptions(r,e.active?"active":n),a=o.getPointPositionForValue(r,this.getParsed(r).r),h=s?o.xCenter:a.x,l=s?o.yCenter:a.y,c={x:h,y:l,angle:a.angle,skip:isNaN(h)||isNaN(l),options:i};this.updateElement(e,r,c,n)}}}Eo.id="radar",Eo.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},Eo.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Po extends Cn{update(t){const e=this._cachedMeta,{data:i=[]}=e,n=this.chart._animationsDisabled;let{start:o,count:s}=ft(e,i,n);if(this._drawStart=o,this._drawCount=s,mt(e)&&(o=0,s=i.length),this.options.showLine){const{dataset:o,_dataset:s}=e;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!s._decimated,o.points=i;const r=this.resolveDatasetElementOptions(t);r.segment=this.options.segment,this.updateElement(o,void 0,{animated:!n,options:r},t)}this.updateElements(i,o,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=jn.getElement("line")),super.addElements()}updateElements(t,e,n,o){const s="reset"===o,{iScale:r,vScale:a,_stacked:h,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,o),d=this.getSharedOptions(c),u=this.includeOptions(o,d),p=r.axis,f=a.axis,{spanGaps:m,segment:g}=this.options,_=F(m)?m:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||"none"===o;let y=e>0&&this.getParsed(e-1);for(let c=e;c<e+n;++c){const e=t[c],n=this.getParsed(c),m=v?e:{},b=i(n[f]),x=m[p]=r.getPixelForValue(n[p],c),w=m[f]=s||b?a.getBasePixel():a.getPixelForValue(h?this.applyStack(a,n,h):n[f],c);m.skip=isNaN(x)||isNaN(w)||b,m.stop=c>0&&Math.abs(n[p]-y[p])>_,g&&(m.parsed=n,m.raw=l.data[c]),u&&(m.options=d||this.resolveDataElementOptions(c,e.active?"active":o)),v||this.updateElement(e,c,m,o),y=n}this.updateSharedOptions(d,o,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}const i=t.dataset,n=i.options&&i.options.borderWidth||0;if(!e.length)return n;const o=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(n,o,s)/2}}Po.id="scatter",Po.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},Po.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var Do=Object.freeze({__proto__:null,BarController:ko,BubbleController:Lo,DoughnutController:To,LineController:So,PolarAreaController:Co,PieController:Mo,RadarController:Eo,ScatterController:Po});function Oo(t,e,i){const{startAngle:n,pixelMargin:o,x:s,y:r,outerRadius:a,innerRadius:h}=e;let l=o/a;t.beginPath(),t.arc(s,r,a,n-l,i+l),h>o?(l=o/h,t.arc(s,r,h,i+l,n-l,!0)):t.arc(s,r,o,i+O,n-O),t.closePath(),t.clip()}function Ao(t,e,i,n){return{x:i+t*Math.cos(e),y:n+t*Math.sin(e)}}function Io(t,e,i,n,o,s){const{x:r,y:a,startAngle:h,pixelMargin:l,innerRadius:c}=e,d=Math.max(e.outerRadius+n+i-l,0),u=c>0?c+n+i+l:0;let p=0;const f=o-h;if(n){const t=((c>0?c-n:0)+(d>0?d-n:0))/2;p=(f-(0!==t?f*t/(t+n):f))/2}const m=(f-Math.max(.001,f*d-i/C)/d)/2,g=h+m+p,_=o-m-p,{outerStart:v,outerEnd:y,innerStart:b,innerEnd:x}=function(t,e,i,n){const o=li(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),s=(i-e)/2,r=Math.min(s,n*e/2),a=t=>{const e=(i-Math.min(s,t))*n/2;return K(t,0,Math.min(s,e))};return{outerStart:a(o.outerStart),outerEnd:a(o.outerEnd),innerStart:K(o.innerStart,0,r),innerEnd:K(o.innerEnd,0,r)}}(e,u,d,_-g),w=d-v,k=d-y,L=g+v/w,T=_-y/k,S=u+b,M=u+x,E=g+b/S,P=_-x/M;if(t.beginPath(),s){if(t.arc(r,a,d,L,T),y>0){const e=Ao(k,T,r,a);t.arc(e.x,e.y,y,T,_+O)}const e=Ao(M,_,r,a);if(t.lineTo(e.x,e.y),x>0){const e=Ao(M,P,r,a);t.arc(e.x,e.y,x,_+O,P+Math.PI)}if(t.arc(r,a,u,_-x/u,g+b/u,!0),b>0){const e=Ao(S,E,r,a);t.arc(e.x,e.y,b,E+Math.PI,g-O)}const i=Ao(w,g,r,a);if(t.lineTo(i.x,i.y),v>0){const e=Ao(w,L,r,a);t.arc(e.x,e.y,v,g-O,L)}}else{t.moveTo(r,a);const e=Math.cos(L)*d+r,i=Math.sin(L)*d+a;t.lineTo(e,i);const n=Math.cos(T)*d+r,o=Math.sin(T)*d+a;t.lineTo(n,o)}t.closePath()}class zo extends Mn{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.getProps(["x","y"],i),{angle:o,distance:s}=V(n,{x:t,y:e}),{startAngle:r,endAngle:h,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),u=this.options.spacing/2,p=a(d,h-r)>=M||X(o,r,h),f=Q(s,l+u,c+u);return p&&f}getCenterPoint(t){const{x:e,y:i,startAngle:n,endAngle:o,innerRadius:s,outerRadius:r}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:a,spacing:h}=this.options,l=(n+o)/2,c=(s+r+h+a)/2;return{x:e+Math.cos(l)*c,y:i+Math.sin(l)*c}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,n=(e.offset||0)/2,o=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>M?Math.floor(i/M):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();let r=0;if(n){r=n/2;const e=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(e)*r,Math.sin(e)*r),this.circumference>=C&&(r=n)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,i,n,o,s){const{options:r}=e,{borderWidth:a,borderJoinStyle:h}=r,l="inner"===r.borderAlign;a&&(l?(t.lineWidth=2*a,t.lineJoin=h||"round"):(t.lineWidth=a,t.lineJoin=h||"bevel"),e.fullCircles&&function(t,e,i){const{x:n,y:o,startAngle:s,pixelMargin:r,fullCircles:a}=e,h=Math.max(e.outerRadius-r,0),l=e.innerRadius+r;let c;for(i&&Oo(t,e,s+M),t.beginPath(),t.arc(n,o,l,s+M,s,!0),c=0;c<a;++c)t.stroke();for(t.beginPath(),t.arc(n,o,h,s,s+M),c=0;c<a;++c)t.stroke()}(t,e,l),l&&Oo(t,e,o),Io(t,e,i,n,o,s),t.stroke())}(t,this,r,o,function(t,e,i,n,o){const{fullCircles:s,startAngle:r,circumference:a}=e;let h=e.endAngle;if(s){Io(t,e,i,n,r+M,o);for(let e=0;e<s;++e)t.fill();isNaN(a)||(h=r+a%M,a%M==0&&(h+=M))}return Io(t,e,i,n,h,o),t.fill(),h}(t,this,r,o,s),s),t.restore()}}function Ro(t,e,i=e){t.lineCap=a(i.borderCapStyle,e.borderCapStyle),t.setLineDash(a(i.borderDash,e.borderDash)),t.lineDashOffset=a(i.borderDashOffset,e.borderDashOffset),t.lineJoin=a(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=a(i.borderWidth,e.borderWidth),t.strokeStyle=a(i.borderColor,e.borderColor)}function No(t,e,i){t.lineTo(i.x,i.y)}function Bo(t,e,i={}){const n=t.length,{start:o=0,end:s=n-1}=i,{start:r,end:a}=e,h=Math.max(o,r),l=Math.min(s,a),c=o<r&&s<r||o>a&&s>a;return{count:n,start:h,loop:e.loop,ilen:l<h&&!c?n+l-h:l-h}}function Fo(t,e,i,n){const{points:o,options:s}=e,{count:r,start:a,loop:h,ilen:l}=Bo(o,i,n),c=function(t){return t.stepped?Te:t.tension||"monotone"===t.cubicInterpolationMode?Se:No}(s);let d,u,p,{move:f=!0,reverse:m}=n||{};for(d=0;d<=l;++d)(u=o[(a+(m?l-d:d))%r]).skip||(f?(t.moveTo(u.x,u.y),f=!1):c(t,p,u,m,s.stepped),p=u);return h&&c(t,p,u=o[(a+(m?l:0))%r],m,s.stepped),!!h}function jo(t,e,i,n){const o=e.points,{count:s,start:r,ilen:a}=Bo(o,i,n),{move:h=!0,reverse:l}=n||{};let c,d,u,p,f,m,g=0,_=0;const v=t=>(r+(l?a-t:t))%s,y=()=>{p!==f&&(t.lineTo(g,f),t.lineTo(g,p),t.lineTo(g,m))};for(h&&(d=o[v(0)],t.moveTo(d.x,d.y)),c=0;c<=a;++c){if((d=o[v(c)]).skip)continue;const e=d.x,i=d.y,n=0|e;n===u?(i<p?p=i:i>f&&(f=i),g=(_*g+e)/++_):(y(),t.lineTo(e,i),u=n,_=0,p=f=i),m=i}y()}function Ho(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i?Fo:jo}zo.id="arc",zo.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},zo.defaultRoutes={backgroundColor:"backgroundColor"};const Uo="function"==typeof Path2D;class $o extends Mn{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;Xe(this._points,i,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Li(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,n=t[e],o=this.points,s=ki(this,{property:e,start:n,end:n});if(!s.length)return;const r=[],a=function(t){return t.stepped?ii:t.tension||"monotone"===t.cubicInterpolationMode?ni:ei}(i);let h,l;for(h=0,l=s.length;h<l;++h){const{start:l,end:c}=s[h],d=o[l],u=o[c];if(d===u){r.push(d);continue}const p=a(d,u,Math.abs((n-d[e])/(u[e]-d[e])),i.stepped);p[e]=t[e],r.push(p)}return 1===r.length?r[0]:r}pathSegment(t,e,i){return Ho(this)(t,this,e,i)}path(t,e,i){const n=this.segments,o=Ho(this);let s=this._loop;e=e||0,i=i||this.points.length-e;for(const r of n)s&=o(t,this,r,{start:e,end:e+i-1});return!!s}draw(t,e,i,n){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),function(t,e,i,n){Uo&&!e.options.segment?function(t,e,i,n){let o=e._path;o||(o=e._path=new Path2D,e.path(o,i,n)&&o.closePath()),Ro(t,e.options),t.stroke(o)}(t,e,i,n):function(t,e,i,n){const{segments:o,options:s}=e,r=Ho(e);for(const a of o)Ro(t,s,a.style),t.beginPath(),r(t,e,a,{start:i,end:i+n-1})&&t.closePath(),t.stroke()}(t,e,i,n)}(t,this,i,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Wo(t,e,i,n){const o=t.options,{[i]:s}=t.getProps([i],n);return Math.abs(e-s)<o.radius+o.hitRadius}$o.id="line",$o.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},$o.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},$o.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class Zo extends Mn{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.options,{x:o,y:s}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(e-s,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,e){return Wo(this,t,"x",e)}inYRange(t,e){return Wo(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0;return 2*((e=Math.max(e,e&&t.hoverRadius||0))+(e&&t.borderWidth||0))}draw(t,e){const i=this.options;this.skip||i.radius<.1||!we(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,be(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Vo(t,e){const{x:i,y:n,base:o,width:s,height:r}=t.getProps(["x","y","base","width","height"],e);let a,h,l,c,d;return t.horizontal?(d=r/2,a=Math.min(i,o),h=Math.max(i,o),l=n-d,c=n+d):(a=i-(d=s/2),h=i+d,l=Math.min(n,o),c=Math.max(n,o)),{left:a,top:l,right:h,bottom:c}}function Go(t,e,i,n){return t?0:K(e,i,n)}function Yo(t){const e=Vo(t),i=e.right-e.left,n=e.bottom-e.top,s=function(t,e,i){const n=t.options.borderWidth,o=t.borderSkipped,s=ci(n);return{t:Go(o.top,s.top,0,i),r:Go(o.right,s.right,0,e),b:Go(o.bottom,s.bottom,0,i),l:Go(o.left,s.left,0,e)}}(t,i/2,n/2),r=function(t,e,i){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,r=di(s),a=Math.min(e,i),h=t.borderSkipped,l=n||o(s);return{topLeft:Go(!l||h.top||h.left,r.topLeft,0,a),topRight:Go(!l||h.top||h.right,r.topRight,0,a),bottomLeft:Go(!l||h.bottom||h.left,r.bottomLeft,0,a),bottomRight:Go(!l||h.bottom||h.right,r.bottomRight,0,a)}}(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function qo(t,e,i,n){const o=null===e,s=null===i,r=t&&!(o&&s)&&Vo(t,n);return r&&(o||Q(e,r.left,r.right))&&(s||Q(i,r.top,r.bottom))}function Xo(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ko(t,e,i={}){const n=t.x!==i.x?-e:0,o=t.y!==i.y?-e:0,s=(t.x+t.w!==i.x+i.w?e:0)-n,r=(t.y+t.h!==i.y+i.h?e:0)-o;return{x:t.x+n,y:t.y+o,w:t.w+s,h:t.h+r,radius:t.radius}}Zo.id="point",Zo.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Zo.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class Jo extends Mn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:n}}=this,{inner:o,outer:s}=Yo(this),r=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?Ee:Xo;var a;t.save(),s.w===o.w&&s.h===o.h||(t.beginPath(),r(t,Ko(s,e,o)),t.clip(),r(t,Ko(o,-e,s)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),r(t,Ko(o,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,i){return qo(this,t,e,i)}inXRange(t,e){return qo(this,t,null,e)}inYRange(t,e){return qo(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+n)/2:e,y:o?i:(i+n)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}Jo.id="bar",Jo.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Jo.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Qo=Object.freeze({__proto__:null,ArcElement:zo,LineElement:$o,PointElement:Zo,BarElement:Jo});function ts(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function es(t){t.data.datasets.forEach(t=>{ts(t)})}var is={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void es(t);const o=t.width;t.data.datasets.forEach((e,s)=>{const{_data:r,indexAxis:a}=e,h=t.getDatasetMeta(s),l=r||e.data;if("y"===fi([a,t.options.indexAxis]))return;if(!h.controller.supportsDecimation)return;const c=t.scales[h.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let d,{start:u,count:p}=function(t,e){const i=e.length;let n,o=0;const{iScale:s}=t,{min:r,max:a,minDefined:h,maxDefined:l}=s.getUserBounds();return h&&(o=K(et(e,s.axis,r).lo,0,i-1)),{start:o,count:n=l?K(et(e,s.axis,a).hi+1,o,i)-o:i-o}}(h,l);if(p<=(n.threshold||4*o))ts(e);else{switch(i(r)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":d=function(t,e,i,n,o){const s=o.samples||n;if(s>=i)return t.slice(e,e+i);const r=[],a=(i-2)/(s-2);let h=0;const l=e+i-1;let c,d,u,p,f,m=e;for(r[h++]=t[m],c=0;c<s-2;c++){let n,o=0,s=0;const l=Math.floor((c+1)*a)+1+e,g=Math.min(Math.floor((c+2)*a)+1,i)+e,_=g-l;for(n=l;n<g;n++)o+=t[n].x,s+=t[n].y;o/=_,s/=_;const v=Math.floor(c*a)+1+e,y=Math.min(Math.floor((c+1)*a)+1,i)+e,{x:b,y:x}=t[m];for(u=p=-1,n=v;n<y;n++)(p=.5*Math.abs((b-o)*(t[n].y-x)-(b-t[n].x)*(s-x)))>u&&(u=p,d=t[n],f=n);r[h++]=d,m=f}return r[h++]=t[l],r}(l,u,p,o,n);break;case"min-max":d=function(t,e,n,o){let s,r,a,h,l,c,d,u,p,f,m=0,g=0;const _=[],v=e+n-1,y=t[e].x,b=t[v].x-y;for(s=e;s<e+n;++s){a=((r=t[s]).x-y)/b*o,h=r.y;const e=0|a;if(e===l)h<p?(p=h,c=s):h>f&&(f=h,d=s),m=(g*m+r.x)/++g;else{const n=s-1;if(!i(c)&&!i(d)){const e=Math.min(c,d),i=Math.max(c,d);e!==u&&e!==n&&_.push({...t[e],x:m}),i!==u&&i!==n&&_.push({...t[i],x:m})}s>0&&n!==u&&_.push(t[n]),_.push(r),l=e,g=0,p=f=h,c=d=u=s}}return _}(l,u,p,o);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=d}})},destroy(t){es(t)}};function ns(t,e,i,n){if(n)return;let o=e[t],s=i[t];return"angle"===t&&(o=q(o),s=q(s)),{property:t,start:o,end:s}}function os(t,e,i){for(;e>t;e--){const t=i[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function ss(t,e,i,n){return t&&e?n(t[i],e[i]):t?t[i]:e?e[i]:0}function rs(t,e){let i=[],o=!1;return n(t)?(o=!0,i=t):i=function(t,e){const{x:i=null,y:n=null}=t||{},o=e.points,s=[];return e.segments.forEach(({start:t,end:e})=>{e=os(t,e,o);const r=o[t],a=o[e];null!==n?(s.push({x:r.x,y:n}),s.push({x:a.x,y:n})):null!==i&&(s.push({x:i,y:r.y}),s.push({x:i,y:a.y}))}),s}(t,e),i.length?new $o({points:i,options:{tension:0},_loop:o,_fullLoop:o}):null}function as(t){return t&&!1!==t.fill}function hs(t,e,i){let n=t[e].fill;const o=[e];let r;if(!i)return n;for(;!1!==n&&-1===o.indexOf(n);){if(!s(n))return n;if(!(r=t[n]))return!1;if(r.visible)return n;o.push(n),n=r.fill}return!1}function ls(t,e,i){const n=function(t){const e=t.options,i=e.fill;let n=a(i&&i.target,i);return void 0===n&&(n=!!e.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(t);if(o(n))return!isNaN(n.value)&&n;let r=parseFloat(n);return s(r)&&Math.floor(r)===r?function(t,e,i,n){return"-"!==t&&"+"!==t||(i=e+i),!(i===e||i<0||i>=n)&&i}(n[0],e,r,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function cs(t,e,i){const n=[];for(let o=0;o<i.length;o++){const s=i[o],{first:r,last:a,point:h}=ds(s,e,"x");if(!(!h||r&&a))if(r)n.unshift(h);else if(t.push(h),!a)break}t.push(...n)}function ds(t,e,i){const n=t.interpolate(e,i);if(!n)return{};const o=n[i],s=t.segments,r=t.points;let a=!1,h=!1;for(let t=0;t<s.length;t++){const e=s[t],n=r[e.start][i],l=r[e.end][i];if(Q(o,n,l)){a=o===n,h=o===l;break}}return{first:a,last:h,point:n}}class us{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:n,y:o,radius:s}=this;return e=e||{start:0,end:M},t.arc(n,o,s,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:n}=this,o=t.angle;return{x:e+Math.cos(o)*n,y:i+Math.sin(o)*n,angle:o}}}function ps(t){const{chart:e,fill:i,line:n}=t;if(s(i))return function(t,e){const i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}(e,i);if("stack"===i)return function(t){const{scale:e,index:i,line:n}=t,o=[],s=n.segments,r=n.points,a=function(t,e){const i=[],n=t.getMatchingVisibleMetas("line");for(let t=0;t<n.length;t++){const o=n[t];if(o.index===e)break;o.hidden||i.unshift(o.dataset)}return i}(e,i);a.push(rs({x:null,y:e.bottom},n));for(let t=0;t<s.length;t++){const e=s[t];for(let t=e.start;t<=e.end;t++)cs(o,r[t],a)}return new $o({points:o,options:{}})}(t);if("shape"===i)return!0;const r=function(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:i}=t,n=e.options,s=e.getLabels().length,r=n.reverse?e.max:e.min,a=function(t,e,i){let n;return n="start"===t?r:"end"===t?e.options.reverse?e.min:e.max:o(t)?t.value:e.getBaseValue()}(i,e),h=[];if(n.grid.circular){const t=e.getPointPositionForValue(0,r);return new us({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(a)})}for(let t=0;t<s;++t)h.push(e.getPointPositionForValue(t,a));return h}(t):function(t){const{scale:e={},fill:i}=t,n=function(t,e){let i=null;return"start"===t?i=e.bottom:"end"===t?i=e.top:o(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}(i,e);if(s(n)){const t=e.isHorizontal();return{x:t?n:null,y:t?null:n}}return null}(t)}(t);return r instanceof us?r:rs(r,n)}function fs(t,e,i){const n=ps(e),{line:o,scale:s,axis:r}=e,a=o.options,h=a.fill,l=a.backgroundColor,{above:c=l,below:d=l}=h||{};n&&o.points.length&&(ke(t,i),function(t,e){const{line:i,target:n,above:o,below:s,area:r,scale:a}=e,h=i._loop?"angle":e.axis;t.save(),"x"===h&&s!==o&&(ms(t,n,r.top),gs(t,{line:i,target:n,color:o,scale:a,property:h}),t.restore(),t.save(),ms(t,n,r.bottom)),gs(t,{line:i,target:n,color:s,scale:a,property:h}),t.restore()}(t,{line:o,target:n,above:c,below:d,area:i,scale:s,axis:r}),Le(t))}function ms(t,e,i){const{segments:n,points:o}=e;let s=!0,r=!1;t.beginPath();for(const a of n){const{start:n,end:h}=a,l=o[n],c=o[os(n,h,o)];s?(t.moveTo(l.x,l.y),s=!1):(t.lineTo(l.x,i),t.lineTo(l.x,l.y)),(r=!!e.pathSegment(t,a,{move:r}))?t.closePath():t.lineTo(c.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function gs(t,e){const{line:i,target:n,property:o,color:s,scale:r}=e,a=function(t,e,i){const n=t.segments,o=t.points,s=e.points,r=[];for(const t of n){let{start:n,end:a}=t;a=os(n,a,o);const h=ns(i,o[n],o[a],t.loop);if(!e.segments){r.push({source:t,target:h,start:o[n],end:o[a]});continue}const l=ki(e,h);for(const e of l){const n=ns(i,s[e.start],s[e.end],e.loop),a=wi(t,o,n);for(const t of a)r.push({source:t,target:e,start:{[i]:ss(h,n,"start",Math.max)},end:{[i]:ss(h,n,"end",Math.min)}})}}return r}(i,n,o);for(const{source:e,target:h,start:l,end:c}of a){const{style:{backgroundColor:a=s}={}}=e,d=!0!==n;t.save(),t.fillStyle=a,_s(t,r,d&&ns(o,l,c)),t.beginPath();const u=!!i.pathSegment(t,e);let p;if(d){u?t.closePath():vs(t,n,c,o);const e=!!n.pathSegment(t,h,{move:u,reverse:!0});(p=u&&e)||vs(t,n,l,o)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function _s(t,e,i){const{top:n,bottom:o}=e.chart.chartArea,{property:s,start:r,end:a}=i||{};"x"===s&&(t.beginPath(),t.rect(r,n,a-r,o-n),t.clip())}function vs(t,e,i,n){const o=e.interpolate(i,n);o&&t.lineTo(o.x,o.y)}var ys={id:"filler",afterDatasetsUpdate(t,e,i){const n=(t.data.datasets||[]).length,o=[];let s,r,a,h;for(r=0;r<n;++r)h=null,(a=(s=t.getDatasetMeta(r)).dataset)&&a.options&&a instanceof $o&&(h={visible:t.isDatasetVisible(r),index:r,fill:ls(a,r,n),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=h,o.push(h);for(r=0;r<n;++r)(h=o[r])&&!1!==h.fill&&(h.fill=hs(o,r,i.propagate))},beforeDraw(t,e,i){const n="beforeDraw"===i.drawTime,o=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let e=o.length-1;e>=0;--e){const i=o[e].$filler;i&&(i.line.updateControlPoints(s,i.axis),n&&i.fill&&fs(t.ctx,i,s))}},beforeDatasetsDraw(t,e,i){if("beforeDatasetsDraw"!==i.drawTime)return;const n=t.getSortedVisibleDatasetMetas();for(let e=n.length-1;e>=0;--e){const i=n[e].$filler;as(i)&&fs(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,i){const n=e.meta.$filler;as(n)&&"beforeDatasetDraw"===i.drawTime&&fs(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const bs=(t,e)=>{let{boxHeight:i=e,boxWidth:n=e}=t;return t.usePointStyle&&(i=Math.min(i,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(e,i)}};class xs extends Mn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=c(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,i)=>t.sort(e,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,n=pi(i.font),o=n.size,s=this._computeTitleHeight(),{boxWidth:r,itemHeight:a}=bs(i,o);let h,l;e.font=n.string,this.isHorizontal()?(h=this.maxWidth,l=this._fitRows(s,o,r,a)+10):(l=this.maxHeight,h=this._fitCols(s,o,r,a)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(l,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,n){const{ctx:o,maxWidth:s,options:{labels:{padding:r}}}=this,a=this.legendHitBoxes=[],h=this.lineWidths=[0],l=n+r;let c=t;o.textAlign="left",o.textBaseline="middle";let d=-1,u=-l;return this.legendItems.forEach((t,p)=>{const f=i+e/2+o.measureText(t.text).width;(0===p||h[h.length-1]+f+2*r>s)&&(c+=l,h[h.length-(p>0?0:1)]=0,u+=l,d++),a[p]={left:0,top:u,row:d,width:f,height:n},h[h.length-1]+=f+r}),c}_fitCols(t,e,i,n){const{ctx:o,maxHeight:s,options:{labels:{padding:r}}}=this,a=this.legendHitBoxes=[],h=this.columnSizes=[],l=s-t;let c=r,d=0,u=0,p=0,f=0;return this.legendItems.forEach((t,s)=>{const m=i+e/2+o.measureText(t.text).width;s>0&&u+n+2*r>l&&(c+=d+r,h.push({width:d,height:u}),p+=d+r,f++,d=u=0),a[s]={left:p,top:u,col:f,width:m,height:n},d=Math.max(d,m),u+=n+r}),c+=d,h.push({width:d,height:u}),c}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:n},rtl:o}}=this,s=_i(o,this.left,this.width);if(this.isHorizontal()){let o=0,r=ut(i,this.left+n,this.right-this.lineWidths[o]);for(const a of e)o!==a.row&&(o=a.row,r=ut(i,this.left+n,this.right-this.lineWidths[o])),a.top+=this.top+t+n,a.left=s.leftForLtr(s.x(r),a.width),r+=a.width+n}else{let o=0,r=ut(i,this.top+t+n,this.bottom-this.columnSizes[o].height);for(const a of e)a.col!==o&&(o=a.col,r=ut(i,this.top+t+n,this.bottom-this.columnSizes[o].height)),a.top=r,a.left+=this.left+n,a.left=s.leftForLtr(s.x(a.left),a.width),r+=a.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;ke(t,this),this._draw(),Le(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:n}=this,{align:o,labels:s}=t,r=ee.color,h=_i(t.rtl,this.left,this.width),l=pi(s.font),{color:c,padding:d}=s,u=l.size,p=u/2;let f;this.drawTitle(),n.textAlign=h.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=l.string;const{boxWidth:m,boxHeight:g,itemHeight:_}=bs(s,u),v=this.isHorizontal(),y=this._computeTitleHeight();f=v?{x:ut(o,this.left+d,this.right-i[0]),y:this.top+d+y,line:0}:{x:this.left+d,y:ut(o,this.top+y+d,this.bottom-e[0].height),line:0},vi(this.ctx,t.textDirection);const b=_+d;this.legendItems.forEach((x,w)=>{n.strokeStyle=x.fontColor||c,n.fillStyle=x.fontColor||c;const k=n.measureText(x.text).width,L=h.textAlign(x.textAlign||(x.textAlign=s.textAlign)),T=m+p+k;let S=f.x,C=f.y;h.setWidth(this.width),v?w>0&&S+T+d>this.right&&(C=f.y+=b,f.line++,S=f.x=ut(o,this.left+d,this.right-i[f.line])):w>0&&C+b>this.bottom&&(S=f.x=S+e[f.line].width+d,f.line++,C=f.y=ut(o,this.top+y+d,this.bottom-e[f.line].height)),function(t,e,i){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;n.save();const o=a(i.lineWidth,1);if(n.fillStyle=a(i.fillStyle,r),n.lineCap=a(i.lineCap,"butt"),n.lineDashOffset=a(i.lineDashOffset,0),n.lineJoin=a(i.lineJoin,"miter"),n.lineWidth=o,n.strokeStyle=a(i.strokeStyle,r),n.setLineDash(a(i.lineDash,[])),s.usePointStyle){const r={radius:g*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:o},a=h.xPlus(t,m/2);xe(n,r,a,e+p,s.pointStyleWidth&&m)}else{const s=e+Math.max((u-g)/2,0),r=h.leftForLtr(t,m),a=di(i.borderRadius);n.beginPath(),Object.values(a).some(t=>0!==t)?Ee(n,{x:r,y:s,w:m,h:g,radius:a}):n.rect(r,s,m,g),n.fill(),0!==o&&n.stroke()}n.restore()}(h.x(S),C,x),S=pt(L,S+m+p,v?S+T:this.right,t.rtl),function(t,e,i){Ce(n,i.text,t,e+_/2,l,{strikethrough:i.hidden,textAlign:h.textAlign(i.textAlign)})}(h.x(S),C,x),v?f.x+=T+d:f.y+=b}),yi(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=pi(e.font),n=ui(e.padding);if(!e.display)return;const o=_i(t.rtl,this.left,this.width),s=this.ctx,r=e.position,a=i.size/2,h=n.top+a;let l,c=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),l=this.top+h,c=ut(t.align,c,this.right-d);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);l=h+ut(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const u=ut(r,c,c+d);s.textAlign=o.textAlign(dt(r)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=i.string,Ce(s,e.text,u,l,i)}_computeTitleHeight(){const t=this.options.title,e=pi(t.font),i=ui(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,n,o;if(Q(t,this.left,this.right)&&Q(e,this.top,this.bottom))for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(Q(t,(n=o[i]).left,n.left+n.width)&&Q(e,n.top,n.top+n.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const s=this._hoveredItem,r=(o=i,null!==(n=s)&&null!==o&&n.datasetIndex===o.datasetIndex&&n.index===o.index);s&&!r&&c(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&c(e.onHover,[t,i,this],this)}else i&&c(e.onClick,[t,i,this],this);var n,o}}var ws={id:"legend",_element:xs,start(t,e,i){const n=t.legend=new xs({ctx:t.ctx,options:i,chart:t});Vi.configure(t,n,i),Vi.addBox(t,n)},stop(t){Vi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const n=t.legend;Vi.configure(t,n,i),n.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const n=e.datasetIndex,o=i.chart;o.isDatasetVisible(n)?(o.hide(n),e.hidden=!0):(o.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:o,color:s}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const r=t.controller.getStyle(i?0:void 0),a=ui(r.borderWidth);return{text:e[t.index].label,fillStyle:r.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:r.borderCapStyle,lineDash:r.borderDash,lineDashOffset:r.borderDashOffset,lineJoin:r.borderJoinStyle,lineWidth:(a.width+a.height)/4,strokeStyle:r.borderColor,pointStyle:n||r.pointStyle,rotation:r.rotation,textAlign:o||r.textAlign,borderRadius:0,datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ks extends Mn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const o=n(i.text)?i.text.length:1;this._padding=ui(i.padding);const s=o*pi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:n,right:o,options:s}=this,r=s.align;let a,h,l,c=0;return this.isHorizontal()?(h=ut(r,i,o),l=e+t,a=o-i):("left"===s.position?(h=i+t,l=ut(r,n,e),c=-.5*C):(h=o-t,l=ut(r,e,n),c=.5*C),a=n-e),{titleX:h,titleY:l,maxWidth:a,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=pi(e.font),n=i.lineHeight/2+this._padding.top,{titleX:o,titleY:s,maxWidth:r,rotation:a}=this._drawArgs(n);Ce(t,e.text,0,0,i,{color:e.color,maxWidth:r,rotation:a,textAlign:dt(e.align),textBaseline:"middle",translation:[o,s]})}}var Ls={id:"title",_element:ks,start(t,e,i){!function(t,e){const i=new ks({ctx:t.ctx,options:e,chart:t});Vi.configure(t,i,e),Vi.addBox(t,i),t.titleBlock=i}(t,i)},stop(t){const e=t.titleBlock;Vi.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const n=t.titleBlock;Vi.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ts=new WeakMap;var Ss={id:"subtitle",start(t,e,i){const n=new ks({ctx:t.ctx,options:i,chart:t});Vi.configure(t,n,i),Vi.addBox(t,n),Ts.set(t,n)},stop(t){Vi.removeBox(t,Ts.get(t)),Ts.delete(t)},beforeUpdate(t,e,i){const n=Ts.get(t);Vi.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Cs={average(t){if(!t.length)return!1;let e,i,n=0,o=0,s=0;for(e=0,i=t.length;e<i;++e){const i=t[e].element;if(i&&i.hasValue()){const t=i.tooltipPosition();n+=t.x,o+=t.y,++s}}return{x:n/s,y:o/s}},nearest(t,e){if(!t.length)return!1;let i,n,o,s=e.x,r=e.y,a=Number.POSITIVE_INFINITY;for(i=0,n=t.length;i<n;++i){const n=t[i].element;if(n&&n.hasValue()){const t=G(e,n.getCenterPoint());t<a&&(a=t,o=n)}}if(o){const t=o.tooltipPosition();s=t.x,r=t.y}return{x:s,y:r}}};function Ms(t,e){return e&&(n(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Es(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Ps(t,e){const{element:i,datasetIndex:n,index:o}=e,s=t.getDatasetMeta(n).controller,{label:r,value:a}=s.getLabelAndValue(o);return{chart:t,label:r,parsed:s.getParsed(o),raw:t.data.datasets[n].data[o],formattedValue:a,dataset:s.getDataset(),dataIndex:o,datasetIndex:n,element:i}}function Ds(t,e){const i=t.chart.ctx,{body:n,footer:o,title:s}=t,{boxWidth:r,boxHeight:a}=e,h=pi(e.bodyFont),l=pi(e.titleFont),c=pi(e.footerFont),u=s.length,p=o.length,f=n.length,m=ui(e.padding);let g=m.height,_=0,v=n.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);v+=t.beforeBody.length+t.afterBody.length,u&&(g+=u*l.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),v&&(g+=f*(e.displayColors?Math.max(a,h.lineHeight):h.lineHeight)+(v-f)*h.lineHeight+(v-1)*e.bodySpacing),p&&(g+=e.footerMarginTop+p*c.lineHeight+(p-1)*e.footerSpacing);let y=0;const b=function(t){_=Math.max(_,i.measureText(t).width+y)};return i.save(),i.font=l.string,d(t.title,b),i.font=h.string,d(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?r+2+e.boxPadding:0,d(n,t=>{d(t.before,b),d(t.lines,b),d(t.after,b)}),y=0,i.font=c.string,d(t.footer,b),i.restore(),{width:_+=m.width,height:g}}function Os(t,e,i){const n=i.yAlign||e.yAlign||function(t,e){const{y:i,height:n}=e;return i<n/2?"top":i>t.height-n/2?"bottom":"center"}(t,i);return{xAlign:i.xAlign||e.xAlign||function(t,e,i,n){const{x:o,width:s}=i,{width:r,chartArea:{left:a,right:h}}=t;let l="center";return"center"===n?l=o<=(a+h)/2?"left":"right":o<=s/2?l="left":o>=r-s/2&&(l="right"),function(t,e,i,n){const{x:o,width:s}=n,r=i.caretSize+i.caretPadding;return"left"===t&&o+s+r>e.width||"right"===t&&o-s-r<0||void 0}(l,t,e,i)&&(l="center"),l}(t,e,i,n),yAlign:n}}function As(t,e,i,n){const{caretSize:o,caretPadding:s,cornerRadius:r}=t,{xAlign:a,yAlign:h}=i,l=o+s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:p}=di(r);let f=function(t,e){let{x:i,width:n}=t;return"right"===e?i-=n:"center"===e&&(i-=n/2),i}(e,a);const m=function(t,e,i){let{y:n,height:o}=t;return"top"===e?n+=i:n-="bottom"===e?o+i:o/2,n}(e,h,l);return"center"===h?"left"===a?f+=l:"right"===a&&(f-=l):"left"===a?f-=Math.max(c,u)+o:"right"===a&&(f+=Math.max(d,p)+o),{x:K(f,0,n.width-e.width),y:K(m,0,n.height-e.height)}}function Is(t,e,i){const n=ui(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-n.right:t.x+n.left}function zs(t){return Ms([],Es(t))}function Rs(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}class Ns extends Mn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&e.options.animation&&i.animations,o=new mn(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=(this,gi(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"})))}getTitle(t,e){const{callbacks:i}=e,n=i.beforeTitle.apply(this,[t]),o=i.title.apply(this,[t]),s=i.afterTitle.apply(this,[t]);let r=[];return r=Ms(r=Ms(r=Ms(r,Es(n)),Es(o)),Es(s))}getBeforeBody(t,e){return zs(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:i}=e,n=[];return d(t,t=>{const e={before:[],lines:[],after:[]},o=Rs(i,t);Ms(e.before,Es(o.beforeLabel.call(this,t))),Ms(e.lines,o.label.call(this,t)),Ms(e.after,Es(o.afterLabel.call(this,t))),n.push(e)}),n}getAfterBody(t,e){return zs(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:i}=e,n=i.beforeFooter.apply(this,[t]),o=i.footer.apply(this,[t]),s=i.afterFooter.apply(this,[t]);let r=[];return r=Ms(r=Ms(r=Ms(r,Es(n)),Es(o)),Es(s))}_createItems(t){const e=this._active,i=this.chart.data,n=[],o=[],s=[];let r,a,h=[];for(r=0,a=e.length;r<a;++r)h.push(Ps(this.chart,e[r]));return t.filter&&(h=h.filter((e,n,o)=>t.filter(e,n,o,i))),t.itemSort&&(h=h.sort((e,n)=>t.itemSort(e,n,i))),d(h,e=>{const i=Rs(t.callbacks,e);n.push(i.labelColor.call(this,e)),o.push(i.labelPointStyle.call(this,e)),s.push(i.labelTextColor.call(this,e))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=s,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),n=this._active;let o,s=[];if(n.length){const t=Cs[i.position].call(this,n,this._eventPosition);s=this._createItems(i),this.title=this.getTitle(s,i),this.beforeBody=this.getBeforeBody(s,i),this.body=this.getBody(s,i),this.afterBody=this.getAfterBody(s,i),this.footer=this.getFooter(s,i);const e=this._size=Ds(this,i),r=Object.assign({},t,e),a=Os(this.chart,i,r),h=As(i,r,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,o={opacity:1,x:h.x,y:h.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=s,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,n){const o=this.getCaretPosition(t,i,n);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:n,yAlign:o}=this,{caretSize:s,cornerRadius:r}=i,{topLeft:a,topRight:h,bottomLeft:l,bottomRight:c}=di(r),{x:d,y:u}=t,{width:p,height:f}=e;let m,g,_,v,y,b;return"center"===o?(y=u+f/2,"left"===n?(g=(m=d)-s,v=y+s,b=y-s):(g=(m=d+p)+s,v=y-s,b=y+s),_=m):(g="left"===n?d+Math.max(a,l)+s:"right"===n?d+p-Math.max(h,c)-s:this.caretX,"top"===o?(y=(v=u)-s,m=g-s,_=g+s):(y=(v=u+f)+s,m=g+s,_=g-s),b=v),{x1:m,x2:g,x3:_,y1:v,y2:y,y3:b}}drawTitle(t,e,i){const n=this.title,o=n.length;let s,r,a;if(o){const h=_i(i.rtl,this.x,this.width);for(t.x=Is(this,i.titleAlign,i),e.textAlign=h.textAlign(i.titleAlign),e.textBaseline="middle",s=pi(i.titleFont),r=i.titleSpacing,e.fillStyle=i.titleColor,e.font=s.string,a=0;a<o;++a)e.fillText(n[a],h.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+r,a+1===o&&(t.y+=i.titleMarginBottom-r)}}_drawColorBox(t,e,i,n,s){const r=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:h,boxWidth:l,boxPadding:c}=s,d=pi(s.bodyFont),u=Is(this,"left",s),p=n.x(u),f=h<d.lineHeight?(d.lineHeight-h)/2:0,m=e.y+f;if(s.usePointStyle){const e={radius:Math.min(l,h)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},i=n.leftForLtr(p,l)+l/2,o=m+h/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,be(t,e,i,o),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,be(t,e,i,o)}else{t.lineWidth=o(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const e=n.leftForLtr(p,l-c),i=n.leftForLtr(n.xPlus(p,1),l-c-2),a=di(r.borderRadius);Object.values(a).some(t=>0!==t)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,Ee(t,{x:e,y:m,w:l,h:h,radius:a}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),Ee(t,{x:i,y:m+1,w:l-2,h:h-2,radius:a}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(e,m,l,h),t.strokeRect(e,m,l,h),t.fillStyle=r.backgroundColor,t.fillRect(i,m+1,l-2,h-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:n}=this,{bodySpacing:o,bodyAlign:s,displayColors:r,boxHeight:a,boxWidth:h,boxPadding:l}=i,c=pi(i.bodyFont);let u=c.lineHeight,p=0;const f=_i(i.rtl,this.x,this.width),m=function(i){e.fillText(i,f.x(t.x+p),t.y+u/2),t.y+=u+o},g=f.textAlign(s);let _,v,y,b,x,w,k;for(e.textAlign=s,e.textBaseline="middle",e.font=c.string,t.x=Is(this,g,i),e.fillStyle=i.bodyColor,d(this.beforeBody,m),p=r&&"right"!==g?"center"===s?h/2+l:h+2+l:0,b=0,w=n.length;b<w;++b){for(_=n[b],v=this.labelTextColors[b],e.fillStyle=v,d(_.before,m),y=_.lines,r&&y.length&&(this._drawColorBox(e,t,b,f,i),u=Math.max(c.lineHeight,a)),x=0,k=y.length;x<k;++x)m(y[x]),u=c.lineHeight;d(_.after,m)}p=0,u=c.lineHeight,d(this.afterBody,m),t.y-=o}drawFooter(t,e,i){const n=this.footer,o=n.length;let s,r;if(o){const a=_i(i.rtl,this.x,this.width);for(t.x=Is(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=a.textAlign(i.footerAlign),e.textBaseline="middle",s=pi(i.footerFont),e.fillStyle=i.footerColor,e.font=s.string,r=0;r<o;++r)e.fillText(n[r],a.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+i.footerSpacing}}drawBackground(t,e,i,n){const{xAlign:o,yAlign:s}=this,{x:r,y:a}=t,{width:h,height:l}=i,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:p}=di(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(r+c,a),"top"===s&&this.drawCaret(t,e,i,n),e.lineTo(r+h-d,a),e.quadraticCurveTo(r+h,a,r+h,a+d),"center"===s&&"right"===o&&this.drawCaret(t,e,i,n),e.lineTo(r+h,a+l-p),e.quadraticCurveTo(r+h,a+l,r+h-p,a+l),"bottom"===s&&this.drawCaret(t,e,i,n),e.lineTo(r+u,a+l),e.quadraticCurveTo(r,a+l,r,a+l-u),"center"===s&&"left"===o&&this.drawCaret(t,e,i,n),e.lineTo(r,a+c),e.quadraticCurveTo(r,a,r+c,a),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,n=i&&i.x,o=i&&i.y;if(n||o){const i=Cs[t.position].call(this,this._active,this._eventPosition);if(!i)return;const s=this._size=Ds(this,t),r=Object.assign({},i,this._size),a=Os(e,t,r),h=As(t,r,a,e);n._to===h.x&&o._to===h.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const s=ui(e.padding),r=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&r&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,n,e),vi(t,e.textDirection),o.y+=s.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),yi(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,n=t.map(({datasetIndex:t,index:e})=>{const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}}),o=!u(i,n),s=this._positionChanged(n,e);(o||s)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],s=this._getActiveElements(t,o,e,i),r=this._positionChanged(s,t),a=e||!u(s,o)||r;return a&&(this._active=s,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,i,n){const o=this.options;if("mouseout"===t.type)return[];if(!n)return e;const s=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:i,caretY:n,options:o}=this,s=Cs[o.position].call(this,t,e);return!1!==s&&(i!==s.x||n!==s.y)}}Ns.positioners=Cs;var Bs={id:"tooltip",_element:Ns,positioners:Cs,afterInit(t,e,i){i&&(t.tooltip=new Ns({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",i))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:t,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,n=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return i[e.dataIndex]}return""},afterTitle:t,beforeBody:t,beforeLabel:t,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return i(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:t,afterBody:t,beforeFooter:t,footer:t,afterFooter:t}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Fs=Object.freeze({__proto__:null,Decimation:is,Filler:ys,Legend:ws,SubTitle:Ss,Title:Ls,Tooltip:Bs});class js extends Bn{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:i,label:n}of e)t[i]===n&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(i(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:K(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:function(t,e,i,n){const o=t.indexOf(e);return-1===o?((t,e,i,n)=>("string"==typeof e?(i=t.push(e)-1,n.unshift({index:i,label:e})):isNaN(e)&&(i=null),i))(t,e,i,n):o!==t.lastIndexOf(e)?i:o}(n,t,a(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,n=[];let o=this.getLabels();o=0===t&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let i=t;i<=e;i++)n.push({value:i});return n}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Hs(t,e,{horizontal:i,minRotation:n}){const o=$(n),s=(i?Math.sin(o):Math.cos(o))||.001,r=.75*e*(""+t).length;return Math.min(e/s,r)}js.id="category",js.defaults={ticks:{callback:js.prototype.getLabelForValue}};class Us extends Bn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return i(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:o}=this;const s=t=>n=e?n:t,r=t=>o=i?o:t;if(t){const t=R(n),e=R(o);t<0&&e<0?r(0):t>0&&e>0&&s(0)}if(n===o){let e=1;(o>=Number.MAX_SAFE_INTEGER||n<=Number.MIN_SAFE_INTEGER)&&(e=Math.abs(.05*o)),r(o+e),t||s(n-e)}this.min=n,this.max=o}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:i,stepSize:n}=t;return n?(e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1)>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();const o=function(t,e){const n=[],{bounds:o,step:s,min:r,max:a,precision:h,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=t,p=s||1,f=c-1,{min:m,max:g}=e,_=!i(r),v=!i(a),y=!i(l),b=(g-m)/(d+1);let x,w,k,L,T=N((g-m)/f/p)*p;if(T<1e-14&&!_&&!v)return[{value:m},{value:g}];(L=Math.ceil(g/T)-Math.floor(m/T))>f&&(T=N(L*T/f/p)*p),i(h)||(x=Math.pow(10,h),T=Math.ceil(T*x)/x),"ticks"===o?(w=Math.floor(m/T)*T,k=Math.ceil(g/T)*T):(w=m,k=g),_&&v&&s&&H((a-r)/s,T/1e3)?(T=(a-r)/(L=Math.round(Math.min((a-r)/T,c))),w=r,k=a):y?(w=_?r:w,T=((k=v?a:k)-w)/(L=l-1)):L=j(L=(k-w)/T,Math.round(L),T/1e3)?Math.round(L):Math.ceil(L);const S=Math.max(Z(T),Z(w));x=Math.pow(10,i(h)?S:h),w=Math.round(w*x)/x,k=Math.round(k*x)/x;let C=0;for(_&&(u&&w!==r?(n.push({value:r}),w<r&&C++,j(Math.round((w+C*T)*x)/x,r,Hs(r,b,t))&&C++):w<r&&C++);C<L;++C)n.push({value:Math.round((w+C*T)*x)/x});return v&&u&&k!==a?n.length&&j(n[n.length-1].value,a,Hs(a,b,t))?n[n.length-1].value=a:n.push({value:a}):v&&k!==a||n.push({value:k}),n}({maxTicks:n=Math.max(2,n),bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&U(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const n=(i-e)/Math.max(t.length-1,1)/2;e-=n,i+=n}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return si(t,this.chart.options.locale,this.options.ticks.format)}}class $s extends Us{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=s(t)?t:0,this.max=s(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=$(this.options.ticks.minRotation),n=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/n))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function Ws(t){return 1==t/Math.pow(10,Math.floor(z(t)))}$s.id="linear",$s.defaults={ticks:{callback:Pn.formatters.numeric}};class Zs extends Bn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Us.prototype.parse.apply(this,[t,e]);if(0!==i)return s(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=s(t)?Math.max(0,t):null,this.max=s(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,n=this.max;const o=e=>i=t?i:e,s=t=>n=e?n:t,r=(t,e)=>Math.pow(10,Math.floor(z(t))+e);i===n&&(i<=0?(o(1),s(10)):(o(r(i,-1)),s(r(n,1)))),i<=0&&o(r(n,-1)),n<=0&&s(r(i,1)),this._zero&&this.min!==this._suggestedMin&&i===r(this.min,0)&&o(r(i,-1)),this.min=i,this.max=n}buildTicks(){const t=this.options,e=function(t,e){const i=Math.floor(z(e.max)),n=Math.ceil(e.max/Math.pow(10,i)),o=[];let s=r(t.min,Math.pow(10,Math.floor(z(e.min)))),a=Math.floor(z(s)),h=Math.floor(s/Math.pow(10,a)),l=a<0?Math.pow(10,Math.abs(a)):1;do{o.push({value:s,major:Ws(s)}),10===++h&&(h=1,l=++a>=0?1:l),s=Math.round(h*Math.pow(10,a)*l)/l}while(a<i||a===i&&h<n);const c=r(t.max,s);return o.push({value:c,major:Ws(s)}),o}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&U(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":si(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=z(t),this._valueRange=z(this.max)-z(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(z(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function Vs(t){const e=t.ticks;if(e.display&&t.display){const t=ui(e.backdropPadding);return a(e.font&&e.font.size,ee.font.size)+t.height}return 0}function Gs(t,e,i,n,o){return t===n||t===o?{start:e-i/2,end:e+i/2}:t<n||t>o?{start:e-i,end:e}:{start:e,end:e+i}}function Ys(t,e,i,n,o){const s=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i));let a=0,h=0;n.start<e.l?(a=(e.l-n.start)/s,t.l=Math.min(t.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),o.start<e.t?(h=(e.t-o.start)/r,t.t=Math.min(t.t,e.t-h)):o.end>e.b&&(h=(o.end-e.b)/r,t.b=Math.max(t.b,e.b+h))}function qs(t){return 0===t||180===t?"center":t<180?"left":"right"}function Xs(t,e,i){return"right"===i?t-=e:"center"===i&&(t-=e/2),t}function Ks(t,e,i){return 90===i||270===i?t-=e/2:(i>270||i<90)&&(t-=e),t}function Js(t,e,i,n){const{ctx:o}=t;if(i)o.arc(t.xCenter,t.yCenter,e,0,M);else{let i=t.getPointPosition(0,e);o.moveTo(i.x,i.y);for(let s=1;s<n;s++)i=t.getPointPosition(s,e),o.lineTo(i.x,i.y)}}Zs.id="logarithmic",Zs.defaults={ticks:{callback:Pn.formatters.logarithmic,major:{enabled:!0}}};class Qs extends Us{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ui(Vs(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=s(t)&&!isNaN(t)?t:0,this.max=s(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Vs(this.options))}generateTickLabels(t){Us.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const i=c(this.options.pointLabels.callback,[t,e],this);return i||0===i?i:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){const t=this.options;t.display&&t.pointLabels.display?function(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),o=[],s=[],r=t._pointLabels.length,a=t.options.pointLabels,h=a.centerPointLabels?C/r:0;for(let u=0;u<r;u++){const r=a.setContext(t.getPointLabelContext(u));s[u]=r.padding;const p=t.getPointPosition(u,t.drawingArea+s[u],h),f=pi(r.font),m=(l=t.ctx,c=f,d=n(d=t._pointLabels[u])?d:[d],{w:_e(l,c.string,d),h:d.length*c.lineHeight});o[u]=m;const g=q(t.getIndexAngle(u)+h),_=Math.round(W(g));Ys(i,e,g,Gs(_,p.x,m.w,0,180),Gs(_,p.y,m.h,90,270))}var l,c,d;t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=function(t,e,i){const n=[],o=t._pointLabels.length,s=t.options,r=Vs(s)/2,a=t.drawingArea,h=s.pointLabels.centerPointLabels?C/o:0;for(let s=0;s<o;s++){const o=t.getPointPosition(s,a+r+i[s],h),l=Math.round(W(q(o.angle+O))),c=e[s],d=Ks(o.y,c.h,l),u=qs(l),p=Xs(o.x,c.w,u);n.push({x:o.x,y:d,textAlign:u,left:p,top:d,right:p+c.w,bottom:d+c.h})}return n}(t,o,s)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,n))}getIndexAngle(t){return q(t*(M/(this._pointLabels.length||1))+$(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(i(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(i(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function(t,e,i){return gi(t,{label:i,index:e,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const n=this.getIndexAngle(t)-O+i;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:n,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:n,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Js(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:o}=e,s=this._pointLabels.length;let r,a,h;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:o}}=t;for(let s=e-1;s>=0;s--){const e=o.setContext(t.getPointLabelContext(s)),r=pi(e.font),{x:a,y:h,textAlign:l,left:c,top:d,right:u,bottom:p}=t._pointLabelItems[s],{backdropColor:f}=e;if(!i(f)){const t=di(e.borderRadius),i=ui(e.backdropPadding);n.fillStyle=f;const o=c-i.left,s=d-i.top,r=u-c+i.width,a=p-d+i.height;Object.values(t).some(t=>0!==t)?(n.beginPath(),Ee(n,{x:o,y:s,w:r,h:a,radius:t}),n.fill()):n.fillRect(o,s,r,a)}Ce(n,t._pointLabels[s],a,h+r.lineHeight/2,r,{color:e.color,textAlign:l,textBaseline:"middle"})}}(this,s),o.display&&this.ticks.forEach((t,e)=>{0!==e&&(a=this.getDistanceFromCenterForValue(t.value),function(t,e,i,n){const o=t.ctx,s=e.circular,{color:r,lineWidth:a}=e;!s&&!n||!r||!a||i<0||(o.save(),o.strokeStyle=r,o.lineWidth=a,o.setLineDash(e.borderDash),o.lineDashOffset=e.borderDashOffset,o.beginPath(),Js(t,i,s,n),o.closePath(),o.stroke(),o.restore())}(this,o.setContext(this.getContext(e-1)),a,s))}),n.display){for(t.save(),r=s-1;r>=0;r--){const i=n.setContext(this.getPointLabelContext(r)),{color:o,lineWidth:s}=i;s&&o&&(t.lineWidth=s,t.strokeStyle=o,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),h=this.getPointPosition(r,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let o,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((n,r)=>{if(0===r&&!e.reverse)return;const a=i.setContext(this.getContext(r)),h=pi(a.font);if(o=this.getDistanceFromCenterForValue(this.ticks[r].value),a.showLabelBackdrop){t.font=h.string,s=t.measureText(n.label).width,t.fillStyle=a.backdropColor;const e=ui(a.backdropPadding);t.fillRect(-s/2-e.left,-o-h.size/2-e.top,s+e.width,h.size+e.height)}Ce(t,n.label,0,-o,h,{color:a.color})}),t.restore()}drawTitle(){}}Qs.id="radialLinear",Qs.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Pn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}},Qs.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Qs.descriptors={angleLines:{_fallback:"grid"}};const tr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},er=Object.keys(tr);function ir(t,e){return t-e}function nr(t,e){if(i(e))return null;const n=t._adapter,{parser:o,round:r,isoWeekday:a}=t._parseOpts;let h=e;return"function"==typeof o&&(h=o(h)),s(h)||(h="string"==typeof o?n.parse(h,o):n.parse(h)),null===h?null:(r&&(h="week"!==r||!F(a)&&!0!==a?n.startOf(h,r):n.startOf(h,"isoWeek",a)),+h)}function or(t,e,i,n){const o=er.length;for(let s=er.indexOf(t);s<o-1;++s){const t=tr[er[s]],o=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(o*t.size))<=n)return er[s]}return er[o-1]}function sr(t,e,i){if(i){if(i.length){const{lo:n,hi:o}=tt(i,e);t[i[n]>=e?i[n]:i[o]]=!0}}else t[e]=!0}function rr(t,e,i){const n=[],o={},s=e.length;let r,a;for(r=0;r<s;++r)o[a=e[r]]=r,n.push({value:a,major:!1});return 0!==s&&i?function(t,e,i,n){const o=t._adapter,s=+o.startOf(e[0].value,n),r=e[e.length-1].value;let a,h;for(a=s;a<=r;a=+o.add(a,1,n))(h=i[a])>=0&&(e[h].major=!0);return e}(t,n,o,i):n}class ar extends Bn{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const i=t.time||(t.time={}),n=this._adapter=new mo._date(t.adapters.date);n.init(e),_(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:nr(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:n,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function h(t){r||isNaN(t.min)||(n=Math.min(n,t.min)),a||isNaN(t.max)||(o=Math.max(o,t.max))}r&&a||(h(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||h(this.getMinMax(!1))),n=s(n)&&!isNaN(n)?n:+e.startOf(Date.now(),i),o=s(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,n="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const o=this.min,s=nt(n,o,this.max);return this._unit=e.unit||(i.autoSkip?or(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):function(t,e,i,n,o){for(let s=er.length-1;s>=er.indexOf(i);s--){const i=er[s];if(tr[i].common&&t._adapter.diff(o,n,i)>=e-1)return i}return er[i?er.indexOf(i):0]}(this,s.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(t){for(let e=er.indexOf(t)+1,i=er.length;e<i;++e)if(tr[er[e]].common)return er[e]}(this._unit):void 0,this.initOffsets(n),t.reverse&&s.reverse(),rr(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t){let e,i,n=0,o=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),n=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),o=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);const s=t.length<3?.5:.25;n=K(n,0,s),o=K(o,0,s),this._offsets={start:n,end:o,factor:1/(n+1+o)}}_generate(){const t=this._adapter,e=this.min,i=this.max,n=this.options,o=n.time,s=o.unit||or(o.minUnit,e,i,this._getLabelCapacity(e)),r=a(o.stepSize,1),h="week"===s&&o.isoWeekday,l=F(h)||!0===h,c={};let d,u,p=e;if(l&&(p=+t.startOf(p,"isoWeek",h)),p=+t.startOf(p,l?"day":s),t.diff(i,e,s)>1e5*r)throw new Error(e+" and "+i+" are too far apart with stepSize of "+r+" "+s);const f="data"===n.ticks.source&&this.getDataTimestamps();for(d=p,u=0;d<i;d=+t.add(d,r,s),u++)sr(c,d,f);return d!==i&&"ticks"!==n.bounds&&1!==u||sr(c,d,f),Object.keys(c).sort((t,e)=>t-e).map(t=>+t)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}_tickFormatFunction(t,e,i,n){const o=this.options,s=o.time.displayFormats,r=this._unit,a=this._majorUnit,h=r&&s[r],l=a&&s[a],d=i[e],u=a&&l&&d&&d.major,p=this._adapter.format(t,n||(u?l:h)),f=o.ticks.callback;return f?c(f,[p,e,i],this):p}generateTickLabels(t){let e,i,n;for(e=0,i=t.length;e<i;++e)(n=t[e]).label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,n=$(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(n),s=Math.sin(n),r=this._resolveTickFontOptions(0).size;return{w:i*o+r*s,h:i*s+r*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,n=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,rr(this,[t],this._majorUnit),n),s=this._getLabelSize(o),r=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return r>0?r:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,e=n.length;t<e;++t)i=i.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const n=this.getLabels();for(e=0,i=n.length;e<i;++e)t.push(nr(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return at(t.sort(ir))}}function hr(t,e,i){let n,o,s,r,a=0,h=t.length-1;i?(e>=t[a].pos&&e<=t[h].pos&&({lo:a,hi:h}=et(t,"pos",e)),({pos:n,time:s}=t[a]),({pos:o,time:r}=t[h])):(e>=t[a].time&&e<=t[h].time&&({lo:a,hi:h}=et(t,"time",e)),({time:n,pos:s}=t[a]),({time:o,pos:r}=t[h]));const l=o-n;return l?s+(r-s)*(e-n)/l:s}ar.id="time",ar.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class lr extends ar{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=hr(e,this.min),this._tableRange=hr(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,n=[],o=[];let s,r,a,h,l;for(s=0,r=t.length;s<r;++s)(h=t[s])>=e&&h<=i&&n.push(h);if(n.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(s=0,r=n.length;s<r;++s)l=n[s+1],a=n[s-1],h=n[s],Math.round((l+a)/2)!==h&&o.push({time:h,pos:s/(r-1)});return o}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t}getDecimalForValue(t){return(hr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return hr(this._table,i*this._tableRange+this._minPos,!0)}}lr.id="timeseries",lr.defaults=ar.defaults;var cr=Object.freeze({__proto__:null,CategoryScale:js,LinearScale:$s,LogarithmicScale:Zs,RadialLinearScale:Qs,TimeScale:ar,TimeSeriesScale:lr});return co.register(Do,cr,Qo,Fs),co.helpers={...Mi},co._adapters=mo,co.Animation=pn,co.Animations=mn,co.animator=gt,co.controllers=jn.controllers.items,co.DatasetController=Cn,co.Element=Mn,co.elements=Qo,co.Interaction=Ii,co.layouts=Vi,co.platforms=cn,co.Scale=Bn,co.Ticks=Pn,Object.assign(co,Do,cr,Qo,Fs,cn),co.Chart=co,"undefined"!=typeof window&&(window.Chart=co),co}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){function e(t){var e=t.parent();t.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),e.before(t).remove()}function i(t){var e=t.parent(),i=e.find(".minicolors-panel"),o=t.data("minicolors-settings");!t.data("minicolors-initialized")||t.prop("disabled")||e.hasClass("minicolors-inline")||e.hasClass("minicolors-focus")||(n(),e.addClass("minicolors-focus"),i.animate?i.stop(!0,!0).fadeIn(o.showSpeed,function(){o.show&&o.show.call(t.get(0))}):(i.show(),o.show&&o.show.call(t.get(0))))}function n(){t(".minicolors-focus").each(function(){var e=t(this),i=e.find(".minicolors-input"),n=e.find(".minicolors-panel"),o=i.data("minicolors-settings");n.animate?n.fadeOut(o.hideSpeed,function(){o.hide&&o.hide.call(i.get(0)),e.removeClass("minicolors-focus")}):(n.hide(),o.hide&&o.hide.call(i.get(0)),e.removeClass("minicolors-focus"))})}function o(t,e,i){var n,o,r,a,h,l=t.parents(".minicolors").find(".minicolors-input"),c=l.data("minicolors-settings"),d=t.find("[class$=-picker]"),u=t.offset().left,p=t.offset().top,f=Math.round(e.pageX-u),m=Math.round(e.pageY-p),g=i?c.animationSpeed:0;e.originalEvent.changedTouches&&(f=e.originalEvent.changedTouches[0].pageX-u,m=e.originalEvent.changedTouches[0].pageY-p),f<0&&(f=0),m<0&&(m=0),f>t.width()&&(f=t.width()),m>t.height()&&(m=t.height()),t.parent().is(".minicolors-slider-wheel")&&d.parent().is(".minicolors-grid")&&(n=75-f,o=75-m,r=Math.sqrt(n*n+o*o),(a=Math.atan2(o,n))<0&&(a+=2*Math.PI),r>75&&(r=75,f=75-75*Math.cos(a),m=75-75*Math.sin(a)),f=Math.round(f),m=Math.round(m)),h={top:m+"px"},t.is(".minicolors-grid")&&(h.left=f+"px"),d.animate?d.stop(!0).animate(h,g,c.animationEasing,function(){s(l,t)}):(d.css(h),s(l,t))}function s(t,e){function i(t,e){var i,n;return t.length&&e?(i=t.offset().left,n=t.offset().top,{x:i-e.offset().left+t.outerWidth()/2,y:n-e.offset().top+t.outerHeight()/2}):null}var n,o,s,a,l,c,d,u=t.val(),f=t.attr("data-opacity"),m=t.parent(),g=t.data("minicolors-settings"),_=m.find(".minicolors-input-swatch"),y=m.find(".minicolors-grid"),b=m.find(".minicolors-slider"),x=m.find(".minicolors-opacity-slider"),w=y.find("[class$=-picker]"),k=b.find("[class$=-picker]"),L=x.find("[class$=-picker]"),T=i(w,y),S=i(k,b),C=i(L,x);if(e.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(g.control){case"wheel":a=y.width()/2-T.x,l=y.height()/2-T.y,c=Math.sqrt(a*a+l*l),(d=Math.atan2(l,a))<0&&(d+=2*Math.PI),c>75&&(c=75,T.x=69-75*Math.cos(d),T.y=69-75*Math.sin(d)),o=p(c/.75,0,100),u=v({h:n=p(180*d/Math.PI,0,360),s:o,b:s=p(100-Math.floor(S.y*(100/b.height())),0,100)}),b.css("backgroundColor",v({h:n,s:o,b:100}));break;case"saturation":u=v({h:n=p(parseInt(T.x*(360/y.width()),10),0,360),s:o=p(100-Math.floor(S.y*(100/b.height())),0,100),b:s=p(100-Math.floor(T.y*(100/y.height())),0,100)}),b.css("backgroundColor",v({h:n,s:100,b:s})),m.find(".minicolors-grid-inner").css("opacity",o/100);break;case"brightness":u=v({h:n=p(parseInt(T.x*(360/y.width()),10),0,360),s:o=p(100-Math.floor(T.y*(100/y.height())),0,100),b:s=p(100-Math.floor(S.y*(100/b.height())),0,100)}),b.css("backgroundColor",v({h:n,s:o,b:100})),m.find(".minicolors-grid-inner").css("opacity",1-s/100);break;default:u=v({h:n=p(360-parseInt(S.y*(360/b.height()),10),0,360),s:o=p(Math.floor(T.x*(100/y.width())),0,100),b:s=p(100-Math.floor(T.y*(100/y.height())),0,100)}),y.css("backgroundColor",v({h:n,s:100,b:100}))}r(t,u,f=g.opacity?parseFloat(1-C.y/x.height()).toFixed(2):1)}else _.find("span").css({backgroundColor:u,opacity:f}),h(t,u,f)}function r(t,e,i){var n,o=t.parent(),s=t.data("minicolors-settings"),r=o.find(".minicolors-input-swatch");s.opacity&&t.attr("data-opacity",i),"rgb"===s.format?(n=f(e)?d(e,!0):y(c(e,!0)),i=""===t.attr("data-opacity")?1:p(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),!isNaN(i)&&s.opacity||(i=1),e=t.minicolors("rgbObject").a<=1&&n&&s.opacity?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(i)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"):(f(e)&&(e=g(e)),e=l(e,s.letterCase)),t.val(e),r.find("span").css({backgroundColor:e,opacity:i}),h(t,e,i)}function a(e,i){var n,o,s,r,a,_,b,x,w,k,L=e.parent(),T=e.data("minicolors-settings"),S=L.find(".minicolors-input-swatch"),C=L.find(".minicolors-grid"),M=L.find(".minicolors-slider"),E=L.find(".minicolors-opacity-slider"),P=C.find("[class$=-picker]"),D=M.find("[class$=-picker]"),O=E.find("[class$=-picker]");switch(f(e.val())?(n=g(e.val()),(a=p(parseFloat(m(e.val())).toFixed(2),0,1))&&e.attr("data-opacity",a)):n=l(c(e.val(),!0),T.letterCase),n||(n=l(u(T.defaultValue,!0),T.letterCase)),o=function(t){var e=function(t){var e={h:0,s:0,b:0},i=Math.min(t.r,t.g,t.b),n=Math.max(t.r,t.g,t.b),o=n-i;e.b=n,e.s=0!==n?255*o/n:0,0!==e.s?t.r===n?e.h=(t.g-t.b)/o:t.g===n?e.h=2+(t.b-t.r)/o:e.h=4+(t.r-t.g)/o:e.h=-1;e.h*=60,e.h<0&&(e.h+=360);return e.s*=100/255,e.b*=100/255,e}(y(t));0===e.s&&(e.h=360);return e}(n),r=T.keywords?t.map(T.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],_=""!==e.val()&&t.inArray(e.val().toLowerCase(),r)>-1?l(e.val()):f(e.val())?d(e.val()):n,i||e.val(_),T.opacity&&(s=""===e.attr("data-opacity")?1:p(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),isNaN(s)&&(s=1),e.attr("data-opacity",s),S.find("span").css("opacity",s),x=p(E.height()-E.height()*s,0,E.height()),O.css("top",x+"px")),"transparent"===e.val().toLowerCase()&&S.find("span").css("opacity",0),S.find("span").css("backgroundColor",n),T.control){case"wheel":w=p(Math.ceil(.75*o.s),0,C.height()/2),k=o.h*Math.PI/180,b=p(75-Math.cos(k)*w,0,C.width()),x=p(75-Math.sin(k)*w,0,C.height()),P.css({top:x+"px",left:b+"px"}),x=150-o.b/(100/C.height()),""===n&&(x=0),D.css("top",x+"px"),M.css("backgroundColor",v({h:o.h,s:o.s,b:100}));break;case"saturation":b=p(5*o.h/12,0,150),x=p(C.height()-Math.ceil(o.b/(100/C.height())),0,C.height()),P.css({top:x+"px",left:b+"px"}),x=p(M.height()-o.s*(M.height()/100),0,M.height()),D.css("top",x+"px"),M.css("backgroundColor",v({h:o.h,s:100,b:o.b})),L.find(".minicolors-grid-inner").css("opacity",o.s/100);break;case"brightness":b=p(5*o.h/12,0,150),x=p(C.height()-Math.ceil(o.s/(100/C.height())),0,C.height()),P.css({top:x+"px",left:b+"px"}),x=p(M.height()-o.b*(M.height()/100),0,M.height()),D.css("top",x+"px"),M.css("backgroundColor",v({h:o.h,s:o.s,b:100})),L.find(".minicolors-grid-inner").css("opacity",1-o.b/100);break;default:b=p(Math.ceil(o.s/(100/C.width())),0,C.width()),x=p(C.height()-Math.ceil(o.b/(100/C.height())),0,C.height()),P.css({top:x+"px",left:b+"px"}),x=p(M.height()-o.h/(360/M.height()),0,M.height()),D.css("top",x+"px"),C.css("backgroundColor",v({h:o.h,s:100,b:100}))}e.data("minicolors-initialized")&&h(e,_,s)}function h(t,e,i){var n,o,s,r=t.data("minicolors-settings"),a=t.data("minicolors-lastChange");if(!a||a.value!==e||a.opacity!==i){if(t.data("minicolors-lastChange",{value:e,opacity:i}),r.swatches&&0!==r.swatches.length){for(n=f(e)?d(e,!0):y(e),o=-1,s=0;s<r.swatches.length;++s)if(n.r===r.swatches[s].r&&n.g===r.swatches[s].g&&n.b===r.swatches[s].b&&n.a===r.swatches[s].a){o=s;break}t.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==o&&t.parent().find(".minicolors-swatches .minicolors-swatch").eq(s).addClass("selected")}r.change&&(r.changeDelay?(clearTimeout(t.data("minicolors-changeTimeout")),t.data("minicolors-changeTimeout",setTimeout(function(){r.change.call(t.get(0),e,i)},r.changeDelay))):r.change.call(t.get(0),e,i)),t.trigger("change").trigger("input")}}function l(t,e){return"uppercase"===e?t.toUpperCase():t.toLowerCase()}function c(t,e){return(t=t.replace(/^#/g,"")).match(/^[A-F0-9]{3,6}/gi)?3!==t.length&&6!==t.length?"":(3===t.length&&e&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t):""}function d(t,e){var i=t.replace(/[^\d,.]/g,"").split(",");return i[0]=p(parseInt(i[0],10),0,255),i[1]=p(parseInt(i[1],10),0,255),i[2]=p(parseInt(i[2],10),0,255),void 0!==i[3]&&(i[3]=p(parseFloat(i[3],10),0,1)),e?void 0!==i[3]?{r:i[0],g:i[1],b:i[2],a:i[3]}:{r:i[0],g:i[1],b:i[2]}:void 0!==i[3]&&i[3]<=1?"rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")":"rgb("+i[0]+", "+i[1]+", "+i[2]+")"}function u(t,e){return f(t)?d(t):c(t,e)}function p(t,e,i){return t<e&&(t=e),t>i&&(t=i),t}function f(t){var e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!e||4!==e.length)}function m(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===t.length?t[4]:"1"}function g(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}function _(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(i,function(t,e){1===e.length&&(i[t]="0"+e)}),"#"+i.join("")}function v(t){return _(function(t){var e={},i=Math.round(t.h),n=Math.round(255*t.s/100),o=Math.round(255*t.b/100);if(0===n)e.r=e.g=e.b=o;else{var s=o,r=(255-n)*o/255,a=i%60*(s-r)/60;360===i&&(i=0),i<60?(e.r=s,e.b=r,e.g=r+a):i<120?(e.g=s,e.b=r,e.r=s-a):i<180?(e.g=s,e.r=r,e.b=r+a):i<240?(e.b=s,e.r=r,e.g=s-a):i<300?(e.b=s,e.g=r,e.r=r+a):i<360?(e.r=s,e.g=r,e.b=s-a):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}(t))}function y(t){return{r:(t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}}t.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom",show:null,showSpeed:100,theme:"default",swatches:[]}},t.extend(t.fn,{minicolors:function(o,s){switch(o){case"destroy":return t(this).each(function(){e(t(this))}),t(this);case"hide":return n(),t(this);case"opacity":return void 0===s?t(this).attr("data-opacity"):(t(this).each(function(){a(t(this).attr("data-opacity",s))}),t(this));case"rgbObject":return function(e){var i,n=t(e).attr("data-opacity");if(f(t(e).val()))i=d(t(e).val(),!0);else{var o=c(t(e).val(),!0);i=y(o)}if(!i)return null;void 0!==n&&t.extend(i,{a:parseFloat(n)});return i}(t(this));case"rgbString":case"rgbaString":return function(e,i){var n,o=t(e).attr("data-opacity");if(f(t(e).val()))n=d(t(e).val(),!0);else{var s=c(t(e).val(),!0);n=y(s)}if(!n)return null;void 0===o&&(o=1);return i?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(o)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"}(t(this),"rgbaString"===o);case"settings":return void 0===s?t(this).data("minicolors-settings"):(t(this).each(function(){var i=t(this).data("minicolors-settings")||{};e(t(this)),t(this).minicolors(t.extend(!0,i,s))}),t(this));case"show":return i(t(this).eq(0)),t(this);case"value":return void 0===s?t(this).val():(t(this).each(function(){"object"==typeof s&&null!==s?(void 0!==s.opacity&&t(this).attr("data-opacity",p(s.opacity,0,1)),s.color&&t(this).val(s.color)):t(this).val(s),a(t(this))}),t(this));default:return"create"!==o&&(s=o),t(this).each(function(){!function(e,i){var n,o,s,r,h,l,u,p=t('<div class="minicolors" />'),m=t.minicolors.defaults;if(e.data("minicolors-initialized"))return;i=t.extend(!0,{},m,i),p.addClass("minicolors-theme-"+i.theme).toggleClass("minicolors-with-opacity",i.opacity),void 0!==i.position&&t.each(i.position.split(" "),function(){p.addClass("minicolors-position-"+this)});o="rgb"===i.format?i.opacity?"25":"20":i.keywords?"11":"7";e.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",i).prop("size",o).wrap(p).after('<div class="minicolors-panel minicolors-slider-'+i.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),i.inline||(e.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),e.next(".minicolors-input-swatch").on("click",function(t){t.preventDefault(),e.focus()}));if((l=e.parent().find(".minicolors-panel")).on("selectstart",function(){return!1}).end(),i.swatches&&0!==i.swatches.length)for(l.addClass("minicolors-with-swatches"),s=t('<ul class="minicolors-swatches"></ul>').appendTo(l),u=0;u<i.swatches.length;++u)"object"===t.type(i.swatches[u])?(n=i.swatches[u].name,r=i.swatches[u].color):(n="",r=i.swatches[u]),h=r,r=f(r)?d(r,!0):y(c(r,!0)),t('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color" title="'+n+'"></span></li>').appendTo(s).data("swatch-color",h).find(".minicolors-swatch-color").css({backgroundColor:_(r),opacity:r.a}),i.swatches[u]=r;i.inline&&e.parent().addClass("minicolors-inline");a(e,!1),e.data("minicolors-initialized",!0)}(t(this),s)}),t(this)}}}),t([document]).on("mousedown.minicolors touchstart.minicolors",function(e){t(e.target).parents().add(e.target).hasClass("minicolors")||n()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(e){var i=t(this);e.preventDefault(),t(e.delegateTarget).data("minicolors-target",i),o(i,e,!0)}).on("mousemove.minicolors touchmove.minicolors",function(e){var i=t(e.delegateTarget).data("minicolors-target");i&&o(i,e)}).on("mouseup.minicolors touchend.minicolors",function(){t(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(e){e.preventDefault();var i=t(this),n=i.parents(".minicolors").find(".minicolors-input"),o=i.data("swatch-color");r(n,o,m(o)),a(n)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(e){var n=t(this).parent().find(".minicolors-input");e.preventDefault(),i(n)}).on("focus.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&i(e)}).on("blur.minicolors",".minicolors-input",function(){var e,i,n,o,s,r=t(this),a=r.data("minicolors-settings");r.data("minicolors-initialized")&&(e=a.keywords?t.map(a.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],s=""!==r.val()&&t.inArray(r.val().toLowerCase(),e)>-1?r.val():null===(n=f(r.val())?d(r.val(),!0):(i=c(r.val(),!0))?y(i):null)?a.defaultValue:"rgb"===a.format?a.opacity?d("rgba("+n.r+","+n.g+","+n.b+","+r.attr("data-opacity")+")"):d("rgb("+n.r+","+n.g+","+n.b+")"):_(n),o=a.opacity?r.attr("data-opacity"):1,"transparent"===s.toLowerCase()&&(o=0),r.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",o),r.val(s),""===r.val()&&r.val(u(a.defaultValue,!0)),r.val(l(r.val(),a.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(e){var i=t(this);if(i.data("minicolors-initialized"))switch(e.which){case 9:n();break;case 13:case 27:n(),i.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&a(e,!0)}).on("paste.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&setTimeout(function(){a(e,!0)},1)})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Cropper=e()}(this,function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?n(o,!0).forEach(function(e){i(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(o).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function s(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r="undefined"!=typeof window&&void 0!==window.document,a=r?window:{},h=!!r&&"ontouchstart"in a.document.documentElement,l=!!r&&"PointerEvent"in a,c="".concat("cropper","-crop"),d="".concat("cropper","-disabled"),u="".concat("cropper","-hidden"),p="".concat("cropper","-hide"),f="".concat("cropper","-invisible"),m="".concat("cropper","-modal"),g="".concat("cropper","-move"),_="".concat("cropper","Action"),v="".concat("cropper","Preview"),y=l?"pointerdown":h?"touchstart":"mousedown",b=l?"pointermove":h?"touchmove":"mousemove",x=l?"pointerup pointercancel":h?"touchend touchcancel":"mouseup",w=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,k=/^data:/,L=/^data:image\/jpeg;base64,/,T=/^img|canvas$/i,S={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},C=Number.isNaN||a.isNaN;function M(t){return"number"==typeof t&&!C(t)}var E=function(t){return t>0&&t<1/0};function P(t){return void 0===t}function D(e){return"object"===t(e)&&null!==e}var O=Object.prototype.hasOwnProperty;function A(t){if(!D(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&O.call(i,"isPrototypeOf")}catch(t){return!1}}function I(t){return"function"==typeof t}var z=Array.prototype.slice;function R(t){return Array.from?Array.from(t):z.call(t)}function N(t,e){return t&&I(e)&&(Array.isArray(t)||M(t.length)?R(t).forEach(function(i,n){e.call(t,i,n,t)}):D(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)})),t}var B=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return D(t)&&i.length>0&&i.forEach(function(e){D(e)&&Object.keys(e).forEach(function(i){t[i]=e[i]})}),t},F=/\.\d*(?:0|9){12}\d*$/;function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return F.test(t)?Math.round(t*e)/e:t}var H=/^width|height|left|top|marginLeft|marginTop$/;function U(t,e){var i=t.style;N(e,function(t,e){H.test(e)&&M(t)&&(t="".concat(t,"px")),i[e]=t})}function $(t,e){if(e)if(M(t.length))N(t,function(t){$(t,e)});else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function W(t,e){e&&(M(t.length)?N(t,function(t){W(t,e)}):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function Z(t,e,i){e&&(M(t.length)?N(t,function(t){Z(t,e,i)}):i?$(t,e):W(t,e))}var V=/([a-z\d])([A-Z])/g;function G(t){return t.replace(V,"$1-$2").toLowerCase()}function Y(t,e){return D(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(G(e)))}function q(t,e,i){D(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(G(e)),i)}var X=/\s\s*/,K=function(){var t=!1;if(r){var e=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});a.addEventListener("test",i,n),a.removeEventListener("test",i,n)}return t}();function J(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i;e.trim().split(X).forEach(function(e){if(!K){var s=t.listeners;s&&s[e]&&s[e][i]&&(o=s[e][i],delete s[e][i],0===Object.keys(s[e]).length&&delete s[e],0===Object.keys(s).length&&delete t.listeners)}t.removeEventListener(e,o,n)})}function Q(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i;e.trim().split(X).forEach(function(e){if(n.once&&!K){var s=t.listeners,r=void 0===s?{}:s;o=function(){delete r[e][i],t.removeEventListener(e,o,n);for(var s=arguments.length,a=new Array(s),h=0;h<s;h++)a[h]=arguments[h];i.apply(t,a)},r[e]||(r[e]={}),r[e][i]&&t.removeEventListener(e,r[e][i],n),r[e][i]=o,t.listeners=r}t.addEventListener(e,o,n)})}function tt(t,e,i){var n;return I(Event)&&I(CustomEvent)?n=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(n)}function et(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var it=a.location,nt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function ot(t){var e=t.match(nt);return null!==e&&(e[1]!==it.protocol||e[2]!==it.hostname||e[3]!==it.port)}function st(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function rt(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,o=t.translateX,s=t.translateY,r=[];M(o)&&0!==o&&r.push("translateX(".concat(o,"px)")),M(s)&&0!==s&&r.push("translateY(".concat(s,"px)")),M(e)&&0!==e&&r.push("rotate(".concat(e,"deg)")),M(i)&&1!==i&&r.push("scaleX(".concat(i,")")),M(n)&&1!==n&&r.push("scaleY(".concat(n,")"));var a=r.length?r.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function at(t,e){var i=t.pageX,n=t.pageY,s={endX:i,endY:n};return e?s:o({startX:i,startY:n},s)}function ht(t){var e=t.aspectRatio,i=t.height,n=t.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",s=E(n),r=E(i);if(s&&r){var a=i*e;"contain"===o&&a>n||"cover"===o&&a<n?i=n/e:n=i*e}else s?i=n/e:r&&(n=i*e);return{width:n,height:i}}var lt=String.fromCharCode;var ct=/^data:.*,/;function dt(t){var e,i=new DataView(t);try{var n,o,s;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var r=i.byteLength,a=2;a+1<r;){if(255===i.getUint8(a)&&225===i.getUint8(a+1)){o=a;break}a+=1}if(o){var h=o+10;if("Exif"===function(t,e,i){var n="";i+=e;for(var o=e;o<i;o+=1)n+=lt(t.getUint8(o));return n}(i,o+4,4)){var l=i.getUint16(h);if(((n=18761===l)||19789===l)&&42===i.getUint16(h+2,n)){var c=i.getUint32(h+4,n);c>=8&&(s=h+c)}}}if(s){var d,u,p=i.getUint16(s,n);for(u=0;u<p;u+=1)if(d=s+12*u+2,274===i.getUint16(d,n)){d+=8,e=i.getUint16(d,n),i.setUint16(d,1,n);break}}}catch(t){e=1}return e}var ut={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,n=this.cropper;$(n,u),W(t,u);var o={width:Math.max(i.offsetWidth,Number(e.minContainerWidth)||200),height:Math.max(i.offsetHeight,Number(e.minContainerHeight)||100)};this.containerData=o,U(n,{width:o.width,height:o.height}),$(t,u),W(n,u)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,n=Math.abs(e.rotate)%180==90,o=n?e.naturalHeight:e.naturalWidth,s=n?e.naturalWidth:e.naturalHeight,r=o/s,a=t.width,h=t.height;t.height*r>t.width?3===i?a=t.height*r:h=t.width/r:3===i?h=t.width/r:a=t.height*r;var l={aspectRatio:r,naturalWidth:o,naturalHeight:s,width:a,height:h};l.left=(t.width-a)/2,l.top=(t.height-h)/2,l.oldLeft=l.left,l.oldTop=l.top,this.canvasData=l,this.limited=1===i||2===i,this.limitCanvas(!0,!0),this.initialImageData=B({},e),this.initialCanvasData=B({},l)},limitCanvas:function(t,e){var i=this.options,n=this.containerData,o=this.canvasData,s=this.cropBoxData,r=i.viewMode,a=o.aspectRatio,h=this.cropped&&s;if(t){var l=Number(i.minCanvasWidth)||0,c=Number(i.minCanvasHeight)||0;r>1?(l=Math.max(l,n.width),c=Math.max(c,n.height),3===r&&(c*a>l?l=c*a:c=l/a)):r>0&&(l?l=Math.max(l,h?s.width:0):c?c=Math.max(c,h?s.height:0):h&&(l=s.width,(c=s.height)*a>l?l=c*a:c=l/a));var d=ht({aspectRatio:a,width:l,height:c});l=d.width,c=d.height,o.minWidth=l,o.minHeight=c,o.maxWidth=1/0,o.maxHeight=1/0}if(e)if(r>(h?0:1)){var u=n.width-o.width,p=n.height-o.height;o.minLeft=Math.min(0,u),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,u),o.maxTop=Math.max(0,p),h&&this.limited&&(o.minLeft=Math.min(s.left,s.left+(s.width-o.width)),o.minTop=Math.min(s.top,s.top+(s.height-o.height)),o.maxLeft=s.left,o.maxTop=s.top,2===r&&(o.width>=n.width&&(o.minLeft=Math.min(0,u),o.maxLeft=Math.max(0,u)),o.height>=n.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=n.width,o.maxTop=n.height},renderCanvas:function(t,e){var i=this.canvasData,n=this.imageData;if(e){var o=function(t){var e=t.width,i=t.height,n=t.degree;if(90==(n=Math.abs(n)%180))return{width:i,height:e};var o=n%90*Math.PI/180,s=Math.sin(o),r=Math.cos(o),a=e*r+i*s,h=e*s+i*r;return n>90?{width:h,height:a}:{width:a,height:h}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),s=o.width,r=o.height,a=i.width*(s/i.naturalWidth),h=i.height*(r/i.naturalHeight);i.left-=(a-i.width)/2,i.top-=(h-i.height)/2,i.width=a,i.height=h,i.aspectRatio=s/r,i.naturalWidth=s,i.naturalHeight=r,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,U(this.canvas,B({width:i.width,height:i.height},rt({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,n=i.naturalWidth*(e.width/e.naturalWidth),o=i.naturalHeight*(e.height/e.naturalHeight);B(i,{width:n,height:o,left:(e.width-n)/2,top:(e.height-o)/2}),U(this.image,B({width:i.width,height:i.height},rt(B({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,o={width:e.width,height:e.height};i&&(e.height*i>e.width?o.height=o.width/i:o.width=o.height*i),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*n),o.height=Math.max(o.minHeight,o.height*n),o.left=e.left+(e.width-o.width)/2,o.top=e.top+(e.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=B({},o)},limitCropBox:function(t,e){var i=this.options,n=this.containerData,o=this.canvasData,s=this.cropBoxData,r=this.limited,a=i.aspectRatio;if(t){var h=Number(i.minCropBoxWidth)||0,l=Number(i.minCropBoxHeight)||0,c=r?Math.min(n.width,o.width,o.width+o.left,n.width-o.left):n.width,d=r?Math.min(n.height,o.height,o.height+o.top,n.height-o.top):n.height;h=Math.min(h,n.width),l=Math.min(l,n.height),a&&(h&&l?l*a>h?l=h/a:h=l*a:h?l=h/a:l&&(h=l*a),d*a>c?d=c/a:c=d*a),s.minWidth=Math.min(h,c),s.minHeight=Math.min(l,d),s.maxWidth=c,s.maxHeight=d}e&&(r?(s.minLeft=Math.max(0,o.left),s.minTop=Math.max(0,o.top),s.maxLeft=Math.min(n.width,o.left+o.width)-s.width,s.maxTop=Math.min(n.height,o.top+o.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=n.width-s.width,s.maxTop=n.height-s.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&q(this.face,_,i.width>=e.width&&i.height>=e.height?"move":"all"),U(this.cropBox,B({width:i.width,height:i.height},rt({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),tt(this.element,"crop",this.getData())}},pt={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,n=e?this.crossOriginUrl:this.url,o=t.alt||"The image to preview",s=document.createElement("img");if(e&&(s.crossOrigin=e),s.src=n,s.alt=o,this.viewBox.appendChild(s),this.viewBoxImage=s,i){var r=i;"string"==typeof i?r=t.ownerDocument.querySelectorAll(i):i.querySelector&&(r=[i]),this.previews=r,N(r,function(t){var i=document.createElement("img");q(t,v,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=n,i.alt=o,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)})}},resetPreview:function(){N(this.previews,function(t){var e=Y(t,v);U(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(D(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(G(e)))}(t,v)})},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,n=i.width,o=i.height,s=t.width,r=t.height,a=i.left-e.left-t.left,h=i.top-e.top-t.top;this.cropped&&!this.disabled&&(U(this.viewBoxImage,B({width:s,height:r},rt(B({translateX:-a,translateY:-h},t)))),N(this.previews,function(e){var i=Y(e,v),l=i.width,c=i.height,d=l,u=c,p=1;n&&(u=o*(p=l/n)),o&&u>c&&(d=n*(p=c/o),u=c),U(e,{width:d,height:u}),U(e.getElementsByTagName("img")[0],B({width:s*p,height:r*p},rt(B({translateX:-a*p,translateY:-h*p},t))))}))}},ft={bind:function(){var t=this.element,e=this.options,i=this.cropper;I(e.cropstart)&&Q(t,"cropstart",e.cropstart),I(e.cropmove)&&Q(t,"cropmove",e.cropmove),I(e.cropend)&&Q(t,"cropend",e.cropend),I(e.crop)&&Q(t,"crop",e.crop),I(e.zoom)&&Q(t,"zoom",e.zoom),Q(i,y,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&Q(i,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Q(i,"dblclick",this.onDblclick=this.dblclick.bind(this)),Q(t.ownerDocument,b,this.onCropMove=this.cropMove.bind(this)),Q(t.ownerDocument,x,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&Q(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;I(e.cropstart)&&J(t,"cropstart",e.cropstart),I(e.cropmove)&&J(t,"cropmove",e.cropmove),I(e.cropend)&&J(t,"cropend",e.cropend),I(e.crop)&&J(t,"crop",e.crop),I(e.zoom)&&J(t,"zoom",e.zoom),J(i,y,this.onCropStart),e.zoomable&&e.zoomOnWheel&&J(i,"wheel",this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&J(i,"dblclick",this.onDblclick),J(t.ownerDocument,b,this.onCropMove),J(t.ownerDocument,x,this.onCropEnd),e.responsive&&J(window,"resize",this.onResize)}},mt={resize:function(){var t=this.options,e=this.container,i=this.containerData,n=Number(t.minContainerWidth)||200,o=Number(t.minContainerHeight)||100;if(!(this.disabled||i.width<=n||i.height<=o)){var s,r,a=e.offsetWidth/i.width;if(1!==a||e.offsetHeight!==i.height)t.restore&&(s=this.getCanvasData(),r=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(N(s,function(t,e){s[e]=t*a})),this.setCropBoxData(N(r,function(t,e){r[e]=t*a})))}},dblclick:function(){var t,e;this.disabled||"none"===this.options.dragMode||this.setDragMode((t=this.dragBox,e=c,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?"move":"crop"))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(M(e)&&1!==e||M(i)&&0!==i||t.ctrlKey))){var n,o=this.options,s=this.pointers;t.changedTouches?N(t.changedTouches,function(t){s[t.identifier]=at(t)}):s[t.pointerId||0]=at(t),n=Object.keys(s).length>1&&o.zoomable&&o.zoomOnTouch?"zoom":Y(t.target,_),w.test(n)&&!1!==tt(this.element,"cropstart",{originalEvent:t,action:n})&&(t.preventDefault(),this.action=n,this.cropping=!1,"crop"===n&&(this.cropping=!0,$(this.dragBox,m)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==tt(this.element,"cropmove",{originalEvent:t,action:e})&&(t.changedTouches?N(t.changedTouches,function(t){B(i[t.identifier]||{},at(t,!0))}):B(i[t.pointerId||0]||{},at(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?N(t.changedTouches,function(t){delete i[t.identifier]}):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Z(this.dragBox,m,this.cropped&&this.options.modal)),tt(this.element,"cropend",{originalEvent:t,action:e}))}}},gt={change:function(t){var e,i=this.options,n=this.canvasData,s=this.containerData,r=this.cropBoxData,a=this.pointers,h=this.action,l=i.aspectRatio,c=r.left,d=r.top,p=r.width,f=r.height,m=c+p,g=d+f,_=0,v=0,y=s.width,b=s.height,x=!0;!l&&t.shiftKey&&(l=p&&f?p/f:1),this.limited&&(_=r.minLeft,v=r.minTop,y=_+Math.min(s.width,n.width,n.left+n.width),b=v+Math.min(s.height,n.height,n.top+n.height));var w=a[Object.keys(a)[0]],k={x:w.endX-w.startX,y:w.endY-w.startY},L=function(t){switch(t){case"e":m+k.x>y&&(k.x=y-m);break;case"w":c+k.x<_&&(k.x=_-c);break;case"n":d+k.y<v&&(k.y=v-d);break;case"s":g+k.y>b&&(k.y=b-g)}};switch(h){case"all":c+=k.x,d+=k.y;break;case"e":if(k.x>=0&&(m>=y||l&&(d<=v||g>=b))){x=!1;break}L("e"),(p+=k.x)<0&&(h="w",c-=p=-p),l&&(f=p/l,d+=(r.height-f)/2);break;case"n":if(k.y<=0&&(d<=v||l&&(c<=_||m>=y))){x=!1;break}L("n"),f-=k.y,d+=k.y,f<0&&(h="s",d-=f=-f),l&&(p=f*l,c+=(r.width-p)/2);break;case"w":if(k.x<=0&&(c<=_||l&&(d<=v||g>=b))){x=!1;break}L("w"),p-=k.x,c+=k.x,p<0&&(h="e",c-=p=-p),l&&(f=p/l,d+=(r.height-f)/2);break;case"s":if(k.y>=0&&(g>=b||l&&(c<=_||m>=y))){x=!1;break}L("s"),(f+=k.y)<0&&(h="n",d-=f=-f),l&&(p=f*l,c+=(r.width-p)/2);break;case"ne":if(l){if(k.y<=0&&(d<=v||m>=y)){x=!1;break}L("n"),f-=k.y,d+=k.y,p=f*l}else L("n"),L("e"),k.x>=0?m<y?p+=k.x:k.y<=0&&d<=v&&(x=!1):p+=k.x,k.y<=0?d>v&&(f-=k.y,d+=k.y):(f-=k.y,d+=k.y);p<0&&f<0?(h="sw",d-=f=-f,c-=p=-p):p<0?(h="nw",c-=p=-p):f<0&&(h="se",d-=f=-f);break;case"nw":if(l){if(k.y<=0&&(d<=v||c<=_)){x=!1;break}L("n"),f-=k.y,d+=k.y,p=f*l,c+=r.width-p}else L("n"),L("w"),k.x<=0?c>_?(p-=k.x,c+=k.x):k.y<=0&&d<=v&&(x=!1):(p-=k.x,c+=k.x),k.y<=0?d>v&&(f-=k.y,d+=k.y):(f-=k.y,d+=k.y);p<0&&f<0?(h="se",d-=f=-f,c-=p=-p):p<0?(h="ne",c-=p=-p):f<0&&(h="sw",d-=f=-f);break;case"sw":if(l){if(k.x<=0&&(c<=_||g>=b)){x=!1;break}L("w"),p-=k.x,c+=k.x,f=p/l}else L("s"),L("w"),k.x<=0?c>_?(p-=k.x,c+=k.x):k.y>=0&&g>=b&&(x=!1):(p-=k.x,c+=k.x),k.y>=0?g<b&&(f+=k.y):f+=k.y;p<0&&f<0?(h="ne",d-=f=-f,c-=p=-p):p<0?(h="se",c-=p=-p):f<0&&(h="nw",d-=f=-f);break;case"se":if(l){if(k.x>=0&&(m>=y||g>=b)){x=!1;break}L("e"),f=(p+=k.x)/l}else L("s"),L("e"),k.x>=0?m<y?p+=k.x:k.y>=0&&g>=b&&(x=!1):p+=k.x,k.y>=0?g<b&&(f+=k.y):f+=k.y;p<0&&f<0?(h="nw",d-=f=-f,c-=p=-p):p<0?(h="sw",c-=p=-p):f<0&&(h="ne",d-=f=-f);break;case"move":this.move(k.x,k.y),x=!1;break;case"zoom":this.zoom(function(t){var e=o({},t),i=[];return N(t,function(t,n){delete e[n],N(e,function(e){var n=Math.abs(t.startX-e.startX),o=Math.abs(t.startY-e.startY),s=Math.abs(t.endX-e.endX),r=Math.abs(t.endY-e.endY),a=Math.sqrt(n*n+o*o),h=(Math.sqrt(s*s+r*r)-a)/a;i.push(h)})}),i.sort(function(t,e){return Math.abs(t)<Math.abs(e)}),i[0]}(a),t),x=!1;break;case"crop":if(!k.x||!k.y){x=!1;break}e=et(this.cropper),c=w.startX-e.left,d=w.startY-e.top,p=r.minWidth,f=r.minHeight,k.x>0?h=k.y>0?"se":"ne":k.x<0&&(c-=p,h=k.y>0?"sw":"nw"),k.y<0&&(d-=f),this.cropped||(W(this.cropBox,u),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}x&&(r.width=p,r.height=f,r.left=c,r.top=d,this.action=h,this.renderCropBox()),N(a,function(t){t.startX=t.endX,t.startY=t.endY})}},_t={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&$(this.dragBox,m),W(this.cropBox,u),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=B({},this.initialImageData),this.canvasData=B({},this.initialCanvasData),this.cropBoxData=B({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(B(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),W(this.dragBox,m),$(this.cropBox,u)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,N(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,W(this.cropper,d)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,$(this.cropper,d)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=i.left,o=i.top;return this.moveTo(P(t)?t:n+Number(t),P(e)?e:o+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(M(t)&&(i.left=t,n=!0),M(e)&&(i.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var n=this.options,o=this.canvasData,s=o.width,r=o.height,a=o.naturalWidth,h=o.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var l=a*t,c=h*t;if(!1===tt(this.element,"zoom",{ratio:t,oldRatio:s/a,originalEvent:i}))return this;if(i){var d=this.pointers,u=et(this.cropper),p=d&&Object.keys(d).length?function(t){var e=0,i=0,n=0;return N(t,function(t){var o=t.startX,s=t.startY;e+=o,i+=s,n+=1}),{pageX:e/=n,pageY:i/=n}}(d):{pageX:i.pageX,pageY:i.pageY};o.left-=(l-s)*((p.pageX-u.left-o.left)/s),o.top-=(c-r)*((p.pageY-u.top-o.top)/r)}else A(e)&&M(e.x)&&M(e.y)?(o.left-=(l-s)*((e.x-o.left)/s),o.top-=(c-r)*((e.y-o.top)/r)):(o.left-=(l-s)/2,o.top-=(c-r)/2);o.width=l,o.height=c,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return M(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,M(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(M(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(M(t)&&(i.scaleX=t,n=!0),M(e)&&(i.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,n=this.imageData,o=this.canvasData,s=this.cropBoxData;if(this.ready&&this.cropped){t={x:s.left-o.left,y:s.top-o.top,width:s.width,height:s.height};var r=n.width/n.naturalWidth;if(N(t,function(e,i){t[i]=e/r}),e){var a=Math.round(t.y+t.height),h=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=h-t.x,t.height=a-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=n.rotate||0),i.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,n=this.canvasData,o={};if(this.ready&&!this.disabled&&A(t)){var s=!1;e.rotatable&&M(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,s=!0),e.scalable&&(M(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,s=!0),M(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,s=!0)),s&&this.renderCanvas(!0,!0);var r=i.width/i.naturalWidth;M(t.x)&&(o.left=t.x*r+n.left),M(t.y)&&(o.top=t.y*r+n.top),M(t.width)&&(o.width=t.width*r),M(t.height)&&(o.height=t.height*r),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?B({},this.containerData):{}},getImageData:function(){return this.sized?B({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&N(["left","top","width","height","naturalWidth","naturalHeight"],function(i){e[i]=t[i]}),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&A(t)&&(M(t.left)&&(e.left=t.left),M(t.top)&&(e.top=t.top),M(t.width)?(e.width=t.width,e.height=t.width/i):M(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,n=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&A(t)&&(M(t.left)&&(n.left=t.left),M(t.top)&&(n.top=t.top),M(t.width)&&t.width!==n.width&&(e=!0,n.width=t.width),M(t.height)&&t.height!==n.height&&(i=!0,n.height=t.height),o&&(e?n.height=n.width/o:i&&(n.width=n.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=function(t,e,i,n){var o=e.aspectRatio,r=e.naturalWidth,a=e.naturalHeight,h=e.rotate,l=void 0===h?0:h,c=e.scaleX,d=void 0===c?1:c,u=e.scaleY,p=void 0===u?1:u,f=i.aspectRatio,m=i.naturalWidth,g=i.naturalHeight,_=n.fillColor,v=void 0===_?"transparent":_,y=n.imageSmoothingEnabled,b=void 0===y||y,x=n.imageSmoothingQuality,w=void 0===x?"low":x,k=n.maxWidth,L=void 0===k?1/0:k,T=n.maxHeight,S=void 0===T?1/0:T,C=n.minWidth,M=void 0===C?0:C,E=n.minHeight,P=void 0===E?0:E,D=document.createElement("canvas"),O=D.getContext("2d"),A=ht({aspectRatio:f,width:L,height:S}),I=ht({aspectRatio:f,width:M,height:P},"cover"),z=Math.min(A.width,Math.max(I.width,m)),R=Math.min(A.height,Math.max(I.height,g)),N=ht({aspectRatio:o,width:L,height:S}),B=ht({aspectRatio:o,width:M,height:P},"cover"),F=Math.min(N.width,Math.max(B.width,r)),H=Math.min(N.height,Math.max(B.height,a)),U=[-F/2,-H/2,F,H];return D.width=j(z),D.height=j(R),O.fillStyle=v,O.fillRect(0,0,z,R),O.save(),O.translate(z/2,R/2),O.rotate(l*Math.PI/180),O.scale(d,p),O.imageSmoothingEnabled=b,O.imageSmoothingQuality=w,O.drawImage.apply(O,[t].concat(s(U.map(function(t){return Math.floor(j(t))})))),O.restore(),D}(this.image,this.imageData,e,t);if(!this.cropped)return i;var n=this.getData(),o=n.x,r=n.y,a=n.width,h=n.height,l=i.width/Math.floor(e.naturalWidth);1!==l&&(o*=l,r*=l,a*=l,h*=l);var c=a/h,d=ht({aspectRatio:c,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),u=ht({aspectRatio:c,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=ht({aspectRatio:c,width:t.width||(1!==l?i.width:a),height:t.height||(1!==l?i.height:h)}),f=p.width,m=p.height;f=Math.min(d.width,Math.max(u.width,f)),m=Math.min(d.height,Math.max(u.height,m));var g=document.createElement("canvas"),_=g.getContext("2d");g.width=j(f),g.height=j(m),_.fillStyle=t.fillColor||"transparent",_.fillRect(0,0,f,m);var v=t.imageSmoothingEnabled,y=void 0===v||v,b=t.imageSmoothingQuality;_.imageSmoothingEnabled=y,b&&(_.imageSmoothingQuality=b);var x,w,k,L,T,S,C=i.width,M=i.height,E=o,P=r;E<=-a||E>C?(E=0,x=0,k=0,T=0):E<=0?(k=-E,E=0,T=x=Math.min(C,a+E)):E<=C&&(k=0,T=x=Math.min(a,C-E)),x<=0||P<=-h||P>M?(P=0,w=0,L=0,S=0):P<=0?(L=-P,P=0,S=w=Math.min(M,h+P)):P<=M&&(L=0,S=w=Math.min(h,M-P));var D=[E,P,x,w];if(T>0&&S>0){var O=f/a;D.push(k*O,L*O,T*O,S*O)}return _.drawImage.apply(_,[i].concat(s(D.map(function(t){return Math.floor(j(t))})))),g},setAspectRatio:function(t){var e=this.options;return this.disabled||P(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var o="crop"===t,s=e.movable&&"move"===t;t=o||s?t:"none",e.dragMode=t,q(i,_,t),Z(i,c,o),Z(i,g,s),e.cropBoxMovable||(q(n,_,t),Z(n,c,o),Z(n,g,s))}return this}},vt=a.Cropper,yt=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!T.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=B({},S,A(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var i,n,o;return i=t,o=[{key:"noConflict",value:function(){return window.Cropper=vt,t}},{key:"setDefaults",value:function(t){B(S,A(t)&&t)}}],(n=[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e.cropper){if(e.cropper=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(k.test(t))L.test(t)?this.read((o=t.replace(ct,""),s=atob(o),r=new ArrayBuffer(s.length),N(a=new Uint8Array(r),function(t,e){a[e]=s.charCodeAt(e)}),r)):this.clone();else{var o,s,r,a,h=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=h,h.onabort=l,h.onerror=l,h.ontimeout=l,h.onprogress=function(){"image/jpeg"!==h.getResponseHeader("content-type")&&h.abort()},h.onload=function(){e.read(h.response)},h.onloadend=function(){e.reloading=!1,e.xhr=null},n.checkCrossOrigin&&ot(t)&&i.crossOrigin&&(t=st(t)),h.open("GET",t),h.responseType="arraybuffer",h.withCredentials="use-credentials"===i.crossOrigin,h.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,n=dt(t),o=0,s=1,r=1;if(n>1){this.url=function(t,e){for(var i=[],n=new Uint8Array(t);n.length>0;)i.push(lt.apply(null,R(n.subarray(0,8192)))),n=n.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}(t,"image/jpeg");var a=function(t){var e=0,i=1,n=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:n}}(n);o=a.rotate,s=a.scaleX,r=a.scaleY}e.rotatable&&(i.rotate=o),e.scalable&&(i.scaleX=s,i.scaleY=r),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,n=e;this.options.checkCrossOrigin&&ot(e)&&(i||(i="anonymous"),n=st(e)),this.crossOrigin=i,this.crossOriginUrl=n;var o=document.createElement("img");i&&(o.crossOrigin=i),o.src=n||e,o.alt=t.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),$(o,p),t.parentNode.insertBefore(o,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=a.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(a.navigator.userAgent),n=function(e,i){B(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var o=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){n(o.width,o.height),i||s.removeChild(o)},o.src=e.src,i||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(o))}else n(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,n=t.parentNode,o=document.createElement("div");o.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var s=o.querySelector(".".concat("cropper","-container")),r=s.querySelector(".".concat("cropper","-canvas")),a=s.querySelector(".".concat("cropper","-drag-box")),h=s.querySelector(".".concat("cropper","-crop-box")),l=h.querySelector(".".concat("cropper","-face"));this.container=n,this.cropper=s,this.canvas=r,this.dragBox=a,this.cropBox=h,this.viewBox=s.querySelector(".".concat("cropper","-view-box")),this.face=l,r.appendChild(i),$(t,u),n.insertBefore(s,t.nextSibling),this.isImg||W(i,p),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,$(h,u),e.guides||$(h.getElementsByClassName("".concat("cropper","-dashed")),u),e.center||$(h.getElementsByClassName("".concat("cropper","-center")),u),e.background&&$(s,"".concat("cropper","-bg")),e.highlight||$(l,f),e.cropBoxMovable&&($(l,g),q(l,_,"all")),e.cropBoxResizable||($(h.getElementsByClassName("".concat("cropper","-line")),u),$(h.getElementsByClassName("".concat("cropper","-point")),u)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),I(e.ready)&&Q(t,"ready",e.ready,{once:!0}),tt(t,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),W(this.element,u))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&e(i.prototype,n),o&&e(i,o),t}();return B(yt.prototype,ut,pt,ft,mt,gt,_t),yt}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function(t){function e(t,e,i){if(void 0===t.selectionStart){t.focus();var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",e),n.select()}else t.selectionStart=e,t.selectionEnd=i}function i(e,i){t.each(i,function(t,n){"function"==typeof n?i[t]=n(e,i,t):"function"==typeof e.autoNumeric[n]&&(i[t]=e.autoNumeric[n](e,i,t))})}function n(t,e){"string"==typeof t[e]&&(t[e]*=1)}function o(t,e){i(t,e),e.tagList=["b","caption","cite","code","dd","del","div","dfn","dt","em","h1","h2","h3","h4","h5","h6","ins","kdb","label","li","output","p","q","s","sample","span","strong","td","th","u","var"];var o=e.vMax.toString().split("."),s=e.vMin||0===e.vMin?e.vMin.toString().split("."):[];if(n(e,"vMax"),n(e,"vMin"),n(e,"mDec"),e.mDec="CHF"===e.mRound?"2":e.mDec,e.allowLeading=!0,e.aNeg=e.vMin<0?"-":"",o[0]=o[0].replace("-",""),s[0]=s[0].replace("-",""),e.mInt=Math.max(o[0].length,s[0].length,1),null===e.mDec){var r=0,a=0;o[1]&&(r=o[1].length),s[1]&&(a=s[1].length),e.mDec=Math.max(r,a)}null===e.altDec&&e.mDec>0&&("."===e.aDec&&","!==e.aSep?e.altDec=",":","===e.aDec&&"."!==e.aSep&&(e.altDec="."));var h=e.aNeg?"([-\\"+e.aNeg+"]?)":"(-?)";e.aNegRegAutoStrip=h,e.skipFirstAutoStrip=new RegExp(h+"[^-"+(e.aNeg?"\\"+e.aNeg:"")+"\\"+e.aDec+"\\d].*?(\\d|\\"+e.aDec+"\\d)"),e.skipLastAutoStrip=new RegExp("(\\d\\"+e.aDec+"?)[^\\"+e.aDec+"\\d]\\D*$");var l="-"+e.aNum+"\\"+e.aDec;return e.allowedAutoStrip=new RegExp("[^"+l+"]","gi"),e.numRegAutoStrip=new RegExp(h+"(?:\\"+e.aDec+"?(\\d+\\"+e.aDec+"\\d+)|(\\d*(?:\\"+e.aDec+"\\d*)?))"),e}function s(t,e,i){if(e.aSign)for(;t.indexOf(e.aSign)>-1;)t=t.replace(e.aSign,"");t=(t=(t=t.replace(e.skipFirstAutoStrip,"$1$2")).replace(e.skipLastAutoStrip,"$1")).replace(e.allowedAutoStrip,""),e.altDec&&(t=t.replace(e.altDec,e.aDec));var n=t.match(e.numRegAutoStrip);if(t=n?[n[1],n[2],n[3]].join(""):"",("allow"===e.lZero||"keep"===e.lZero)&&"strip"!==i){var o=[],s="";-1!==(o=t.split(e.aDec))[0].indexOf("-")&&(s="-",o[0]=o[0].replace("-","")),o[0].length>e.mInt&&"0"===o[0].charAt(0)&&(o[0]=o[0].slice(1)),t=s+o.join(e.aDec)}if(i&&"deny"===e.lZero||i&&"allow"===e.lZero&&!1===e.allowLeading){var r="^"+e.aNegRegAutoStrip+"0*(\\d"+("leading"===i?")":"|$)");r=new RegExp(r),t=t.replace(r,"$1$2")}return t}function r(t,e){if("p"===e.pSign){var i=e.nBracket.split(",");e.hasFocus||e.removeBrackets?(e.hasFocus&&t.charAt(0)===i[0]||e.removeBrackets&&t.charAt(0)===i[0])&&(t=(t=t.replace(i[0],e.aNeg)).replace(i[1],"")):(t=t.replace(e.aNeg,""),t=i[0]+t+i[1])}return t}function a(t,e){if(t){var i=+t;if(1e-6>i&&i>-1)1e-6>(t=+t)&&t>0&&(t=(t=(t+10).toString()).substring(1)),0>t&&t>-1&&(t="-"+(t=(t-10).toString()).substring(2)),t=t.toString();else{var n=t.split(".");void 0!==n[1]&&(0==+n[1]?t=n[0]:(n[1]=n[1].replace(/0*$/,""),t=n.join(".")))}}return"keep"===e.lZero?t:t.replace(/^0*(\d)/,"$1")}function h(t,e,i){return e&&"."!==e&&(t=t.replace(e,".")),i&&"-"!==i&&(t=t.replace(i,"-")),t.match(/\d/)||(t+="0"),t}function l(t,e,i){return i&&"-"!==i&&(t=t.replace("-",i)),e&&"."!==e&&(t=t.replace(".",e)),t}function c(t,e,i){return""===t||t===e.aNeg?"zero"===e.wEmpty?t+"0":"sign"===e.wEmpty||i?t+e.aSign:t:null}function d(t,e){var i=(t=s(t,e)).replace(",","."),n=c(t,e,!0);if(null!==n)return n;var o="";o=2===e.dGroup?/(\d)((\d)(\d{2}?)+)$/:4===e.dGroup?/(\d)((\d{4}?)+)$/:/(\d)((\d{3}?)+)$/;var a=t.split(e.aDec);e.altDec&&1===a.length&&(a=t.split(e.altDec));var h=a[0];if(e.aSep)for(;o.test(h);)h=h.replace(o,"$1"+e.aSep+"$2");if(0!==e.mDec&&a.length>1?(a[1].length>e.mDec&&(a[1]=a[1].substring(0,e.mDec)),t=h+e.aDec+a[1]):t=h,e.aSign){var l=-1!==t.indexOf(e.aNeg);t=t.replace(e.aNeg,""),t="p"===e.pSign?e.aSign+t:t+e.aSign,l&&(t=e.aNeg+t)}return 0>i&&null!==e.nBracket&&(t=r(t,e)),t}function u(t,e){t=""===t?"0":t.toString(),n(e,"mDec"),"CHF"===e.mRound&&(t=(Math.round(20*t)/20).toString());var i="",o=0,s="",r="boolean"==typeof e.aPad||null===e.aPad?e.aPad?e.mDec:0:+e.aPad,a=function(t){var e=0===r?/(\.(?:\d*[1-9])?)0*$/:1===r?/(\.\d(?:\d*[1-9])?)0*$/:new RegExp("(\\.\\d{"+r+"}(?:\\d*[1-9])?)0*$");return t=t.replace(e,"$1"),0===r&&(t=t.replace(/\.$/,"")),t};"-"===t.charAt(0)&&(s="-",t=t.replace("-","")),t.match(/^\d/)||(t="0"+t),"-"===s&&0==+t&&(s=""),(+t>0&&"keep"!==e.lZero||t.length>0&&"allow"===e.lZero)&&(t=t.replace(/^0*(\d)/,"$1"));var h=t.lastIndexOf("."),l=-1===h?t.length-1:h,c=t.length-1-l;if(c<=e.mDec){if(i=t,r>c){-1===h&&(i+=e.aDec);for(var d="000000";r>c;)i+=d=d.substring(0,r-c),c+=d.length}else c>r?i=a(i):0===c&&0===r&&(i=i.replace(/\.$/,""));if("CHF"!==e.mRound)return 0==+i?i:s+i;"CHF"===e.mRound&&(h=i.lastIndexOf("."),t=i)}var u=h+e.mDec,p=+t.charAt(u+1),f=t.substring(0,u+1).split(""),m="."===t.charAt(u)?t.charAt(u-1)%2:t.charAt(u)%2,g=!0;if(1!==m&&(m=0===m&&t.substring(u+2,t.length)>0?1:0),p>4&&"S"===e.mRound||p>4&&"A"===e.mRound&&""===s||p>5&&"A"===e.mRound&&"-"===s||p>5&&"s"===e.mRound||p>5&&"a"===e.mRound&&""===s||p>4&&"a"===e.mRound&&"-"===s||p>5&&"B"===e.mRound||5===p&&"B"===e.mRound&&1===m||p>0&&"C"===e.mRound&&""===s||p>0&&"F"===e.mRound&&"-"===s||p>0&&"U"===e.mRound||"CHF"===e.mRound)for(o=f.length-1;o>=0;o-=1)if("."!==f[o]){if("CHF"===e.mRound&&f[o]<=2&&g){f[o]=0,g=!1;break}if("CHF"===e.mRound&&f[o]<=7&&g){f[o]=5,g=!1;break}if("CHF"===e.mRound&&g?(f[o]=10,g=!1):f[o]=+f[o]+1,f[o]<10)break;o>0&&(f[o]="0")}return 0==+(i=a((f=f.slice(0,u+1)).join("")))?i:s+i}function p(t,e,i){var n=e.aDec,o=e.mDec;if(t="paste"===i?u(t,e):t,n&&o){var s=t.split(n);s[1]&&s[1].length>o&&(o>0?(s[1]=s[1].substring(0,o),t=s.join(n)):t=s[0])}return t}function f(t,e){var i=+(t=h(t=p(t=s(t,e),e),e.aDec,e.aNeg));return i>=e.vMin&&i<=e.vMax}function m(e,i){this.settings=i,this.that=e,this.$that=t(e),this.formatted=!1,this.settingsClone=o(this.$that,this.settings),this.value=e.value}function g(e){return"string"==typeof e&&(e="#"+(e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]")).replace(/(:|\.)/g,"\\$1")),t(e)}function _(t,e,i){var n=t.data("autoNumeric");n||(n={},t.data("autoNumeric",n));var o=n.holder;return(void 0===o&&e||i)&&(o=new m(t.get(0),e),n.holder=o),o}m.prototype={init:function(t){this.value=this.that.value,this.settingsClone=o(this.$that,this.settings),this.ctrlKey=t.ctrlKey,this.cmdKey=t.metaKey,this.shiftKey=t.shiftKey,this.selection=function(t){var e={};if(void 0===t.selectionStart){t.focus();var i=document.selection.createRange();e.length=i.text.length,i.moveStart("character",-t.value.length),e.end=i.text.length,e.start=e.end-e.length}else e.start=t.selectionStart,e.end=t.selectionEnd,e.length=e.end-e.start;return e}(this.that),("keydown"===t.type||"keyup"===t.type)&&(this.kdCode=t.keyCode),this.which=t.which,this.processed=!1,this.formatted=!1},setSelection:function(t,i,n){t=Math.max(t,0),i=Math.min(i,this.that.value.length),this.selection={start:t,end:i,length:i-t},(void 0===n||n)&&e(this.that,t,i)},setPosition:function(t,e){this.setSelection(t,t,e)},getBeforeAfter:function(){var t=this.value;return[t.substring(0,this.selection.start),t.substring(this.selection.end,t.length)]},getBeforeAfterStriped:function(){var t=this.getBeforeAfter();return t[0]=s(t[0],this.settingsClone),t[1]=s(t[1],this.settingsClone),t},normalizeParts:function(t,e){var i=this.settingsClone;""!==(t=s(t,i,!!(e=s(e,i)).match(/^\d/)||"leading"))&&t!==i.aNeg||"deny"!==i.lZero||e>""&&(e=e.replace(/^0*(\d)/,"$1"));var n=t+e;if(i.aDec){var o=n.match(new RegExp("^"+i.aNegRegAutoStrip+"\\"+i.aDec));o&&(n=(t=t.replace(o[1],o[1]+"0"))+e)}return"zero"!==i.wEmpty||n!==i.aNeg&&""!==n||(t+="0"),[t,e]},setValueParts:function(t,e,i){var n=this.settingsClone,o=this.normalizeParts(t,e),s=o.join(""),r=o[0].length;return!!f(s,n)&&(r>(s=p(s,n,i)).length&&(r=s.length),this.value=s,this.setPosition(r,!1),!0)},signPosition:function(){var t=this.settingsClone,e=t.aSign,i=this.that;if(e){var n=e.length;if("p"===t.pSign)return t.aNeg&&i.value&&i.value.charAt(0)===t.aNeg?[1,n+1]:[0,n];var o=i.value.length;return[o-n,o]}return[1e3,-1]},expandSelectionOnSign:function(t){var e=this.signPosition(),i=this.selection;i.start<e[1]&&i.end>e[0]&&((i.start<e[0]||i.end>e[1])&&this.value.substring(Math.max(i.start,e[0]),Math.min(i.end,e[1])).match(/^\s*$/)?i.start<e[0]?this.setSelection(i.start,e[0],t):this.setSelection(e[1],i.end,t):this.setSelection(Math.min(i.start,e[0]),Math.max(i.end,e[1]),t))},checkPaste:function(){if(void 0!==this.valuePartsBeforePaste){var t=this.getBeforeAfter(),e=this.valuePartsBeforePaste;delete this.valuePartsBeforePaste,t[0]=t[0].substr(0,e[0].length)+s(t[0].substr(e[0].length),this.settingsClone),this.setValueParts(t[0],t[1],"paste")||(this.value=e.join(""),this.setPosition(e[0].length,!1))}},skipAllways:function(t){var e=this.kdCode,i=this.which,n=this.ctrlKey,o=this.cmdKey,s=this.shiftKey;if((n||o)&&"keyup"===t.type&&void 0!==this.valuePartsBeforePaste||s&&45===e)return this.checkPaste(),!1;if(e>=112&&123>=e||e>=91&&93>=e||e>=9&&31>=e||8>e&&(0===i||i===e)||144===e||145===e||45===e||224===e)return!0;if((n||o)&&65===e)return!0;if((n||o)&&(67===e||86===e||88===e))return"keydown"===t.type&&this.expandSelectionOnSign(),(86===e||45===e)&&("keydown"===t.type||"keypress"===t.type?void 0===this.valuePartsBeforePaste&&(this.valuePartsBeforePaste=this.getBeforeAfter()):this.checkPaste()),"keydown"===t.type||"keypress"===t.type||67===e;if(n||o)return!0;if(37===e||39===e){var r=this.settingsClone.aSep,a=this.selection.start,h=this.that.value;return"keydown"===t.type&&r&&!this.shiftKey&&(37===e&&h.charAt(a-2)===r?this.setPosition(a-1):39===e&&h.charAt(a+1)===r&&this.setPosition(a+1)),!0}return e>=34&&40>=e},processAllways:function(){var t;return(8===this.kdCode||46===this.kdCode)&&(this.selection.length?(this.expandSelectionOnSign(!1),t=this.getBeforeAfterStriped(),this.setValueParts(t[0],t[1])):(t=this.getBeforeAfterStriped(),8===this.kdCode?t[0]=t[0].substring(0,t[0].length-1):t[1]=t[1].substring(1,t[1].length),this.setValueParts(t[0],t[1])),!0)},processKeypress:function(){var t=this.settingsClone,e=String.fromCharCode(this.which),i=this.getBeforeAfterStriped(),n=i[0],o=i[1];return e===t.aDec||t.altDec&&e===t.altDec||("."===e||","===e)&&110===this.kdCode?!t.mDec||!t.aDec||(!!(t.aNeg&&o.indexOf(t.aNeg)>-1)||(n.indexOf(t.aDec)>-1||(o.indexOf(t.aDec)>0||(0===o.indexOf(t.aDec)&&(o=o.substr(1)),this.setValueParts(n+t.aDec,o),!0)))):"-"===e||"+"===e?!t.aNeg||(""===n&&o.indexOf(t.aNeg)>-1&&(n=t.aNeg,o=o.substring(1,o.length)),n=n.charAt(0)===t.aNeg?n.substring(1,n.length):"-"===e?t.aNeg+n:n,this.setValueParts(n,o),!0):!(e>="0"&&"9">=e)||(t.aNeg&&""===n&&o.indexOf(t.aNeg)>-1&&(n=t.aNeg,o=o.substring(1,o.length)),t.vMax<=0&&t.vMin<t.vMax&&-1===this.value.indexOf(t.aNeg)&&"0"!==e&&(n=t.aNeg+n),this.setValueParts(n+e,o),!0)},formatQuick:function(){var t=this.settingsClone,e=this.getBeforeAfterStriped(),i=this.value;if((""===t.aSep||""!==t.aSep&&-1===i.indexOf(t.aSep))&&(""===t.aSign||""!==t.aSign&&-1===i.indexOf(t.aSign))){var n=[],o="";(n=i.split(t.aDec))[0].indexOf("-")>-1&&(o="-",n[0]=n[0].replace("-",""),e[0]=e[0].replace("-","")),n[0].length>t.mInt&&"0"===e[0].charAt(0)&&(e[0]=e[0].slice(1)),e[0]=o+e[0]}var s=d(this.value,this.settingsClone),r=s.length;if(s){for(var a=e[0].split(""),h=0;h<a.length;h+=1)a[h].match("\\d")||(a[h]="\\"+a[h]);var l=new RegExp("^.*?"+a.join(".*?")),c=s.match(l);c?(0===(r=c[0].length)&&s.charAt(0)!==t.aNeg||1===r&&s.charAt(0)===t.aNeg)&&t.aSign&&"p"===t.pSign&&(r=this.settingsClone.aSign.length+("-"===s.charAt(0)?1:0)):t.aSign&&"s"===t.pSign&&(r-=t.aSign.length)}this.that.value=s,this.setPosition(r),this.formatted=!0}};var v={init:function(i){return this.each(function(){var n=t(this),o=n.data("autoNumeric"),a=n.data(),p=n.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])");if("object"==typeof o)return this;(o=t.extend({},t.fn.autoNumeric.defaults,a,i,{aNum:"0123456789",hasFocus:!1,removeBrackets:!1,runOnce:!1,tagList:["b","caption","cite","code","dd","del","div","dfn","dt","em","h1","h2","h3","h4","h5","h6","ins","kdb","label","li","output","p","q","s","sample","span","strong","td","th","u","var"]})).aDec===o.aSep&&t.error("autoNumeric will not function properly when the decimal character aDec: '"+o.aDec+"' and thousand separator aSep: '"+o.aSep+"' are the same character"),n.data("autoNumeric",o);var m=_(n,o);if(p||"input"!==n.prop("tagName").toLowerCase()||t.error('The input type "'+n.prop("type")+'" is not supported by autoNumeric()'),-1===t.inArray(n.prop("tagName").toLowerCase(),o.tagList)&&"input"!==n.prop("tagName").toLowerCase()&&t.error("The <"+n.prop("tagName").toLowerCase()+"> is not supported by autoNumeric()"),!1===o.runOnce&&o.aForm){if(p){var g=!0;""===n[0].value&&"empty"===o.wEmpty&&(n[0].value="",g=!1),""===n[0].value&&"sign"===o.wEmpty&&(n[0].value=o.aSign,g=!1),g&&""!==n.val()&&(null===o.anDefault&&n[0].value===n.prop("defaultValue")||null!==o.anDefault&&o.anDefault.toString()===n.val())&&n.autoNumeric("set",n.val())}-1!==t.inArray(n.prop("tagName").toLowerCase(),o.tagList)&&""!==n.text()&&n.autoNumeric("set",n.text())}o.runOnce=!0,n.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])")&&(n.on("keydown.autoNumeric",function(e){return(m=_(n)).settings.aDec===m.settings.aSep&&t.error("autoNumeric will not function properly when the decimal character aDec: '"+m.settings.aDec+"' and thousand separator aSep: '"+m.settings.aSep+"' are the same character"),m.that.readOnly?(m.processed=!0,!0):(m.init(e),m.skipAllways(e)?(m.processed=!0,!0):m.processAllways()?(m.processed=!0,m.formatQuick(),e.preventDefault(),!1):(m.formatted=!1,!0))}),n.on("keypress.autoNumeric",function(t){var e=(m=_(n)).processed;return m.init(t),!!m.skipAllways(t)||(e?(t.preventDefault(),!1):m.processAllways()||m.processKeypress()?(m.formatQuick(),t.preventDefault(),!1):void(m.formatted=!1))}),n.on("keyup.autoNumeric",function(t){(m=_(n)).init(t);var i=m.skipAllways(t);return m.kdCode=0,delete m.valuePartsBeforePaste,n[0].value===m.settings.aSign&&("s"===m.settings.pSign?e(this,0,0):e(this,m.settings.aSign.length,m.settings.aSign.length)),!!i||(""===this.value||void(m.formatted||m.formatQuick()))}),n.on("focusin.autoNumeric",function(){var t=(m=_(n)).settingsClone;if(t.hasFocus=!0,null!==t.nBracket){var e=n.val();n.val(r(e,t))}m.inVal=n.val();var i=c(m.inVal,t,!0);null!==i&&""!==i&&n.val(i)}),n.on("focusout.autoNumeric",function(){var t=(m=_(n)).settingsClone,e=n.val(),i=e;t.hasFocus=!1;var o="";"allow"===t.lZero&&(t.allowLeading=!1,o="leading"),""!==e&&(null===c(e=s(e,t,o),t)&&f(e,t,n[0])?e=l(e=u(e=h(e,t.aDec,t.aNeg),t),t.aDec,t.aNeg):e="");var r=c(e,t,!1);null===r&&(r=d(e,t)),(r!==m.inVal||r!==i)&&(n.val(r),n.change(),delete m.inVal)}))})},destroy:function(){return t(this).each(function(){var e=t(this);e.removeData("autoNumeric"),e.off("autoNumeric")})},update:function(e){return t(this).each(function(){var i=g(t(this)),n=i.data("autoNumeric");"object"!=typeof n&&t.error("You must initialize autoNumeric('init', {options}) prior to calling the 'update' method");var o=i.autoNumeric("get");return _(i,n=t.extend(n,e),!0),n.aDec===n.aSep&&t.error("autoNumeric will not function properly when the decimal character aDec: '"+n.aDec+"' and thousand separator aSep: '"+n.aSep+"' are the same character"),i.data("autoNumeric",n),""!==i.val()||""!==i.text()?i.autoNumeric("set",o):void 0})},set:function(e){return null===e||isNaN(e)?void 0:t(this).each(function(){var i=g(t(this)),n=i.data("autoNumeric"),o=e.toString(),s=e.toString(),r=i.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])");return"object"!=typeof n&&t.error("You must initialize autoNumeric('init', {options}) prior to calling the 'set' method"),s!==i.attr("value")&&s!==i.text()||!1!==n.runOnce||(o=o.replace(",",".")),t.isNumeric(+o)||t.error("The value ("+o+") being 'set' is not numeric and has caused a error to be thrown"),o=a(o,n),n.setEvent=!0,o.toString(),""!==o&&(o=u(o,n)),f(o=l(o,n.aDec,n.aNeg),n)||(o=u("",n)),o=d(o,n),r?i.val(o):-1!==t.inArray(i.prop("tagName").toLowerCase(),n.tagList)&&i.text(o)})},get:function(){var e=g(t(this)),i=e.data("autoNumeric");"object"!=typeof i&&t.error("You must initialize autoNumeric('init', {options}) prior to calling the 'get' method");var n="";return e.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])")?n=e.eq(0).val():-1!==t.inArray(e.prop("tagName").toLowerCase(),i.tagList)?n=e.eq(0).text():t.error("The <"+e.prop("tagName").toLowerCase()+"> is not supported by autoNumeric()"),""===n&&"empty"===i.wEmpty||n===i.aSign&&("sign"===i.wEmpty||"empty"===i.wEmpty)?"":(""!==n&&null!==i.nBracket&&(i.removeBrackets=!0,n=r(n,i),i.removeBrackets=!1),(i.runOnce||!1===i.aForm)&&(n=s(n,i)),0==+(n=h(n,i.aDec,i.aNeg))&&"keep"!==i.lZero&&(n="0"),"keep"===i.lZero?n:n=a(n,i))},getString:function(){var e=!1,i=g(t(this)),n=i.serialize().split("&"),o=t("form").index(i),s=t("form:eq("+o+")"),r=[],a=[],h=/^(?:submit|button|image|reset|file)$/i,l=/^(?:input|select|textarea|keygen)/i,c=/^(?:checkbox|radio)$/i,d=/^(?:button|checkbox|color|date|datetime|datetime-local|email|file|image|month|number|password|radio|range|reset|search|submit|time|url|week)/i,u=0;return t.each(s[0],function(t,e){""===e.name||!l.test(e.localName)||h.test(e.type)||e.disabled||!e.checked&&c.test(e.type)?a.push(-1):(a.push(u),u+=1)}),u=0,t.each(s[0],function(t,e){"input"!==e.localName||""!==e.type&&"text"!==e.type&&"hidden"!==e.type&&"tel"!==e.type?(r.push(-1),"input"===e.localName&&d.test(e.type)&&(u+=1)):(r.push(u),u+=1)}),t.each(n,function(i,s){s=n[i].split("=");var h=t.inArray(i,a);h>-1&&r[h]>-1&&("object"==typeof t("form:eq("+o+") input:eq("+r[h]+")").data("autoNumeric")&&null!==s[1]&&(s[1]=t("form:eq("+o+") input:eq("+r[h]+")").autoNumeric("get").toString(),n[i]=s.join("="),e=!0))}),e||t.error("You must initialize autoNumeric('init', {options}) prior to calling the 'getString' method"),n.join("&")},getArray:function(){var e=!1,i=g(t(this)),n=i.serializeArray(),o=t("form").index(i),s=t("form:eq("+o+")"),r=[],a=[],h=/^(?:submit|button|image|reset|file)$/i,l=/^(?:input|select|textarea|keygen)/i,c=/^(?:checkbox|radio)$/i,d=/^(?:button|checkbox|color|date|datetime|datetime-local|email|file|image|month|number|password|radio|range|reset|search|submit|time|url|week)/i,u=0;return t.each(s[0],function(t,e){""===e.name||!l.test(e.localName)||h.test(e.type)||e.disabled||!e.checked&&c.test(e.type)?a.push(-1):(a.push(u),u+=1)}),u=0,t.each(s[0],function(t,e){"input"!==e.localName||""!==e.type&&"text"!==e.type&&"hidden"!==e.type&&"tel"!==e.type?(r.push(-1),"input"===e.localName&&d.test(e.type)&&(u+=1)):(r.push(u),u+=1)}),t.each(n,function(i,n){var s=t.inArray(i,a);s>-1&&r[s]>-1&&("object"==typeof t("form:eq("+o+") input:eq("+r[s]+")").data("autoNumeric")&&(n.value=t("form:eq("+o+") input:eq("+r[s]+")").autoNumeric("get").toString(),e=!0))}),e||t.error("None of the successful form inputs are initialized by autoNumeric."),n},getSettings:function(){return g(t(this)).eq(0).data("autoNumeric")}};t.fn.autoNumeric=function(e){return v[e]?v[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error('Method "'+e+'" is not supported by autoNumeric()'):v.init.apply(this,arguments)},t.fn.autoNumeric.defaults={aSep:",",dGroup:"3",aDec:".",altDec:null,aSign:"",pSign:"p",vMax:"9999999999999.99",vMin:"-9999999999999.99",mDec:null,mRound:"S",aPad:!0,nBracket:null,wEmpty:"empty",lZero:"allow",sNumber:!0,aForm:!0,anDefault:null}});var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,i=t.URL||t.webkitURL||t,n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),o=!t.externalHost&&"download"in n,s=t.webkitRequestFileSystem,r=t.requestFileSystem||s||t.mozRequestFileSystem,a=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},h=0,l=[],c=function(){for(var t=l.length;t--;){var e=l[t];"string"==typeof e?i.revokeObjectURL(e):e.remove()}l.length=0},d=function(t,e,i){for(var n=(e=[].concat(e)).length;n--;){var o=t["on"+e[n]];if("function"==typeof o)try{o.call(t,i||t)}catch(t){a(t)}}},u=function(i,a){var c,u,p,f=this,m=i.type,g=!1,_=function(){var e=(t.URL||t.webkitURL||t).createObjectURL(i);return l.push(e),e},v=function(){d(f,"writestart progress write writeend".split(" "))},y=function(){!g&&c||(c=_()),u?u.location.href=c:window.open(c,"_blank"),f.readyState=f.DONE,v()},b=function(t){return function(){if(f.readyState!==f.DONE)return t.apply(this,arguments)}},x={create:!0,exclusive:!1};if(f.readyState=f.INIT,a||(a="download"),o){c=_(),e=t.document,(n=e.createElementNS("http://www.w3.org/1999/xhtml","a")).href=c,n.download=a;var w=e.createEvent("MouseEvents");return w.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(w),f.readyState=f.DONE,void v()}t.chrome&&m&&"application/octet-stream"!==m&&(p=i.slice||i.webkitSlice,i=p.call(i,0,i.size,"application/octet-stream"),g=!0),s&&"download"!==a&&(a+=".download"),("application/octet-stream"===m||s)&&(u=t),r?(h+=i.size,r(t.TEMPORARY,h,b(function(t){t.root.getDirectory("saved",x,b(function(t){var e=function(){t.getFile(a,x,b(function(t){t.createWriter(b(function(e){e.onwriteend=function(e){u.location.href=t.toURL(),l.push(t),f.readyState=f.DONE,d(f,"writeend",e)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&y()},"writestart progress write abort".split(" ").forEach(function(t){e["on"+t]=f["on"+t]}),e.write(i),f.abort=function(){e.abort(),f.readyState=f.DONE},f.readyState=f.WRITING}),y)}),y)};t.getFile(a,{create:!1},b(function(t){t.remove(),e()}),b(function(t){t.code===t.NOT_FOUND_ERR?e():y()}))}),y)}),y)):y()},p=u.prototype,f=function(t,e){return new u(t,e)};return p.abort=function(){this.readyState=this.DONE,d(this,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,t.addEventListener("unload",c,!1),f.unload=function(){c(),t.removeEventListener("unload",c,!1)},f}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&(module.exports=saveAs),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).JSZip=t()}}(function(){return function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return o(i||t)},c,c.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){var n=t("./utils"),o=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(t){for(var e,i,o,r,a,h,l,c=[],d=0,u=t.length,p=u,f="string"!==n.getTypeOf(t);d<t.length;)p=u-d,f?(e=t[d++],i=d<u?t[d++]:0,o=d<u?t[d++]:0):(e=t.charCodeAt(d++),i=d<u?t.charCodeAt(d++):0,o=d<u?t.charCodeAt(d++):0),r=e>>2,a=(3&e)<<4|i>>4,h=p>1?(15&i)<<2|o>>6:64,l=p>2?63&o:64,c.push(s.charAt(r)+s.charAt(a)+s.charAt(h)+s.charAt(l));return c.join("")},i.decode=function(t){var e,i,n,r,a,h,l=0,c=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var d,u=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===s.charAt(64)&&u--,t.charAt(t.length-2)===s.charAt(64)&&u--,u%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=o.uint8array?new Uint8Array(0|u):new Array(0|u);l<t.length;)e=s.indexOf(t.charAt(l++))<<2|(r=s.indexOf(t.charAt(l++)))>>4,i=(15&r)<<4|(a=s.indexOf(t.charAt(l++)))>>2,n=(3&a)<<6|(h=s.indexOf(t.charAt(l++))),d[c++]=e,64!==a&&(d[c++]=i),64!==h&&(d[c++]=n);return d}},{"./support":30,"./utils":32}],2:[function(t,e,i){var n=t("./external"),o=t("./stream/DataWorker"),s=t("./stream/DataLengthProbe"),r=t("./stream/Crc32Probe");s=t("./stream/DataLengthProbe");function a(t,e,i,n,o){this.compressedSize=t,this.uncompressedSize=e,this.crc32=i,this.compression=n,this.compressedContent=o}a.prototype={getContentWorker:function(){var t=new o(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),e=this;return t.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),t},getCompressedWorker:function(){return new o(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,i){return t.pipe(new r).pipe(new s("uncompressedSize")).pipe(e.compressWorker(i)).pipe(new s("compressedSize")).withStreamInfo("compression",e)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,i){var n=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(t){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,i){var n=t("./utils");var o=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==n.getTypeOf(t)?function(t,e,i,n){var s=o,r=n+i;t^=-1;for(var a=n;a<r;a++)t=t>>>8^s[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,i,n){var s=o,r=n+i;t^=-1;for(var a=n;a<r;a++)t=t>>>8^s[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0}},{"./utils":32}],5:[function(t,e,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,e,i){var n=null;n="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:n}},{lie:58}],7:[function(t,e,i){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=t("pako"),s=t("./utils"),r=t("./stream/GenericWorker"),a=n?"uint8array":"array";function h(t,e){r.call(this,"FlateWorker/"+t),this._pako=new o[t]({raw:!0,level:e.level||-1}),this.meta={};var i=this;this._pako.onData=function(t){i.push({data:t,meta:i.meta})}}i.magic="\b\0",s.inherits(h,r),h.prototype.processChunk=function(t){this.meta=t.meta,this._pako.push(s.transformTo(a,t.data),!1)},h.prototype.flush=function(){r.prototype.flush.call(this),this._pako.push([],!0)},h.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this._pako=null},i.compressWorker=function(t){return new h("Deflate",t)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:59}],8:[function(t,e,i){var n=t("../utils"),o=t("../stream/GenericWorker"),s=t("../utf8"),r=t("../crc32"),a=t("../signature"),h=function(t,e){var i,n="";for(i=0;i<e;i++)n+=String.fromCharCode(255&t),t>>>=8;return n},l=function(t,e,i,o,l,c){var d,u,p=t.file,f=t.compression,m=c!==s.utf8encode,g=n.transformTo("string",c(p.name)),_=n.transformTo("string",s.utf8encode(p.name)),v=p.comment,y=n.transformTo("string",c(v)),b=n.transformTo("string",s.utf8encode(v)),x=_.length!==p.name.length,w=b.length!==v.length,k="",L="",T="",S=p.dir,C=p.date,M={crc32:0,compressedSize:0,uncompressedSize:0};e&&!i||(M.crc32=t.crc32,M.compressedSize=t.compressedSize,M.uncompressedSize=t.uncompressedSize);var E=0;e&&(E|=8),m||!x&&!w||(E|=2048);var P,D,O=0,A=0;S&&(O|=16),"UNIX"===l?(A=798,O|=(P=p.unixPermissions,D=P,P||(D=S?16893:33204),(65535&D)<<16)):(A=20,O|=63&(p.dosPermissions||0)),d=C.getUTCHours(),d<<=6,d|=C.getUTCMinutes(),d<<=5,d|=C.getUTCSeconds()/2,u=C.getUTCFullYear()-1980,u<<=4,u|=C.getUTCMonth()+1,u<<=5,u|=C.getUTCDate(),x&&(L=h(1,1)+h(r(g),4)+_,k+="up"+h(L.length,2)+L),w&&(T=h(1,1)+h(r(y),4)+b,k+="uc"+h(T.length,2)+T);var I="";return I+="\n\0",I+=h(E,2),I+=f.magic,I+=h(d,2),I+=h(u,2),I+=h(M.crc32,4),I+=h(M.compressedSize,4),I+=h(M.uncompressedSize,4),I+=h(g.length,2),I+=h(k.length,2),{fileRecord:a.LOCAL_FILE_HEADER+I+g+k,dirRecord:a.CENTRAL_FILE_HEADER+h(A,2)+I+h(y.length,2)+"\0\0\0\0"+h(O,4)+h(o,4)+g+k+y}};function c(t,e,i,n){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=i,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(c,o),c.prototype.push=function(t){var e=t.meta.percent||0,i=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,o.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:i?(e+100*(i-n-1))/i:100}}))},c.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var i=l(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,i=l(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),e)this.push({data:function(t){return a.DATA_DESCRIPTOR+h(t.crc32,4)+h(t.compressedSize,4)+h(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var i=this.bytesWritten-t,o=function(t,e,i,o,s){var r=n.transformTo("string",s(o));return a.CENTRAL_DIRECTORY_END+"\0\0\0\0"+h(t,2)+h(t,2)+h(e,4)+h(i,4)+h(r.length,2)+r}(this.dirRecords.length,i,t,this.zipComment,this.encodeFileName);this.push({data:o,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on("error",function(t){e.error(t)}),this},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(t){var e=this._sources;if(!o.prototype.error.call(this,t))return!1;for(var i=0;i<e.length;i++)try{e[i].error(t)}catch(t){}return!0},c.prototype.lock=function(){o.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,i){var n=t("../compressions"),o=t("./ZipFileWorker");i.generateWorker=function(t,e,i){var s=new o(e.streamFiles,i,e.platform,e.encodeFileName),r=0;try{t.forEach(function(t,i){r++;var o=function(t,e){var i=t||e,o=n[i];if(!o)throw new Error(i+" is not a valid compression method !");return o}(i.options.compression,e.compression),a=i.options.compressionOptions||e.compressionOptions||{},h=i.dir,l=i.date;i._compressWorker(o,a).withStreamInfo("file",{name:t,dir:h,date:l,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(s)}),s.entriesCount=r}catch(t){s.error(t)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,i){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}n.prototype=t("./object"),n.prototype.loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.1.3",n.loadAsync=function(t,e){return(new n).loadAsync(t,e)},n.external=t("./external"),e.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,i){var n=t("./utils"),o=t("./external"),s=t("./utf8"),r=(n=t("./utils"),t("./zipEntries")),a=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function l(t){return new o.Promise(function(e,i){var n=t.decompressed.getContentWorker().pipe(new a);n.on("error",function(t){i(t)}).on("end",function(){n.streamInfo.crc32!==t.decompressed.crc32?i(new Error("Corrupted zip : CRC32 mismatch")):e()}).resume()})}e.exports=function(t,e){var i=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),h.isNode&&h.isStream(t)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then(function(t){var i=new r(e);return i.load(t),i}).then(function(t){var i=[o.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var s=0;s<n.length;s++)i.push(l(n[s]));return o.Promise.all(i)}).then(function(t){for(var n=t.shift(),o=n.files,s=0;s<o.length;s++){var r=o[s];i.file(r.fileNameStr,r.decompressed,{binary:!0,optimizedBinaryString:!0,date:r.date,dir:r.dir,comment:r.fileCommentStr.length?r.fileCommentStr:null,unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions,createFolders:e.createFolders})}return n.zipComment.length&&(i.comment=n.zipComment),i})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,i){var n=t("../utils"),o=t("../stream/GenericWorker");function s(t,e){o.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}n.inherits(s,o),s.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",function(t){e.push({data:t,meta:{percent:0}})}).on("error",function(t){e.isPaused?this.generatedError=t:e.error(t)}).on("end",function(){e.isPaused?e._upstreamEnded=!0:e.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,i){var n=t("readable-stream").Readable;function o(t,e,i){n.call(this,e),this._helper=t;var o=this;t.on("data",function(t,e){o.push(t)||o._helper.pause(),i&&i(e)}).on("error",function(t){o.emit("error",t)}).on("end",function(){o.push(null)})}t("util").inherits(o,n),o.prototype._read=function(){this._helper.resume()},e.exports=o},{"readable-stream":16,util:void 0}],14:[function(t,e,i){e.exports={isNode:"undefined"!=typeof Buffer,newBuffer:function(t,e){return new Buffer(t,e)},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,i){var n=t("./utf8"),o=t("./utils"),s=t("./stream/GenericWorker"),r=t("./stream/StreamHelper"),a=t("./defaults"),h=t("./compressedObject"),l=t("./zipObject"),c=t("./generate"),d=t("./nodejsUtils"),u=t("./nodejs/NodejsStreamInputAdapter"),p=function(t,e,i){var n,r=o.getTypeOf(e),c=o.extend(i||{},a);c.date=c.date||new Date,null!==c.compression&&(c.compression=c.compression.toUpperCase()),"string"==typeof c.unixPermissions&&(c.unixPermissions=parseInt(c.unixPermissions,8)),c.unixPermissions&&16384&c.unixPermissions&&(c.dir=!0),c.dosPermissions&&16&c.dosPermissions&&(c.dir=!0),c.dir&&(t=m(t)),c.createFolders&&(n=f(t))&&g.call(this,n,!0);var p="string"===r&&!1===c.binary&&!1===c.base64;i&&void 0!==i.binary||(c.binary=!p),(e instanceof h&&0===e.uncompressedSize||c.dir||!e||0===e.length)&&(c.base64=!1,c.binary=!0,e="",c.compression="STORE",r="string");var _=null;_=e instanceof h||e instanceof s?e:d.isNode&&d.isStream(e)?new u(t,e):o.prepareContent(t,e,c.binary,c.optimizedBinaryString,c.base64);var v=new l(t,_,c);this.files[t]=v},f=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},m=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},g=function(t,e){return e=void 0!==e?e:a.createFolders,t=m(t),this.files[t]||p.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function _(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,i,n;for(e in this.files)this.files.hasOwnProperty(e)&&(n=this.files[e],(i=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(i,n))},filter:function(t){var e=[];return this.forEach(function(i,n){t(i,n)&&e.push(n)}),e},file:function(t,e,i){if(1===arguments.length){if(_(t)){var n=t;return this.filter(function(t,e){return!e.dir&&n.test(t)})}var o=this.files[this.root+t];return o&&!o.dir?o:null}return t=this.root+t,p.call(this,t,e,i),this},folder:function(t){if(!t)return this;if(_(t))return this.filter(function(e,i){return i.dir&&t.test(e)});var e=this.root+t,i=g.call(this,e),n=this.clone();return n.root=i.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var i=this.filter(function(e,i){return i.name.slice(0,t.length)===t}),n=0;n<i.length;n++)delete this.files[i[n].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,i={};try{if((i=o.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=i.type.toLowerCase(),i.compression=i.compression.toUpperCase(),"binarystring"===i.type&&(i.type="string"),!i.type)throw new Error("No output type specified.");o.checkSupport(i.type),"darwin"!==i.platform&&"freebsd"!==i.platform&&"linux"!==i.platform&&"sunos"!==i.platform||(i.platform="UNIX"),"win32"===i.platform&&(i.platform="DOS");var a=i.comment||this.comment||"";e=c.generateWorker(this,i,a)}catch(t){(e=new s("error")).error(t)}return new r(e,i.type||"string",i.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,i){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,i){var n=t("./DataReader");function o(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(o,n),o.prototype.byteAt=function(t){return this.data[this.zero+t]},o.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),o=t.charCodeAt(3),s=this.length-4;s>=0;--s)if(this.data[s]===e&&this.data[s+1]===i&&this.data[s+2]===n&&this.data[s+3]===o)return s-this.zero;return-1},o.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),o=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&i===s[1]&&n===s[2]&&o===s[3]},o.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,e,i){var n=t("../utils");function o(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,i=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)i=(i<<8)+this.byteAt(e);return this.index+=t,i},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=o},{"../utils":32}],19:[function(t,e,i){var n=t("./Uint8ArrayReader");function o(t){n.call(this,t)}t("../utils").inherits(o,n),o.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,i){var n=t("./DataReader");function o(t){n.call(this,t)}t("../utils").inherits(o,n),o.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},o.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},o.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},o.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,e,i){var n=t("./ArrayReader");function o(t){n.call(this,t)}t("../utils").inherits(o,n),o.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,i){var n=t("../utils"),o=t("../support"),s=t("./ArrayReader"),r=t("./StringReader"),a=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");e.exports=function(t){var e=n.getTypeOf(t);return n.checkSupport(e),"string"!==e||o.uint8array?"nodebuffer"===e?new a(t):o.uint8array?new h(n.transformTo("uint8array",t)):new s(n.transformTo("array",t)):new r(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,i){var n=t("./GenericWorker"),o=t("../utils");function s(t){n.call(this,"ConvertWorker to "+t),this.destType=t}o.inherits(s,n),s.prototype.processChunk=function(t){this.push({data:o.transformTo(this.destType,t.data),meta:t.meta})},e.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,i){var n=t("./GenericWorker"),o=t("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,n),s.prototype.processChunk=function(t){this.streamInfo.crc32=o(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,i){var n=t("../utils"),o=t("./GenericWorker");function s(t){o.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}n.inherits(s,o),s.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}o.prototype.processChunk.call(this,t)},e.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,i){var n=t("../utils"),o=t("./GenericWorker");function s(t){o.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}n.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,i){function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var i=0;i<this._listeners[t].length;i++)this._listeners[t][i].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.end()}),t.on("error",function(t){e.error(t)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=n},{}],29:[function(t,e,i){var n=t("../utils"),o=t("./ConvertWorker"),s=t("./GenericWorker"),r=t("../base64"),a=t("../support"),h=t("../external"),l=null;if(a.nodestream)try{l=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function c(t,e){var i,n=0,o=null,s=0;for(i=0;i<e.length;i++)s+=e[i].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(o=new Uint8Array(s),i=0;i<e.length;i++)o.set(e[i],n),n+=e[i].length;return o;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}function d(t,e){return new h.Promise(function(i,o){var s=[],a=t._internalType,h=t._outputType,l=t._mimeType;t.on("data",function(t,i){s.push(t),e&&e(i)}).on("error",function(t){s=[],o(t)}).on("end",function(){try{var t=function(t,e,i,o){var s=null;switch(t){case"blob":return n.newBlob(i,o);case"base64":return s=c(e,i),r.encode(s);default:return s=c(e,i),n.transformTo(t,s)}}(h,a,s,l);i(t)}catch(t){o(t)}s=[]}).resume()})}function u(t,e,i){var r=e;switch(e){case"blob":r="arraybuffer";break;case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=e,this._mimeType=i,n.checkSupport(r),this._worker=t.pipe(new o(r)),t.lock()}catch(t){this._worker=new s("error"),this._worker.error(t)}}u.prototype={accumulate:function(t){return d(this,t)},on:function(t,e){var i=this;return"data"===t?this._worker.on(t,function(t){e.call(i,t.data,t.meta)}):this._worker.on(t,function(){n.delay(e,arguments,i)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof Buffer,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var o=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);o.append(n),i.blob=0===o.getBlob("application/zip").size}catch(t){i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch(t){i.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,i){for(var n=t("./utils"),o=t("./support"),s=t("./nodejsUtils"),r=t("./stream/GenericWorker"),a=new Array(256),h=0;h<256;h++)a[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;a[254]=a[254]=1;function l(){r.call(this,"utf-8 decode"),this.leftOver=null}function c(){r.call(this,"utf-8 encode")}i.utf8encode=function(t){return o.nodebuffer?s.newBuffer(t,"utf-8"):function(t){var e,i,n,s,r,a=t.length,h=0;for(s=0;s<a;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),h+=i<128?1:i<2048?2:i<65536?3:4;for(e=o.uint8array?new Uint8Array(h):new Array(h),r=0,s=0;r<h;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),i<128?e[r++]=i:i<2048?(e[r++]=192|i>>>6,e[r++]=128|63&i):i<65536?(e[r++]=224|i>>>12,e[r++]=128|i>>>6&63,e[r++]=128|63&i):(e[r++]=240|i>>>18,e[r++]=128|i>>>12&63,e[r++]=128|i>>>6&63,e[r++]=128|63&i);return e}(t)},i.utf8decode=function(t){return o.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,i,o,s,r=t.length,h=new Array(2*r);for(i=0,e=0;e<r;)if((o=t[e++])<128)h[i++]=o;else if((s=a[o])>4)h[i++]=65533,e+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&e<r;)o=o<<6|63&t[e++],s--;s>1?h[i++]=65533:o<65536?h[i++]=o:(o-=65536,h[i++]=55296|o>>10&1023,h[i++]=56320|1023&o)}return h.length!==i&&(h.subarray?h=h.subarray(0,i):h.length=i),n.applyFromCharCode(h)}(t=n.transformTo(o.uint8array?"uint8array":"array",t))},n.inherits(l,r),l.prototype.processChunk=function(t){var e=n.transformTo(o.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var s=e;(e=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),e.set(s,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var r=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;i>=0&&128==(192&t[i]);)i--;return i<0?e:0===i?e:i+a[t[i]]>e?i:e}(e),h=e;r!==e.length&&(o.uint8array?(h=e.subarray(0,r),this.leftOver=e.subarray(r,e.length)):(h=e.slice(0,r),this.leftOver=e.slice(r,e.length))),this.push({data:i.utf8decode(h),meta:t.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=l,n.inherits(c,r),c.prototype.processChunk=function(t){this.push({data:i.utf8encode(t.data),meta:t.meta})},i.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,i){var n=t("./support"),o=t("./base64"),s=t("./nodejsUtils"),r=t("core-js/library/fn/set-immediate"),a=t("./external");function h(t){return t}function l(t,e){for(var i=0;i<t.length;++i)e[i]=255&t.charCodeAt(i);return e}i.newBlob=function(t,e){i.checkSupport("blob");try{return new Blob(t,{type:e})}catch(i){try{for(var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder),o=0;o<t.length;o++)n.append(t[o]);return n.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(t,e,i){var n=[],o=0,s=t.length;if(s<=i)return String.fromCharCode.apply(null,t);for(;o<s;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,t.slice(o,Math.min(o+i,s)))):n.push(String.fromCharCode.apply(null,t.subarray(o,Math.min(o+i,s)))),o+=i;return n.join("")},stringifyByChar:function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,s.newBuffer(1)).length}catch(t){return!1}}()}};function d(t){var e=65536,n=i.getTypeOf(t),o=!0;if("uint8array"===n?o=c.applyCanBeUsed.uint8array:"nodebuffer"===n&&(o=c.applyCanBeUsed.nodebuffer),o)for(;e>1;)try{return c.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2)}return c.stringifyByChar(t)}function u(t,e){for(var i=0;i<t.length;i++)e[i]=t[i];return e}i.applyFromCharCode=d;var p={};p.string={string:h,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return p.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,s.newBuffer(t.length))}},p.array={string:d,array:h,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBuffer(t)}},p.arraybuffer={string:function(t){return d(new Uint8Array(t))},array:function(t){return u(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:h,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBuffer(new Uint8Array(t))}},p.uint8array={string:d,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){var e=new Uint8Array(t.length);return t.length&&e.set(t,0),e.buffer},uint8array:h,nodebuffer:function(t){return s.newBuffer(t)}},p.nodebuffer={string:d,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return p.nodebuffer.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:h},i.transformTo=function(t,e){if(e||(e=""),!t)return e;i.checkSupport(t);var n=i.getTypeOf(e);return p[n][t](e)},i.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&s.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(t){var e,i,n="";for(i=0;i<(t||"").length;i++)n+="\\x"+((e=t.charCodeAt(i))<16?"0":"")+e.toString(16).toUpperCase();return n},i.delay=function(t,e,i){r(function(){t.apply(i||null,e||[])})},i.inherits=function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i},i.extend=function(){var t,e,i={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===i[e]&&(i[e]=arguments[t][e]);return i},i.prepareContent=function(t,e,s,r,h){return a.Promise.resolve(e).then(function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new a.Promise(function(e,i){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){i(t.target.error)},n.readAsArrayBuffer(t)}):t}).then(function(e){var c,d=i.getTypeOf(e);return d?("arraybuffer"===d?e=i.transformTo("uint8array",e):"string"===d&&(h?e=o.decode(e):s&&!0!==r&&(e=l(c=e,n.uint8array?new Uint8Array(c.length):new Array(c.length)))),e):a.Promise.reject(new Error("The data of '"+t+"' is in an unsupported format !"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"core-js/library/fn/set-immediate":36}],33:[function(t,e,i){var n=t("./reader/readerFor"),o=t("./utils"),s=t("./signature"),r=t("./zipEntry"),a=(t("./utf8"),t("./support"));function h(t){this.files=[],this.loadOptions=t}h.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug : unexpected signature ("+o.pretty(e)+", expected "+o.pretty(t)+")")}},isSignature:function(t,e){var i=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(i),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",i=o.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,i,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),i=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(t=new r({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(t<0)throw!this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory");this.reader.setIndex(t);var e=t;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var n=e-i;if(n>0)this.isSignature(e,s.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,i){var n=t("./reader/readerFor"),o=t("./utils"),s=t("./compressedObject"),r=t("./crc32"),a=t("./utf8"),h=t("./compressions"),l=t("./support");function c(t,e){this.options=t,this.loadOptions=e}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,i;if(t.skip(22),this.fileNameLength=t.readInt(2),i=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(i),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,i,n,o=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<o;)e=t.readInt(2),i=t.readInt(2),n=t.readData(i),this.extraFields[e]={id:e,length:i,value:n}},handleUTF8:function(){var t=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var i=o.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var s=o.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=n(t.value);return 1!==e.readInt(1)?null:r(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=n(t.value);return 1!==e.readInt(1)?null:r(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,i){var n=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),s=t("./utf8"),r=t("./compressedObject"),a=t("./stream/GenericWorker"),h=function(t,e,i){this.name=t,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=e,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}};h.prototype={internalStream:function(t){var e=t.toLowerCase(),i="string"===e||"text"===e;"binarystring"!==e&&"text"!==e||(e="string");var o=this._decompressWorker(),r=!this._dataBinary;return r&&!i&&(o=o.pipe(new s.Utf8EncodeWorker)),!r&&i&&(o=o.pipe(new s.Utf8DecodeWorker)),new n(o,e,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof r&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new s.Utf8EncodeWorker)),r.createWorkerFrom(i,t,e)},_decompressWorker:function(){return this._data instanceof r?this._data.getContentWorker():this._data instanceof a?this._data:new o(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<l.length;d++)h.prototype[l[d]]=c;e.exports=h},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,i){t("../modules/web.immediate"),e.exports=t("../modules/_core").setImmediate},{"../modules/_core":40,"../modules/web.immediate":56}],37:[function(t,e,i){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],38:[function(t,e,i){var n=t("./_is-object");e.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},{"./_is-object":51}],39:[function(t,e,i){var n={}.toString;e.exports=function(t){return n.call(t).slice(8,-1)}},{}],40:[function(t,e,i){var n=e.exports={version:"2.3.0"};"number"==typeof __e&&(__e=n)},{}],41:[function(t,e,i){var n=t("./_a-function");e.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)}}return function(){return t.apply(e,arguments)}}},{"./_a-function":37}],42:[function(t,e,i){e.exports=!t("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":45}],43:[function(t,e,i){var n=t("./_is-object"),o=t("./_global").document,s=n(o)&&n(o.createElement);e.exports=function(t){return s?o.createElement(t):{}}},{"./_global":46,"./_is-object":51}],44:[function(t,e,i){var n=t("./_global"),o=t("./_core"),s=t("./_ctx"),r=t("./_hide"),a=function(t,e,i){var h,l,c,d=t&a.F,u=t&a.G,p=t&a.S,f=t&a.P,m=t&a.B,g=t&a.W,_=u?o:o[e]||(o[e]={}),v=_.prototype,y=u?n:p?n[e]:(n[e]||{}).prototype;for(h in u&&(i=e),i)(l=!d&&y&&void 0!==y[h])&&h in _||(c=l?y[h]:i[h],_[h]=u&&"function"!=typeof y[h]?i[h]:m&&l?s(c,n):g&&y[h]==c?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):f&&"function"==typeof c?s(Function.call,c):c,f&&((_.virtual||(_.virtual={}))[h]=c,t&a.R&&v&&!v[h]&&r(v,h,c)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},{"./_core":40,"./_ctx":41,"./_global":46,"./_hide":47}],45:[function(t,e,i){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],46:[function(t,e,i){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],47:[function(t,e,i){var n=t("./_object-dp"),o=t("./_property-desc");e.exports=t("./_descriptors")?function(t,e,i){return n.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},{"./_descriptors":42,"./_object-dp":52,"./_property-desc":53}],48:[function(t,e,i){e.exports=t("./_global").document&&document.documentElement},{"./_global":46}],49:[function(t,e,i){e.exports=!t("./_descriptors")&&!t("./_fails")(function(){return 7!=Object.defineProperty(t("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":42,"./_dom-create":43,"./_fails":45}],50:[function(t,e,i){e.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},{}],51:[function(t,e,i){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],52:[function(t,e,i){var n=t("./_an-object"),o=t("./_ie8-dom-define"),s=t("./_to-primitive"),r=Object.defineProperty;i.f=t("./_descriptors")?Object.defineProperty:function(t,e,i){if(n(t),e=s(e,!0),n(i),o)try{return r(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},{"./_an-object":38,"./_descriptors":42,"./_ie8-dom-define":49,"./_to-primitive":55}],53:[function(t,e,i){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],54:[function(t,e,i){var n,o,s,r=t("./_ctx"),a=t("./_invoke"),h=t("./_html"),l=t("./_dom-create"),c=t("./_global"),d=c.process,u=c.setImmediate,p=c.clearImmediate,f=c.MessageChannel,m=0,g={},_=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},v=function(t){_.call(t.data)};u&&p||(u=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return g[++m]=function(){a("function"==typeof t?t:Function(t),e)},n(m),m},p=function(t){delete g[t]},"process"==t("./_cof")(d)?n=function(t){d.nextTick(r(_,t,1))}:f?(s=(o=new f).port2,o.port1.onmessage=v,n=r(s.postMessage,s,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",v,!1)):n="onreadystatechange"in l("script")?function(t){h.appendChild(l("script")).onreadystatechange=function(){h.removeChild(this),_.call(t)}}:function(t){setTimeout(r(_,t,1),0)}),e.exports={set:u,clear:p}},{"./_cof":39,"./_ctx":41,"./_dom-create":43,"./_global":46,"./_html":48,"./_invoke":50}],55:[function(t,e,i){var n=t("./_is-object");e.exports=function(t,e){if(!n(t))return t;var i,o;if(e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;if("function"==typeof(i=t.valueOf)&&!n(o=i.call(t)))return o;if(!e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":51}],56:[function(t,e,i){var n=t("./_export"),o=t("./_task");n(n.G+n.B,{setImmediate:o.set,clearImmediate:o.clear})},{"./_export":44,"./_task":54}],57:[function(t,e,i){(function(t){var i,n,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var s=0,r=new o(c),a=t.document.createTextNode("");r.observe(a,{characterData:!0}),i=function(){a.data=s=++s%2}}else if(t.setImmediate||void 0===t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var h=new t.MessageChannel;h.port1.onmessage=c,i=function(){h.port2.postMessage(0)}}var l=[];function c(){var t,e;n=!0;for(var i=l.length;i;){for(e=l,l=[],t=-1;++t<i;)e[t]();i=l.length}n=!1}e.exports=function(t){1!==l.push(t)||n||i()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],58:[function(t,e,i){var n=t("immediate");function o(){}var s={},r=["REJECTED"],a=["FULFILLED"],h=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,t!==o&&p(this,t)}function c(t,e,i){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function d(t,e,i){n(function(){var n;try{n=e(i)}catch(e){return s.reject(t,e)}n===t?s.reject(t,new TypeError("Cannot resolve promise with itself")):s.resolve(t,n)})}function u(t){var e=t&&t.then;if(t&&"object"==typeof t&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var i=!1;function n(e){i||(i=!0,s.reject(t,e))}function o(e){i||(i=!0,s.resolve(t,e))}var r=f(function(){e(o,n)});"error"===r.status&&n(r.value)}function f(t,e){var i={};try{i.value=t(e),i.status="success"}catch(t){i.status="error",i.value=t}return i}e.exports=l,l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===r)return this;var i=new this.constructor(o);this.state!==h?d(i,this.state===a?t:e,this.outcome):this.queue.push(new c(i,t,e));return i},c.prototype.callFulfilled=function(t){s.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){d(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){s.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){d(this.promise,this.onRejected,t)},s.resolve=function(t,e){var i=f(u,e);if("error"===i.status)return s.reject(t,i.value);var n=i.value;if(n)p(t,n);else{t.state=a,t.outcome=e;for(var o=-1,r=t.queue.length;++o<r;)t.queue[o].callFulfilled(e)}return t},s.reject=function(t,e){t.state=r,t.outcome=e;for(var i=-1,n=t.queue.length;++i<n;)t.queue[i].callRejected(e);return t},l.resolve=function(t){if(t instanceof this)return t;return s.resolve(new this(o),t)},l.reject=function(t){var e=new this(o);return s.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return this.resolve([]);var r=new Array(i),a=0,h=-1,l=new this(o);for(;++h<i;)c(t[h],h);return l;function c(t,o){e.resolve(t).then(function(t){r[o]=t,++a!==i||n||(n=!0,s.resolve(l,r))},function(t){n||(n=!0,s.reject(l,t))})}},l.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return this.resolve([]);var r=-1,a=new this(o);for(;++r<i;)h=t[r],e.resolve(h).then(function(t){n||(n=!0,s.resolve(a,t))},function(t){n||(n=!0,s.reject(a,t))});var h;return a}},{immediate:57}],59:[function(t,e,i){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":60,"./lib/inflate":61,"./lib/utils/common":62,"./lib/zlib/constants":65}],60:[function(t,e,i){var n=t("./zlib/deflate"),o=t("./utils/common"),s=t("./utils/strings"),r=t("./zlib/messages"),a=t("./zlib/zstream"),h=Object.prototype.toString,l=0,c=-1,d=0,u=8;function p(t){if(!(this instanceof p))return new p(t);this.options=o.assign({level:c,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==l)throw new Error(r[i]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var f;if(f="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(i=n.deflateSetDictionary(this.strm,f))!==l)throw new Error(r[i]);this._dict_set=!0}}function f(t,e){var i=new p(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}p.prototype.push=function(t,e){var i,r,a=this.strm,c=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=s.string2buf(t):"[object ArrayBuffer]"===h.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new o.Buf8(c),a.next_out=0,a.avail_out=c),1!==(i=n.deflate(a,r))&&i!==l)return this.onEnd(i),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(s.buf2binstring(o.shrinkBuf(a.output,a.next_out))):this.onData(o.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==i);return 4===r?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===l):2!==r||(this.onEnd(l),a.avail_out=0,!0)},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=p,i.deflate=f,i.deflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},i.gzip=function(t,e){return(e=e||{}).gzip=!0,f(t,e)}},{"./utils/common":62,"./utils/strings":63,"./zlib/deflate":67,"./zlib/messages":72,"./zlib/zstream":74}],61:[function(t,e,i){var n=t("./zlib/inflate"),o=t("./utils/common"),s=t("./utils/strings"),r=t("./zlib/constants"),a=t("./zlib/messages"),h=t("./zlib/zstream"),l=t("./zlib/gzheader"),c=Object.prototype.toString;function d(t){if(!(this instanceof d))return new d(t);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,e.windowBits);if(i!==r.Z_OK)throw new Error(a[i]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function u(t,e){var i=new d(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}d.prototype.push=function(t,e){var i,a,h,l,d,u,p=this.strm,f=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?r.Z_FINISH:r.Z_NO_FLUSH,"string"==typeof t?p.input=s.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new o.Buf8(f),p.next_out=0,p.avail_out=f),(i=n.inflate(p,r.Z_NO_FLUSH))===r.Z_NEED_DICT&&m&&(u="string"==typeof m?s.string2buf(m):"[object ArrayBuffer]"===c.call(m)?new Uint8Array(m):m,i=n.inflateSetDictionary(this.strm,u)),i===r.Z_BUF_ERROR&&!0===g&&(i=r.Z_OK,g=!1),i!==r.Z_STREAM_END&&i!==r.Z_OK)return this.onEnd(i),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&i!==r.Z_STREAM_END&&(0!==p.avail_in||a!==r.Z_FINISH&&a!==r.Z_SYNC_FLUSH)||("string"===this.options.to?(h=s.utf8border(p.output,p.next_out),l=p.next_out-h,d=s.buf2string(p.output,h),p.next_out=l,p.avail_out=f-l,l&&o.arraySet(p.output,p.output,h,l,0),this.onData(d)):this.onData(o.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((p.avail_in>0||0===p.avail_out)&&i!==r.Z_STREAM_END);return i===r.Z_STREAM_END&&(a=r.Z_FINISH),a===r.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===r.Z_OK):a!==r.Z_SYNC_FLUSH||(this.onEnd(r.Z_OK),p.avail_out=0,!0)},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===r.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Inflate=d,i.inflate=u,i.inflateRaw=function(t,e){return(e=e||{}).raw=!0,u(t,e)},i.ungzip=u},{"./utils/common":62,"./utils/strings":63,"./zlib/constants":65,"./zlib/gzheader":68,"./zlib/inflate":70,"./zlib/messages":72,"./zlib/zstream":74}],62:[function(t,e,i){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,i,n,o){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),o);else for(var s=0;s<n;s++)t[o+s]=e[i+s]},flattenChunks:function(t){var e,i,n,o,s,r;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(r=new Uint8Array(n),o=0,e=0,i=t.length;e<i;e++)s=t[e],r.set(s,o),o+=s.length;return r}},s={arraySet:function(t,e,i,n,o){for(var s=0;s<n;s++)t[o+s]=e[i+s]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(n)},{}],63:[function(t,e,i){var n=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var r=new n.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function h(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var i="",r=0;r<e;r++)i+=String.fromCharCode(t[r]);return i}r[254]=r[254]=1,i.string2buf=function(t){var e,i,o,s,r,a=t.length,h=0;for(s=0;s<a;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(o=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(o-56320),s++),h+=i<128?1:i<2048?2:i<65536?3:4;for(e=new n.Buf8(h),r=0,s=0;r<h;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(o=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(o-56320),s++),i<128?e[r++]=i:i<2048?(e[r++]=192|i>>>6,e[r++]=128|63&i):i<65536?(e[r++]=224|i>>>12,e[r++]=128|i>>>6&63,e[r++]=128|63&i):(e[r++]=240|i>>>18,e[r++]=128|i>>>12&63,e[r++]=128|i>>>6&63,e[r++]=128|63&i);return e},i.buf2binstring=function(t){return h(t,t.length)},i.binstring2buf=function(t){for(var e=new n.Buf8(t.length),i=0,o=e.length;i<o;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){var i,n,o,s,a=e||t.length,l=new Array(2*a);for(n=0,i=0;i<a;)if((o=t[i++])<128)l[n++]=o;else if((s=r[o])>4)l[n++]=65533,i+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&i<a;)o=o<<6|63&t[i++],s--;s>1?l[n++]=65533:o<65536?l[n++]=o:(o-=65536,l[n++]=55296|o>>10&1023,l[n++]=56320|1023&o)}return h(l,n)},i.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;i>=0&&128==(192&t[i]);)i--;return i<0?e:0===i?e:i+r[t[i]]>e?i:e}},{"./common":62}],64:[function(t,e,i){e.exports=function(t,e,i,n){for(var o=65535&t|0,s=t>>>16&65535|0,r=0;0!==i;){i-=r=i>2e3?2e3:i;do{s=s+(o=o+e[n++]|0)|0}while(--r);o%=65521,s%=65521}return o|s<<16|0}},{}],65:[function(t,e,i){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],66:[function(t,e,i){var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();e.exports=function(t,e,i,o){var s=n,r=o+i;t^=-1;for(var a=o;a<r;a++)t=t>>>8^s[255&(t^e[a])];return-1^t}},{}],67:[function(t,e,i){var n,o=t("../utils/common"),s=t("./trees"),r=t("./adler32"),a=t("./crc32"),h=t("./messages"),l=0,c=1,d=3,u=4,p=5,f=0,m=1,g=-2,_=-3,v=-5,y=-1,b=1,x=2,w=3,k=4,L=0,T=2,S=8,C=9,M=15,E=8,P=286,D=30,O=19,A=2*P+1,I=15,z=3,R=258,N=R+z+1,B=32,F=42,j=69,H=73,U=91,$=103,W=113,Z=666,V=1,G=2,Y=3,q=4,X=3;function K(t,e){return t.msg=h[e],e}function J(t){return(t<<1)-(t>4?9:0)}function Q(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(o.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function et(t,e){s._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function it(t,e){t.pending_buf[t.pending++]=e}function nt(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function ot(t,e){var i,n,o=t.max_chain_length,s=t.strstart,r=t.prev_length,a=t.nice_match,h=t.strstart>t.w_size-N?t.strstart-(t.w_size-N):0,l=t.window,c=t.w_mask,d=t.prev,u=t.strstart+R,p=l[s+r-1],f=l[s+r];t.prev_length>=t.good_match&&(o>>=2),a>t.lookahead&&(a=t.lookahead);do{if(l[(i=e)+r]===f&&l[i+r-1]===p&&l[i]===l[s]&&l[++i]===l[s+1]){s+=2,i++;do{}while(l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&s<u);if(n=R-(u-s),s=u-R,n>r){if(t.match_start=e,r=n,n>=a)break;p=l[s+r-1],f=l[s+r]}}}while((e=d[e&c])>h&&0!=--o);return r<=t.lookahead?r:t.lookahead}function st(t){var e,i,n,s,h,l,c,d,u,p,f=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-N)){o.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=i=t.hash_size;do{n=t.head[--e],t.head[e]=n>=f?n-f:0}while(--i);e=i=f;do{n=t.prev[--e],t.prev[e]=n>=f?n-f:0}while(--i);s+=f}if(0===t.strm.avail_in)break;if(l=t.strm,c=t.window,d=t.strstart+t.lookahead,u=s,p=void 0,(p=l.avail_in)>u&&(p=u),i=0===p?0:(l.avail_in-=p,o.arraySet(c,l.input,l.next_in,p,d),1===l.state.wrap?l.adler=r(l.adler,c,p,d):2===l.state.wrap&&(l.adler=a(l.adler,c,p,d)),l.next_in+=p,l.total_in+=p,p),t.lookahead+=i,t.lookahead+t.insert>=z)for(h=t.strstart-t.insert,t.ins_h=t.window[h],t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+z-1])&t.hash_mask,t.prev[h&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=h,h++,t.insert--,!(t.lookahead+t.insert<z)););}while(t.lookahead<N&&0!==t.strm.avail_in)}function rt(t,e){for(var i,n;;){if(t.lookahead<N){if(st(t),t.lookahead<N&&e===l)return V;if(0===t.lookahead)break}if(i=0,t.lookahead>=z&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-N&&(t.match_length=ot(t,i)),t.match_length>=z)if(n=s._tr_tally(t,t.strstart-t.match_start,t.match_length-z),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=z){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(et(t,!1),0===t.strm.avail_out))return V}return t.insert=t.strstart<z-1?t.strstart:z-1,e===u?(et(t,!0),0===t.strm.avail_out?Y:q):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?V:G}function at(t,e){for(var i,n,o;;){if(t.lookahead<N){if(st(t),t.lookahead<N&&e===l)return V;if(0===t.lookahead)break}if(i=0,t.lookahead>=z&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=z-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-N&&(t.match_length=ot(t,i),t.match_length<=5&&(t.strategy===b||t.match_length===z&&t.strstart-t.match_start>4096)&&(t.match_length=z-1)),t.prev_length>=z&&t.match_length<=t.prev_length){o=t.strstart+t.lookahead-z,n=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-z),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=o&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=z-1,t.strstart++,n&&(et(t,!1),0===t.strm.avail_out))return V}else if(t.match_available){if((n=s._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return V}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<z-1?t.strstart:z-1,e===u?(et(t,!0),0===t.strm.avail_out?Y:q):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?V:G}function ht(t,e,i,n,o){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=o}function lt(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=T,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?F:W,t.adler=2===e.wrap?0:1,e.last_flush=l,s._tr_init(e),f):K(t,g)}function ct(t){var e,i=lt(t);return i===f&&((e=t.state).window_size=2*e.w_size,Q(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=z-1,e.match_available=0,e.ins_h=0),i}function dt(t,e,i,n,s,r){if(!t)return g;var a=1;if(e===y&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),s<1||s>C||i!==S||n<8||n>15||e<0||e>9||r<0||r>k)return K(t,g);8===n&&(n=9);var h=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*A),this.dyn_dtree=new o.Buf16(2*(2*D+1)),this.bl_tree=new o.Buf16(2*(2*O+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(I+1),this.heap=new o.Buf16(2*P+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*P+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return t.state=h,h.strm=t,h.wrap=a,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+z-1)/z),h.window=new o.Buf8(2*h.w_size),h.head=new o.Buf16(h.hash_size),h.prev=new o.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new o.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=r,h.method=i,ct(t)}n=[new ht(0,0,0,0,function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(st(t),0===t.lookahead&&e===l)return V;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,et(t,!1),0===t.strm.avail_out))return V;if(t.strstart-t.block_start>=t.w_size-N&&(et(t,!1),0===t.strm.avail_out))return V}return t.insert=0,e===u?(et(t,!0),0===t.strm.avail_out?Y:q):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),V)}),new ht(4,4,8,4,rt),new ht(4,5,16,8,rt),new ht(4,6,32,32,rt),new ht(4,4,16,16,at),new ht(8,16,32,32,at),new ht(8,16,128,128,at),new ht(8,32,128,256,at),new ht(32,128,258,1024,at),new ht(32,258,258,4096,at)],i.deflateInit=function(t,e){return dt(t,e,S,M,E,L)},i.deflateInit2=dt,i.deflateReset=ct,i.deflateResetKeep=lt,i.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,f):g},i.deflate=function(t,e){var i,o,r,h;if(!t||!t.state||e>p||e<0)return t?K(t,g):g;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===Z&&e!==u)return K(t,0===t.avail_out?v:g);if(o.strm=t,i=o.last_flush,o.last_flush=e,o.status===F)if(2===o.wrap)t.adler=0,it(o,31),it(o,139),it(o,8),o.gzhead?(it(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),it(o,255&o.gzhead.time),it(o,o.gzhead.time>>8&255),it(o,o.gzhead.time>>16&255),it(o,o.gzhead.time>>24&255),it(o,9===o.level?2:o.strategy>=x||o.level<2?4:0),it(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(it(o,255&o.gzhead.extra.length),it(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=a(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=j):(it(o,0),it(o,0),it(o,0),it(o,0),it(o,0),it(o,9===o.level?2:o.strategy>=x||o.level<2?4:0),it(o,X),o.status=W);else{var _=S+(o.w_bits-8<<4)<<8;_|=(o.strategy>=x||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(_|=B),_+=31-_%31,o.status=W,nt(o,_),0!==o.strstart&&(nt(o,t.adler>>>16),nt(o,65535&t.adler)),t.adler=1}if(o.status===j)if(o.gzhead.extra){for(r=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>r&&(t.adler=a(t.adler,o.pending_buf,o.pending-r,r)),tt(t),r=o.pending,o.pending!==o.pending_buf_size));)it(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>r&&(t.adler=a(t.adler,o.pending_buf,o.pending-r,r)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=H)}else o.status=H;if(o.status===H)if(o.gzhead.name){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(t.adler=a(t.adler,o.pending_buf,o.pending-r,r)),tt(t),r=o.pending,o.pending===o.pending_buf_size)){h=1;break}h=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,it(o,h)}while(0!==h);o.gzhead.hcrc&&o.pending>r&&(t.adler=a(t.adler,o.pending_buf,o.pending-r,r)),0===h&&(o.gzindex=0,o.status=U)}else o.status=U;if(o.status===U)if(o.gzhead.comment){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(t.adler=a(t.adler,o.pending_buf,o.pending-r,r)),tt(t),r=o.pending,o.pending===o.pending_buf_size)){h=1;break}h=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,it(o,h)}while(0!==h);o.gzhead.hcrc&&o.pending>r&&(t.adler=a(t.adler,o.pending_buf,o.pending-r,r)),0===h&&(o.status=$)}else o.status=$;if(o.status===$&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&tt(t),o.pending+2<=o.pending_buf_size&&(it(o,255&t.adler),it(o,t.adler>>8&255),t.adler=0,o.status=W)):o.status=W),0!==o.pending){if(tt(t),0===t.avail_out)return o.last_flush=-1,f}else if(0===t.avail_in&&J(e)<=J(i)&&e!==u)return K(t,v);if(o.status===Z&&0!==t.avail_in)return K(t,v);if(0!==t.avail_in||0!==o.lookahead||e!==l&&o.status!==Z){var y=o.strategy===x?function(t,e){for(var i;;){if(0===t.lookahead&&(st(t),0===t.lookahead)){if(e===l)return V;break}if(t.match_length=0,i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(et(t,!1),0===t.strm.avail_out))return V}return t.insert=0,e===u?(et(t,!0),0===t.strm.avail_out?Y:q):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?V:G}(o,e):o.strategy===w?function(t,e){for(var i,n,o,r,a=t.window;;){if(t.lookahead<=R){if(st(t),t.lookahead<=R&&e===l)return V;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=z&&t.strstart>0&&(n=a[o=t.strstart-1])===a[++o]&&n===a[++o]&&n===a[++o]){r=t.strstart+R;do{}while(n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&o<r);t.match_length=R-(r-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=z?(i=s._tr_tally(t,1,t.match_length-z),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(et(t,!1),0===t.strm.avail_out))return V}return t.insert=0,e===u?(et(t,!0),0===t.strm.avail_out?Y:q):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?V:G}(o,e):n[o.level].func(o,e);if(y!==Y&&y!==q||(o.status=Z),y===V||y===Y)return 0===t.avail_out&&(o.last_flush=-1),f;if(y===G&&(e===c?s._tr_align(o):e!==p&&(s._tr_stored_block(o,0,0,!1),e===d&&(Q(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),tt(t),0===t.avail_out))return o.last_flush=-1,f}return e!==u?f:o.wrap<=0?m:(2===o.wrap?(it(o,255&t.adler),it(o,t.adler>>8&255),it(o,t.adler>>16&255),it(o,t.adler>>24&255),it(o,255&t.total_in),it(o,t.total_in>>8&255),it(o,t.total_in>>16&255),it(o,t.total_in>>24&255)):(nt(o,t.adler>>>16),nt(o,65535&t.adler)),tt(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?f:m)},i.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==F&&e!==j&&e!==H&&e!==U&&e!==$&&e!==W&&e!==Z?K(t,g):(t.state=null,e===W?K(t,_):f):g},i.deflateSetDictionary=function(t,e){var i,n,s,a,h,l,c,d,u=e.length;if(!t||!t.state)return g;if(2===(a=(i=t.state).wrap)||1===a&&i.status!==F||i.lookahead)return g;for(1===a&&(t.adler=r(t.adler,e,u,0)),i.wrap=0,u>=i.w_size&&(0===a&&(Q(i.head),i.strstart=0,i.block_start=0,i.insert=0),d=new o.Buf8(i.w_size),o.arraySet(d,e,u-i.w_size,i.w_size,0),e=d,u=i.w_size),h=t.avail_in,l=t.next_in,c=t.input,t.avail_in=u,t.next_in=0,t.input=e,st(i);i.lookahead>=z;){n=i.strstart,s=i.lookahead-(z-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+z-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++}while(--s);i.strstart=n,i.lookahead=z-1,st(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=z-1,i.match_available=0,t.next_in=l,t.input=c,t.avail_in=h,i.wrap=a,f},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":62,"./adler32":64,"./crc32":66,"./messages":72,"./trees":73}],68:[function(t,e,i){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],69:[function(t,e,i){e.exports=function(t,e){var i,n,o,s,r,a,h,l,c,d,u,p,f,m,g,_,v,y,b,x,w,k,L,T,S;i=t.state,n=t.next_in,T=t.input,o=n+(t.avail_in-5),s=t.next_out,S=t.output,r=s-(e-t.avail_out),a=s+(t.avail_out-257),h=i.dmax,l=i.wsize,c=i.whave,d=i.wnext,u=i.window,p=i.hold,f=i.bits,m=i.lencode,g=i.distcode,_=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;t:do{f<15&&(p+=T[n++]<<f,f+=8,p+=T[n++]<<f,f+=8),y=m[p&_];e:for(;;){if(p>>>=b=y>>>24,f-=b,0===(b=y>>>16&255))S[s++]=65535&y;else{if(!(16&b)){if(0==(64&b)){y=m[(65535&y)+(p&(1<<b)-1)];continue e}if(32&b){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}x=65535&y,(b&=15)&&(f<b&&(p+=T[n++]<<f,f+=8),x+=p&(1<<b)-1,p>>>=b,f-=b),f<15&&(p+=T[n++]<<f,f+=8,p+=T[n++]<<f,f+=8),y=g[p&v];i:for(;;){if(p>>>=b=y>>>24,f-=b,!(16&(b=y>>>16&255))){if(0==(64&b)){y=g[(65535&y)+(p&(1<<b)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(w=65535&y,f<(b&=15)&&(p+=T[n++]<<f,(f+=8)<b&&(p+=T[n++]<<f,f+=8)),(w+=p&(1<<b)-1)>h){t.msg="invalid distance too far back",i.mode=30;break t}if(p>>>=b,f-=b,w>(b=s-r)){if((b=w-b)>c&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(k=0,L=u,0===d){if(k+=l-b,b<x){x-=b;do{S[s++]=u[k++]}while(--b);k=s-w,L=S}}else if(d<b){if(k+=l+d-b,(b-=d)<x){x-=b;do{S[s++]=u[k++]}while(--b);if(k=0,d<x){x-=b=d;do{S[s++]=u[k++]}while(--b);k=s-w,L=S}}}else if(k+=d-b,b<x){x-=b;do{S[s++]=u[k++]}while(--b);k=s-w,L=S}for(;x>2;)S[s++]=L[k++],S[s++]=L[k++],S[s++]=L[k++],x-=3;x&&(S[s++]=L[k++],x>1&&(S[s++]=L[k++]))}else{k=s-w;do{S[s++]=S[k++],S[s++]=S[k++],S[s++]=S[k++],x-=3}while(x>2);x&&(S[s++]=S[k++],x>1&&(S[s++]=S[k++]))}break}}break}}while(n<o&&s<a);n-=x=f>>3,p&=(1<<(f-=x<<3))-1,t.next_in=n,t.next_out=s,t.avail_in=n<o?o-n+5:5-(n-o),t.avail_out=s<a?a-s+257:257-(s-a),i.hold=p,i.bits=f}},{}],70:[function(t,e,i){var n=t("../utils/common"),o=t("./adler32"),s=t("./crc32"),r=t("./inffast"),a=t("./inftrees"),h=0,l=1,c=2,d=4,u=5,p=6,f=0,m=1,g=2,_=-2,v=-3,y=-4,b=-5,x=8,w=1,k=2,L=3,T=4,S=5,C=6,M=7,E=8,P=9,D=10,O=11,A=12,I=13,z=14,R=15,N=16,B=17,F=18,j=19,H=20,U=21,$=22,W=23,Z=24,V=25,G=26,Y=27,q=28,X=29,K=30,J=31,Q=32,tt=852,et=592,it=15;function nt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function ot(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=w,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(tt),e.distcode=e.distdyn=new n.Buf32(et),e.sane=1,e.back=-1,f):_}function st(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,ot(t)):_}function rt(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,st(t))):_}function at(t,e){var i,o;return t?(o=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},t.state=o,o.window=null,(i=rt(t,e))!==f&&(t.state=null),i):_}var ht,lt,ct=!0;function dt(t){if(ct){var e;for(ht=new n.Buf32(512),lt=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(l,t.lens,0,288,ht,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(c,t.lens,0,32,lt,0,t.work,{bits:5}),ct=!1}t.lencode=ht,t.lenbits=9,t.distcode=lt,t.distbits=5}function ut(t,e,i,o){var s,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new n.Buf8(r.wsize)),o>=r.wsize?(n.arraySet(r.window,e,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((s=r.wsize-r.wnext)>o&&(s=o),n.arraySet(r.window,e,i-o,s,r.wnext),(o-=s)?(n.arraySet(r.window,e,i-o,o,0),r.wnext=o,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0}i.inflateReset=st,i.inflateReset2=rt,i.inflateResetKeep=ot,i.inflateInit=function(t){return at(t,it)},i.inflateInit2=at,i.inflate=function(t,e){var i,tt,et,it,ot,st,rt,at,ht,lt,ct,pt,ft,mt,gt,_t,vt,yt,bt,xt,wt,kt,Lt,Tt,St=0,Ct=new n.Buf8(4),Mt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return _;(i=t.state).mode===A&&(i.mode=I),ot=t.next_out,et=t.output,rt=t.avail_out,it=t.next_in,tt=t.input,st=t.avail_in,at=i.hold,ht=i.bits,lt=st,ct=rt,kt=f;t:for(;;)switch(i.mode){case w:if(0===i.wrap){i.mode=I;break}for(;ht<16;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}if(2&i.wrap&&35615===at){i.check=0,Ct[0]=255&at,Ct[1]=at>>>8&255,i.check=s(i.check,Ct,2,0),at=0,ht=0,i.mode=k;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&at)<<8)+(at>>8))%31){t.msg="incorrect header check",i.mode=K;break}if((15&at)!==x){t.msg="unknown compression method",i.mode=K;break}if(ht-=4,wt=8+(15&(at>>>=4)),0===i.wbits)i.wbits=wt;else if(wt>i.wbits){t.msg="invalid window size",i.mode=K;break}i.dmax=1<<wt,t.adler=i.check=1,i.mode=512&at?D:A,at=0,ht=0;break;case k:for(;ht<16;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}if(i.flags=at,(255&i.flags)!==x){t.msg="unknown compression method",i.mode=K;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=K;break}i.head&&(i.head.text=at>>8&1),512&i.flags&&(Ct[0]=255&at,Ct[1]=at>>>8&255,i.check=s(i.check,Ct,2,0)),at=0,ht=0,i.mode=L;case L:for(;ht<32;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}i.head&&(i.head.time=at),512&i.flags&&(Ct[0]=255&at,Ct[1]=at>>>8&255,Ct[2]=at>>>16&255,Ct[3]=at>>>24&255,i.check=s(i.check,Ct,4,0)),at=0,ht=0,i.mode=T;case T:for(;ht<16;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}i.head&&(i.head.xflags=255&at,i.head.os=at>>8),512&i.flags&&(Ct[0]=255&at,Ct[1]=at>>>8&255,i.check=s(i.check,Ct,2,0)),at=0,ht=0,i.mode=S;case S:if(1024&i.flags){for(;ht<16;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}i.length=at,i.head&&(i.head.extra_len=at),512&i.flags&&(Ct[0]=255&at,Ct[1]=at>>>8&255,i.check=s(i.check,Ct,2,0)),at=0,ht=0}else i.head&&(i.head.extra=null);i.mode=C;case C:if(1024&i.flags&&((pt=i.length)>st&&(pt=st),pt&&(i.head&&(wt=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,tt,it,pt,wt)),512&i.flags&&(i.check=s(i.check,tt,pt,it)),st-=pt,it+=pt,i.length-=pt),i.length))break t;i.length=0,i.mode=M;case M:if(2048&i.flags){if(0===st)break t;pt=0;do{wt=tt[it+pt++],i.head&&wt&&i.length<65536&&(i.head.name+=String.fromCharCode(wt))}while(wt&&pt<st);if(512&i.flags&&(i.check=s(i.check,tt,pt,it)),st-=pt,it+=pt,wt)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=E;case E:if(4096&i.flags){if(0===st)break t;pt=0;do{wt=tt[it+pt++],i.head&&wt&&i.length<65536&&(i.head.comment+=String.fromCharCode(wt))}while(wt&&pt<st);if(512&i.flags&&(i.check=s(i.check,tt,pt,it)),st-=pt,it+=pt,wt)break t}else i.head&&(i.head.comment=null);i.mode=P;case P:if(512&i.flags){for(;ht<16;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}if(at!==(65535&i.check)){t.msg="header crc mismatch",i.mode=K;break}at=0,ht=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=A;break;case D:for(;ht<32;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}t.adler=i.check=nt(at),at=0,ht=0,i.mode=O;case O:if(0===i.havedict)return t.next_out=ot,t.avail_out=rt,t.next_in=it,t.avail_in=st,i.hold=at,i.bits=ht,g;t.adler=i.check=1,i.mode=A;case A:if(e===u||e===p)break t;case I:if(i.last){at>>>=7&ht,ht-=7&ht,i.mode=Y;break}for(;ht<3;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}switch(i.last=1&at,ht-=1,3&(at>>>=1)){case 0:i.mode=z;break;case 1:if(dt(i),i.mode=H,e===p){at>>>=2,ht-=2;break t}break;case 2:i.mode=B;break;case 3:t.msg="invalid block type",i.mode=K}at>>>=2,ht-=2;break;case z:for(at>>>=7&ht,ht-=7&ht;ht<32;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}if((65535&at)!=(at>>>16^65535)){t.msg="invalid stored block lengths",i.mode=K;break}if(i.length=65535&at,at=0,ht=0,i.mode=R,e===p)break t;case R:i.mode=N;case N:if(pt=i.length){if(pt>st&&(pt=st),pt>rt&&(pt=rt),0===pt)break t;n.arraySet(et,tt,it,pt,ot),st-=pt,it+=pt,rt-=pt,ot+=pt,i.length-=pt;break}i.mode=A;break;case B:for(;ht<14;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}if(i.nlen=257+(31&at),at>>>=5,ht-=5,i.ndist=1+(31&at),at>>>=5,ht-=5,i.ncode=4+(15&at),at>>>=4,ht-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=K;break}i.have=0,i.mode=F;case F:for(;i.have<i.ncode;){for(;ht<3;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}i.lens[Mt[i.have++]]=7&at,at>>>=3,ht-=3}for(;i.have<19;)i.lens[Mt[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Lt={bits:i.lenbits},kt=a(h,i.lens,0,19,i.lencode,0,i.work,Lt),i.lenbits=Lt.bits,kt){t.msg="invalid code lengths set",i.mode=K;break}i.have=0,i.mode=j;case j:for(;i.have<i.nlen+i.ndist;){for(;_t=(St=i.lencode[at&(1<<i.lenbits)-1])>>>16&255,vt=65535&St,!((gt=St>>>24)<=ht);){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}if(vt<16)at>>>=gt,ht-=gt,i.lens[i.have++]=vt;else{if(16===vt){for(Tt=gt+2;ht<Tt;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}if(at>>>=gt,ht-=gt,0===i.have){t.msg="invalid bit length repeat",i.mode=K;break}wt=i.lens[i.have-1],pt=3+(3&at),at>>>=2,ht-=2}else if(17===vt){for(Tt=gt+3;ht<Tt;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}ht-=gt,wt=0,pt=3+(7&(at>>>=gt)),at>>>=3,ht-=3}else{for(Tt=gt+7;ht<Tt;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}ht-=gt,wt=0,pt=11+(127&(at>>>=gt)),at>>>=7,ht-=7}if(i.have+pt>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=K;break}for(;pt--;)i.lens[i.have++]=wt}}if(i.mode===K)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=K;break}if(i.lenbits=9,Lt={bits:i.lenbits},kt=a(l,i.lens,0,i.nlen,i.lencode,0,i.work,Lt),i.lenbits=Lt.bits,kt){t.msg="invalid literal/lengths set",i.mode=K;break}if(i.distbits=6,i.distcode=i.distdyn,Lt={bits:i.distbits},kt=a(c,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Lt),i.distbits=Lt.bits,kt){t.msg="invalid distances set",i.mode=K;break}if(i.mode=H,e===p)break t;case H:i.mode=U;case U:if(st>=6&&rt>=258){t.next_out=ot,t.avail_out=rt,t.next_in=it,t.avail_in=st,i.hold=at,i.bits=ht,r(t,ct),ot=t.next_out,et=t.output,rt=t.avail_out,it=t.next_in,tt=t.input,st=t.avail_in,at=i.hold,ht=i.bits,i.mode===A&&(i.back=-1);break}for(i.back=0;_t=(St=i.lencode[at&(1<<i.lenbits)-1])>>>16&255,vt=65535&St,!((gt=St>>>24)<=ht);){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}if(_t&&0==(240&_t)){for(yt=gt,bt=_t,xt=vt;_t=(St=i.lencode[xt+((at&(1<<yt+bt)-1)>>yt)])>>>16&255,vt=65535&St,!(yt+(gt=St>>>24)<=ht);){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}at>>>=yt,ht-=yt,i.back+=yt}if(at>>>=gt,ht-=gt,i.back+=gt,i.length=vt,0===_t){i.mode=G;break}if(32&_t){i.back=-1,i.mode=A;break}if(64&_t){t.msg="invalid literal/length code",i.mode=K;break}i.extra=15&_t,i.mode=$;case $:if(i.extra){for(Tt=i.extra;ht<Tt;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}i.length+=at&(1<<i.extra)-1,at>>>=i.extra,ht-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=W;case W:for(;_t=(St=i.distcode[at&(1<<i.distbits)-1])>>>16&255,vt=65535&St,!((gt=St>>>24)<=ht);){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}if(0==(240&_t)){for(yt=gt,bt=_t,xt=vt;_t=(St=i.distcode[xt+((at&(1<<yt+bt)-1)>>yt)])>>>16&255,vt=65535&St,!(yt+(gt=St>>>24)<=ht);){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}at>>>=yt,ht-=yt,i.back+=yt}if(at>>>=gt,ht-=gt,i.back+=gt,64&_t){t.msg="invalid distance code",i.mode=K;break}i.offset=vt,i.extra=15&_t,i.mode=Z;case Z:if(i.extra){for(Tt=i.extra;ht<Tt;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}i.offset+=at&(1<<i.extra)-1,at>>>=i.extra,ht-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=K;break}i.mode=V;case V:if(0===rt)break t;if(pt=ct-rt,i.offset>pt){if((pt=i.offset-pt)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=K;break}pt>i.wnext?(pt-=i.wnext,ft=i.wsize-pt):ft=i.wnext-pt,pt>i.length&&(pt=i.length),mt=i.window}else mt=et,ft=ot-i.offset,pt=i.length;pt>rt&&(pt=rt),rt-=pt,i.length-=pt;do{et[ot++]=mt[ft++]}while(--pt);0===i.length&&(i.mode=U);break;case G:if(0===rt)break t;et[ot++]=i.length,rt--,i.mode=U;break;case Y:if(i.wrap){for(;ht<32;){if(0===st)break t;st--,at|=tt[it++]<<ht,ht+=8}if(ct-=rt,t.total_out+=ct,i.total+=ct,ct&&(t.adler=i.check=i.flags?s(i.check,et,ct,ot-ct):o(i.check,et,ct,ot-ct)),ct=rt,(i.flags?at:nt(at))!==i.check){t.msg="incorrect data check",i.mode=K;break}at=0,ht=0}i.mode=q;case q:if(i.wrap&&i.flags){for(;ht<32;){if(0===st)break t;st--,at+=tt[it++]<<ht,ht+=8}if(at!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=K;break}at=0,ht=0}i.mode=X;case X:kt=m;break t;case K:kt=v;break t;case J:return y;case Q:default:return _}return t.next_out=ot,t.avail_out=rt,t.next_in=it,t.avail_in=st,i.hold=at,i.bits=ht,(i.wsize||ct!==t.avail_out&&i.mode<K&&(i.mode<Y||e!==d))&&ut(t,t.output,t.next_out,ct-t.avail_out)?(i.mode=J,y):(lt-=t.avail_in,ct-=t.avail_out,t.total_in+=lt,t.total_out+=ct,i.total+=ct,i.wrap&&ct&&(t.adler=i.check=i.flags?s(i.check,et,ct,t.next_out-ct):o(i.check,et,ct,t.next_out-ct)),t.data_type=i.bits+(i.last?64:0)+(i.mode===A?128:0)+(i.mode===H||i.mode===R?256:0),(0===lt&&0===ct||e===d)&&kt===f&&(kt=b),kt)},i.inflateEnd=function(t){if(!t||!t.state)return _;var e=t.state;return e.window&&(e.window=null),t.state=null,f},i.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?_:(i.head=e,e.done=!1,f):_},i.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&i.mode!==O?_:i.mode===O&&o(1,e,n,0)!==i.check?v:ut(t,e,n,n)?(i.mode=J,y):(i.havedict=1,f):_},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":62,"./adler32":64,"./crc32":66,"./inffast":69,"./inftrees":71}],71:[function(t,e,i){var n=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],r=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,i,h,l,c,d,u){var p,f,m,g,_,v,y,b,x,w=u.bits,k=0,L=0,T=0,S=0,C=0,M=0,E=0,P=0,D=0,O=0,A=null,I=0,z=new n.Buf16(16),R=new n.Buf16(16),N=null,B=0;for(k=0;k<=15;k++)z[k]=0;for(L=0;L<h;L++)z[e[i+L]]++;for(C=w,S=15;S>=1&&0===z[S];S--);if(C>S&&(C=S),0===S)return l[c++]=20971520,l[c++]=20971520,u.bits=1,0;for(T=1;T<S&&0===z[T];T++);for(C<T&&(C=T),P=1,k=1;k<=15;k++)if(P<<=1,(P-=z[k])<0)return-1;if(P>0&&(0===t||1!==S))return-1;for(R[1]=0,k=1;k<15;k++)R[k+1]=R[k]+z[k];for(L=0;L<h;L++)0!==e[i+L]&&(d[R[e[i+L]]++]=L);if(0===t?(A=N=d,v=19):1===t?(A=o,I-=257,N=s,B-=257,v=256):(A=r,N=a,v=-1),O=0,L=0,k=T,_=c,M=C,E=0,m=-1,g=(D=1<<C)-1,1===t&&D>852||2===t&&D>592)return 1;for(;;){0,y=k-E,d[L]<v?(b=0,x=d[L]):d[L]>v?(b=N[B+d[L]],x=A[I+d[L]]):(b=96,x=0),p=1<<k-E,T=f=1<<M;do{l[_+(O>>E)+(f-=p)]=y<<24|b<<16|x|0}while(0!==f);for(p=1<<k-1;O&p;)p>>=1;if(0!==p?(O&=p-1,O+=p):O=0,L++,0==--z[k]){if(k===S)break;k=e[i+d[L]]}if(k>C&&(O&g)!==m){for(0===E&&(E=C),_+=T,P=1<<(M=k-E);M+E<S&&!((P-=z[M+E])<=0);)M++,P<<=1;if(D+=1<<M,1===t&&D>852||2===t&&D>592)return 1;l[m=O&g]=C<<24|M<<16|_-c|0}}return 0!==O&&(l[_+O]=k-E<<24|64<<16|0),u.bits=C,0}},{"../utils/common":62}],72:[function(t,e,i){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],73:[function(t,e,i){var n=t("../utils/common"),o=4,s=0,r=1,a=2;function h(t){for(var e=t.length;--e>=0;)t[e]=0}var l=0,c=1,d=2,u=29,p=256,f=p+1+u,m=30,g=19,_=2*f+1,v=15,y=16,b=7,x=256,w=16,k=17,L=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(f+2));h(E);var P=new Array(2*m);h(P);var D=new Array(512);h(D);var O=new Array(256);h(O);var A=new Array(u);h(A);var I,z,R,N=new Array(m);function B(t,e,i,n,o){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=o,this.has_stree=t&&t.length}function F(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function j(t){return t<256?D[t]:D[256+(t>>>7)]}function H(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function U(t,e,i){t.bi_valid>y-i?(t.bi_buf|=e<<t.bi_valid&65535,H(t,t.bi_buf),t.bi_buf=e>>y-t.bi_valid,t.bi_valid+=i-y):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function $(t,e,i){U(t,i[2*e],i[2*e+1])}function W(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function Z(t,e,i){var n,o,s=new Array(v+1),r=0;for(n=1;n<=v;n++)s[n]=r=r+i[n-1]<<1;for(o=0;o<=e;o++){var a=t[2*o+1];0!==a&&(t[2*o]=W(s[a]++,a))}}function V(t){var e;for(e=0;e<f;e++)t.dyn_ltree[2*e]=0;for(e=0;e<m;e++)t.dyn_dtree[2*e]=0;for(e=0;e<g;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*x]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function G(t){t.bi_valid>8?H(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function Y(t,e,i,n){var o=2*e,s=2*i;return t[o]<t[s]||t[o]===t[s]&&n[e]<=n[i]}function q(t,e,i){for(var n=t.heap[i],o=i<<1;o<=t.heap_len&&(o<t.heap_len&&Y(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!Y(e,n,t.heap[o],t.depth));)t.heap[i]=t.heap[o],i=o,o<<=1;t.heap[i]=n}function X(t,e,i){var n,o,s,r,a=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],o=t.pending_buf[t.l_buf+a],a++,0===n?$(t,o,e):($(t,(s=O[o])+p+1,e),0!==(r=T[s])&&U(t,o-=A[s],r),$(t,s=j(--n),i),0!==(r=S[s])&&U(t,n-=N[s],r))}while(a<t.last_lit);$(t,x,e)}function K(t,e){var i,n,o,s=e.dyn_tree,r=e.stat_desc.static_tree,a=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=_,i=0;i<h;i++)0!==s[2*i]?(t.heap[++t.heap_len]=l=i,t.depth[i]=0):s[2*i+1]=0;for(;t.heap_len<2;)s[2*(o=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[o]=0,t.opt_len--,a&&(t.static_len-=r[2*o+1]);for(e.max_code=l,i=t.heap_len>>1;i>=1;i--)q(t,s,i);o=h;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],q(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,s[2*o]=s[2*i]+s[2*n],t.depth[o]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,s[2*i+1]=s[2*n+1]=o,t.heap[1]=o++,q(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,o,s,r,a,h=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,d=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,f=e.stat_desc.max_length,m=0;for(s=0;s<=v;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<_;i++)(s=h[2*h[2*(n=t.heap[i])+1]+1]+1)>f&&(s=f,m++),h[2*n+1]=s,n>l||(t.bl_count[s]++,r=0,n>=p&&(r=u[n-p]),a=h[2*n],t.opt_len+=a*(s+r),d&&(t.static_len+=a*(c[2*n+1]+r)));if(0!==m){do{for(s=f-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[f]--,m-=2}while(m>0);for(s=f;0!==s;s--)for(n=t.bl_count[s];0!==n;)(o=t.heap[--i])>l||(h[2*o+1]!==s&&(t.opt_len+=(s-h[2*o+1])*h[2*o],h[2*o+1]=s),n--)}}(t,e),Z(s,l,t.bl_count)}function J(t,e,i){var n,o,s=-1,r=e[1],a=0,h=7,l=4;for(0===r&&(h=138,l=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)o=r,r=e[2*(n+1)+1],++a<h&&o===r||(a<l?t.bl_tree[2*o]+=a:0!==o?(o!==s&&t.bl_tree[2*o]++,t.bl_tree[2*w]++):a<=10?t.bl_tree[2*k]++:t.bl_tree[2*L]++,a=0,s=o,0===r?(h=138,l=3):o===r?(h=6,l=3):(h=7,l=4))}function Q(t,e,i){var n,o,s=-1,r=e[1],a=0,h=7,l=4;for(0===r&&(h=138,l=3),n=0;n<=i;n++)if(o=r,r=e[2*(n+1)+1],!(++a<h&&o===r)){if(a<l)do{$(t,o,t.bl_tree)}while(0!=--a);else 0!==o?(o!==s&&($(t,o,t.bl_tree),a--),$(t,w,t.bl_tree),U(t,a-3,2)):a<=10?($(t,k,t.bl_tree),U(t,a-3,3)):($(t,L,t.bl_tree),U(t,a-11,7));a=0,s=o,0===r?(h=138,l=3):o===r?(h=6,l=3):(h=7,l=4)}}h(N);var tt=!1;function et(t,e,i,o){U(t,(l<<1)+(o?1:0),3),function(t,e,i,o){G(t),o&&(H(t,i),H(t,~i)),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}i._tr_init=function(t){tt||(function(){var t,e,i,n,o,s=new Array(v+1);for(i=0,n=0;n<u-1;n++)for(A[n]=i,t=0;t<1<<T[n];t++)O[i++]=n;for(O[i-1]=n,o=0,n=0;n<16;n++)for(N[n]=o,t=0;t<1<<S[n];t++)D[o++]=n;for(o>>=7;n<m;n++)for(N[n]=o<<7,t=0;t<1<<S[n]-7;t++)D[256+o++]=n;for(e=0;e<=v;e++)s[e]=0;for(t=0;t<=143;)E[2*t+1]=8,t++,s[8]++;for(;t<=255;)E[2*t+1]=9,t++,s[9]++;for(;t<=279;)E[2*t+1]=7,t++,s[7]++;for(;t<=287;)E[2*t+1]=8,t++,s[8]++;for(Z(E,f+1,s),t=0;t<m;t++)P[2*t+1]=5,P[2*t]=W(t,5);I=new B(E,T,p+1,f,v),z=new B(P,S,0,m,v),R=new B(new Array(0),C,0,g,b)}(),tt=!0),t.l_desc=new F(t.dyn_ltree,I),t.d_desc=new F(t.dyn_dtree,z),t.bl_desc=new F(t.bl_tree,R),t.bi_buf=0,t.bi_valid=0,V(t)},i._tr_stored_block=et,i._tr_flush_block=function(t,e,i,n){var h,l,u=0;t.level>0?(t.strm.data_type===a&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return s;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return r;for(e=32;e<p;e++)if(0!==t.dyn_ltree[2*e])return r;return s}(t)),K(t,t.l_desc),K(t,t.d_desc),u=function(t){var e;for(J(t,t.dyn_ltree,t.l_desc.max_code),J(t,t.dyn_dtree,t.d_desc.max_code),K(t,t.bl_desc),e=g-1;e>=3&&0===t.bl_tree[2*M[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),h=t.opt_len+3+7>>>3,(l=t.static_len+3+7>>>3)<=h&&(h=l)):h=l=i+5,i+4<=h&&-1!==e?et(t,e,i,n):t.strategy===o||l===h?(U(t,(c<<1)+(n?1:0),3),X(t,E,P)):(U(t,(d<<1)+(n?1:0),3),function(t,e,i,n){var o;for(U(t,e-257,5),U(t,i-1,5),U(t,n-4,4),o=0;o<n;o++)U(t,t.bl_tree[2*M[o]+1],3);Q(t,t.dyn_ltree,e-1),Q(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),X(t,t.dyn_ltree,t.dyn_dtree)),V(t),n&&G(t)},i._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(O[i]+p+1)]++,t.dyn_dtree[2*j(e)]++),t.last_lit===t.lit_bufsize-1},i._tr_align=function(t){U(t,c<<1,3),$(t,x,E),function(t){16===t.bi_valid?(H(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":62}],74:[function(t,e,i){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[10])(10)}),$JExcel={},function(){var t=["left","right","top","bottom"],e={L:"left",C:"center",R:"right",T:"top",B:"bottom",W:"wrapText"};function i(t){var e=t.toString(16);return 1==e.length?"0"+e:e}$JExcel.rgbToHex=function(t,e,n){if(void 0!=t&&void 0!=e&&void 0!=n)return(i(t)+i(e)+i(n)).toUpperCase()},$JExcel.toExcelUTCTime=function(t){var e=Math.floor(t.getTime()/1e3);return(e=Math.floor(e/86400)+25569)+(t.getUTCSeconds()+60*t.getUTCMinutes()+3600*t.getUTCHours())/86400},$JExcel.toExcelLocalTime=function(t){var e=Math.floor(t.getTime()/1e3);e=Math.floor(e/86400)+25569;var i=t.getUTCSeconds()+60*t.getUTCMinutes()+3600*t.getUTCHours();return e+(i-=60*t.getTimezoneOffset())/86400};var n=[];n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="mm-dd-yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[27]="[$-404]e/m/d",n[30]="m/d/yy",n[36]="[$-404]e/m/d",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[44]='_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[50]="[$-404]e/m/d",n[57]="[$-404]e/m/d",n[59]="t0",n[60]="t0.00",n[61]="t#,##0",n[62]="t#,##0.00",n[67]="t0%",n[68]="t0.00%",n[69]="t# ?/?",n[70]="t# ??/??",n[165]="*********";var o=166;$JExcel.formats=n,$JExcel.borderStyles=["none","thin","medium","dashed","dotted","thick","double","hair","mediumDashed","dashDot","mediumDashDot","dashDotDot","mediumDashDotDot","slantDashDot"];for(var s=[],r=0;r<$JExcel.borderStyles.length;r++)s.push($JExcel.borderStyles[r].toUpperCase());var a='<?xml version="1.0" ?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:mv="urn:schemas-microsoft-com:mac:vml" xmlns:mx="http://schemas.microsoft.com/office/mac/excel/2008/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xm="http://schemas.microsoft.com/office/excel/2006/main">{views}{columns}<sheetData>{rows}</sheetData>{mergeCells}</worksheet>';function h(t,e){var i=t.indexOf(e);return-1!=i?i:(t.push(e),t.length-1)}function l(t,e){return t.push(e),t.length-1}function c(t,e,i){return t[e]=i,i}function d(t,e){return'<Relationship Id="'+t.rId+'" Target="worksheets/sheet'+e+'.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet"/>'}function u(t){return a.replace("{views}",function(t){if(0==t.length)return;for(var e="<sheetViews>",i=0;i<t.length;i++){var n=t[i];if(n&&n.panes&&n.panes.length){e+='<sheetView workbookViewId="'+(n.workbookViewId||i)+'">';for(var o=0;o<n.panes.length;o++){var s=n.panes[o];e+='<pane state="frozen" topLeftCell="'+s.topLeftCell+'"',s.xSplit&&(e+=' xSplit="'+s.xSplit+'"'),s.ySplit&&(e+=' ySplit="'+s.ySplit+'"'),e+="/>"}e+="</sheetView>"}}return e+="</sheetViews>"}(t.views)).replace("{columns}",function(t){if(0==t.length)return;for(var e="<cols>",i=0;i<t.length;i++){var n=t[i];n&&(e=e+'<col min="'+(i+1)+'" max="'+(i+1)+'" ',"auto"==n.wt?e+=' width="18" bestFit="1" customWidth="1" ':n.wt&&(e=e+' width="'+n.wt+'" customWidth="1" '),n.style&&(e=e+' style="'+n.style+'"'),e+="/>")}return e+"</cols>"}(t.columns)).replace("{rows}",function(t,e){for(var i=[],n=0;n<t.length;n++)t[n]&&i.push(D(t[n],n,e));return i.join("")}(t.rows,t.mergeCells)).replace("{mergeCells}",function(t){if(0==t.length)return;for(var e='<mergeCells count="'+t.length+'">',i=0;i<t.length;i++){var n=t[i];n&&(e=e+'<mergeCell ref="'+n.from+":"+n.to+'" />')}return e+"</mergeCells>"}(t.mergeCells))}function p(t,e,i){this.name=t}function f(t){return this.rows[t]?this.rows[t]:c(this.rows,t,{cells:[]})}function m(t){return this.columns[t]?this.columns[t]:c(this.columns,t,{})}function g(t,e){var i=this.getRow(e).cells;return i[t]?i[t]:c(i,t,{})}function _(t,e){var i={topLeftCell:E(t,e)};t>=0&&(i.xSplit=t),e>=0&&(i.ySplit=e-1);var n={panes:[i]};n.workbookViewId=l(this.views,n)}function v(t){return'<fill><patternFill patternType="solid"><fgColor rgb="FF'+t+'" /><bgColor indexed="64" /></patternFill ></fill>'}function y(e){var i="<border>";e=e.split(",");for(var n=0;n<4;n++){var o=e[n].split(" ");if(i=i+"<"+t[n],"NONE"==o[0])i+="/>";else{var r=$JExcel.borderStyles[s.indexOf(o[0])];r?i=i+' style="'+r+'" >'+("NONE"!=o[1]?'<color rgb="FF'+o[1].substring(1)+'"/>':""):i+=">",i=i+"</"+t[n]+">"}}return i+"<diagonal/></border>"}function b(t,e,i){return t.split(e).join(i)}function x(t,e,i){for(;-1!=t.indexOf(e);)t=b(t,e,i);return t}function w(t){t.key||(t.key=JSON.stringify(t))}function k(t){var i="";if(t.align){var n=e[t.align.charAt(0)],s=e[t.align.charAt(1)],r=e[t.align.charAt(2)];(n||s||r)&&(i="<alignment ",n&&(i=i+' horizontal="'+n+'" '),s&&(i=i+' vertical="'+s+'" '),r&&(i=i+" "+r+'="1" '),i+=" />")}var a='<xf numFmtId="'+(t.format||0)+'" fontId="'+(t.font||0)+'" fillId="'+(t.fill||0)+'" borderId="'+(t.border||0)+'" xfId="0" ';return 0!=(t.border||0)&&(a+=' applyBorder="1" '),t.format>=o&&(a+=' applyNumberFormat="1" '),0!=(t.fill||0)&&(a+=' applyFill="1" '),""!=(i||"")&&(a+=' applyAlignment="1" '),a+=">",(a+=i)+"</xf>"}function L(t){var e=[],i=[],s=n.slice(0),r=[],a=[],c={add:function(t){var n={isstring:t.isstring};t.fill&&"#"==t.fill.charAt(0)&&(n.fill=2+h(a,t.fill.toString().substring(1).toUpperCase())),t.font&&(n.font=h(i,function(t){for(var e=["_","_","_","_"],i=(t=x(t,"  "," ")).split(" "),n=[];i[0]&&"none"!=i[0]&&isNaN(i[0])&&"#"!=i[0].charAt(0);)n.push(i[0].charAt(0).toUpperCase()+i[0].substring(1).toLowerCase()),i.splice(0,1);for(e[0]=n.join(" ");"none"==i[0];)i.splice(0,1);for(isNaN(i[0])||(e[1]=i[0],i.splice(0,1));"none"==i[0];)i.splice(0,1);for(i[0]&&7==i[0].length&&"#"==i[0].charAt(0)&&(e[2]=i[0].substring(1).toUpperCase(),i.splice(0,1));"none"==i[0];)i.splice(0,1);return i[0]&&i[0].length<4&&(e[3]=i[0].toUpperCase()),e.join(";")}(t.font.toString().trim()))),t.format&&(n.format=h(s,t.format)),t.align&&(n.align=function(t){return t?(t=x(t.toString()+" - - -","  "," ").trim().toUpperCase().split(" "))[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0):"---"}(t.align)),t.border&&(n.border=1+h(r,function(t){for(var e=((t=x(t,"  "," ").trim())+",NONE,NONE,NONE,NONE").split(","),i="",n=0;n<4;n++){e[n]=e[n].trim().toUpperCase(),e[n]=(("NONE"==e[n].substring(0,4)?"NONE":e[n]).trim()+" NONE NONE NONE").trim();var o=e[n].split(" ");"#"==o[0].charAt(0)&&(o[2]=o[0],o[0]=o[1],o[1]=o[2]),i=i+o[0]+" "+o[1]+","}return i}(t.border.toString().trim()))),w(n);for(var o=e.length-1;o>=0;o--)if(e[o].key==n.key)return 1+o;return 1+l(e,n)}};return t||(t="Calibri Light 12 0000EE"),c.add({font:t}),c.register=function(t){w(t);for(var i=e.length-1;i>=0;i--)if(e[i].key==t.key)return i;return l(e,t)},c.getStyle=function(t){return e[t]},c.toStyleSheet=function(){var t,n='<?xml version="1.0" encoding="utf-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac">';n=n+'<numFmts count="'+(s.length-o)+'">';for(var h=o;h<s.length;h++)n=n+'<numFmt numFmtId="'+h+'" formatCode="'+s[h]+'"/>';n=(n+="</numFmts>")+'<fonts count="'+i.length+'" x14ac:knownFonts="1" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac">';for(h=0;h<i.length;h++)n+="<font>"+((t=(t=i[h]).split(";"))[3].indexOf("B")>-1?"<b />":"")+(t[3].indexOf("I")>-1?"<i />":"")+(t[3].indexOf("U")>-1?"<u />":"")+("_"!=t[1]?'<sz val="'+t[1]+'" />':"")+("_"!=t[2]?'<color rgb="FF'+t[2]+'" />':"")+(t[0]?'<name val="'+t[0]+'" />':"")+"</font>";n=(n+="</fonts>")+'<fills count="'+(2+a.length)+'"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill>';for(h=0;h<a.length;h++)n+=v(a[h]);n=(n+="</fills>")+'<borders count="'+(1+r.length)+'"><border><left /><right /><top /><bottom /><diagonal /></border>';for(h=0;h<r.length;h++)n+=y(r[h]);n+="</borders>",n=(n+='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>')+'<cellXfs count="'+(1+e.length)+'"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0" />';for(h=0;h<e.length;h++)n+=k(e[h]);return n+="</cellXfs>",n+='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n+='<dxfs count="0"/>',n+="</styleSheet>"},c}var T=/[&<>"']/g,S=RegExp(T.source);var C,M=(C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(t){return null==C?void 0:C[t]});function E(t,e){return function t(e){var i=Math.floor(e/26)-1;return(i>-1?t(i):"")+"ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(e%26)}(t)+e}function P(t,e,i,n){if(t.colspan>1){var o={from:E(e,i),to:E(e+t.colspan-1,i)};n.push(o)}var s='<c r="'+E(e,i)+'"';t.s&&(s=s+' s="'+t.s+'" ');var r,a=t.v;return t.isstring||isNaN(a)?(a.charAt||console.log(a),t.isstring||"="!=a.charAt(0)?s+' t="inlineStr" ><is><t>'+("string"!=typeof(r=a)&&(r+=""),r&&S.test(r)?r.replace(T,M):r)+"</t></is></c>":s+" ><f>"+a.substring(1)+"</f></c>"):s+"><v>"+a+"</v></c>"}function D(t,e,i){for(var n=e+1,o=[],s=0;s<t.cells.length;s++)t.cells[s]&&o.push(P(t.cells[s],s,n,i));var r='<row r="'+n+'" ';return t.ht&&(r=r+' ht="'+t.ht+'" customHeight="1" '),t.style&&(r=r+'s="'+t.style+'" customFormat="1"'),r+" >"+o.join("")+"</row>"}function O(t,e,i){if(t)if(t.s){var n=e.getStyle(t.s-1),o=e.getStyle(i-1),s={},r=!1;for(var a in n)s[a]=n[a];for(var a in o)s[a]||(s[a]=o[a],r=!0);r&&(delete s.key,t.s=1+e.register(s))}else t.s=i}$JExcel.new=function(t){var e={},i={sheets:[],add:function(t){var e={id:this.sheets.length+1,rId:"rId"+(3+this.sheets.length),name:t,rows:[],columns:[],getColumn:m,set:p,getRow:f,getCell:g,mergeCells:[],views:[],freezePane:_};return l(this.sheets,e)},get:function(t){var e=this.sheets[t];if(!e)throw"Bad sheet "+t;return e},rows:function(t){if(t<0||t>=this.sheets.length)throw"Bad sheet number must be [0.."+(this.sheets.length-1)+"] and is: "+t;return this.sheets[t].rows},setWidth:function(t,e,i,n){i&&(this.sheets[t].colWidths[e]=isNaN(i)?i.toString().toLowerCase():i),n&&(this.sheets[t].colStyles[e]=n)},toWorkBook:function(){for(var t,e='<?xml version="1.0" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><sheets>',i=0;i<this.sheets.length;i++)e+='<sheet state="visible" name="'+(t=this.sheets[i]).name+'" sheetId="'+t.id+'" r:id="'+t.rId+'"/>';return e+"</sheets><calcPr/></workbook>"},toWorkBookRels:function(){var t='<?xml version="1.0" ?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">';t+='<Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/>';for(var e=0;e<this.sheets.length;e++)t+=d(this.sheets[e],e+1);return t+"</Relationships>"},toRels:function(){var t='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">';return(t+='<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/>')+"</Relationships>"},toContentType:function(){var t='<?xml version="1.0" standalone="yes" ?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default ContentType="application/xml" Extension="xml"/>';t+='<Default ContentType="application/vnd.openxmlformats-package.relationships+xml" Extension="rels"/>',t+='<Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" PartName="/xl/workbook.xml"/>',t+='<Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" PartName="/xl/styles.xml" />';for(var e=1;e<=this.sheets.length;e++)t=t+'<Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" PartName="/xl/worksheets/sheet'+e+'.xml"/>';return t+"</Types>"},fileData:function(t){for(var e=0;e<this.sheets.length;e++)t.file("worksheets/sheet"+(e+1)+".xml",u(this.sheets[e]))}},n=L(t);return i.add("Sheet 0"),e.addSheet=function(t){return t||(t="Sheet "+i.length),i.add(t)},e.addStyle=function(t){return n.add(t)},e.set=function(t,e,o,s,r,a){if(null!==(h=t)&&"object"==typeof h)return this.set(t.sheet,t.column,t.row,t.value,t.style,a);var h;if(t||(t=0),t=i.get(t),isNaN(e)&&isNaN(o))return t.set(s,r);if(!isNaN(e)){if(!isNaN(o)){var l=r&&n.getStyle(r-1).isstring;return function(t,e,i,n,o){void 0!=e&&(t.v=e),t.isstring=n,i&&(t.s=i),o&&(t.colspan=o)}(t.getCell(e,o),s,r,l,a)}return function(t,e,i){void 0!=e&&(t.wt=e),i&&(t.style=i)}(t.getColumn(e),s,r)}return function(t,e,i){e&&!isNaN(e)&&(t.ht=e),i&&(t.style=i)}(t.getRow(o),s,r)},e.freezePane=function(t,e,n){i.get(t).freezePane(e,n)},e.generate=function(t){!function(t,e){for(var i=0;i<t.length;i++){for(var n=0;n<t[i].rows.length;n++)if((a=t[i].rows[n])&&a.style)for(var o=0;o<a.cells.length;o++)a.cells[o]&&O(a.cells[o],e,a.style);for(var s=0;s<t[i].columns.length;s++)if(t[i].columns[s]&&t[i].columns[s].style){var r=t[i].columns[s].style;for(n=0;n<t[i].rows.length;n++){var a;if(a=t[i].rows[n])for(o=0;o<a.cells.length;o++)a.cells[o]&&o==s&&O(a.cells[o],e,r)}}}}(i.sheets,n);var e=new JSZip;e.file("_rels/.rels",i.toRels());var o=e.folder("xl");o.file("workbook.xml",i.toWorkBook()),o.file("styles.xml",n.toStyleSheet()),o.file("_rels/workbook.xml.rels",i.toWorkBookRels()),e.file("[Content_Types].xml",i.toContentType()),i.fileData(o),e.generateAsync({type:"blob",mimeType:"application/vnd.ms-excel"}).then(function(e){saveAs(e,t)})},e}}();var TimeScheduler={Options:{SectionHeaders:[],GetSectionContent:null,GetSections:function(t){},GetSchedule:function(t,e,i){},Start:moment(),HeaderFormat:"Do MMM YYYY",LowerFormat:"DD-MMM-YYYY HH:mm",Periods:[{Name:"2 days",Label:"2 days",TimeframePeriod:120,TimeframeOverall:2880,TimeframeHeaders:["Do MMM","HH"],Classes:"time-sch-period-2day"},{Name:"2 weeks",Label:"2 weeks",TimeframePeriod:1440,TimeframeOverall:20160,TimeframeHeaders:["MMM","Do"],Classes:"time-sch-period-2week"}],SelectedPeriod:"2 weeks",Element:$("<div></div>"),MinRowHeight:40,ShowCurrentTime:!0,ShowGoto:!0,ShowToday:!0,Text:{NextButton:"Next",NextButtonTitle:"Next period",PrevButton:"Prev",PrevButtonTitle:"Previous period",TodayButton:"Today",TodayButtonTitle:"Go to today",GotoButton:"Go to",GotoButtonTitle:"Go to specific date"},Events:{ItemMouseEnter:null,ItemMouseLeave:null,ItemClicked:null,ItemDropped:null,ItemResized:null,ItemMovement:null,ItemMovementStart:null,ItemMovementEnd:null,ItemEventClick:null,ItemEventMouseEnter:null,ItemEventMouseLeave:null,calendarItemClicked:null,calendarItemMouseDown:null,calendarItemMouseUp:null,calendarTimeShift:null},AllowDragging:!1,AllowResizing:!1,DisableOnMove:!0,MaxHeight:null,timeMode:"time",allowOverlap:!1,HeaderDescription:null},Wrapper:null,HeaderWrap:null,TableWrap:null,ContentHeaderWrap:null,ContentWrap:null,TableHeader:null,TableContent:null,SectionWrap:null,Table:null,Sections:{},CachedSectionResult:null,CachedScheduleResult:null,SetupPrototypes:function(){moment.fn.tsAdd=function(t,e){var i;return i="string"==typeof t?moment.duration(+e,t):moment.duration(t,e),this.tsAddOrSubtractDurationFromMoment(this,i,1),this},moment.fn.tsSubtract=function(t,e){var i;return i="string"==typeof t?moment.duration(+e,t):moment.duration(t,e),this.tsAddOrSubtractDurationFromMoment(this,i,-1),this},moment.fn.tsAddOrSubtractDurationFromMoment=function(t,e,i){var n,o=e._milliseconds,s=e._days,r=e._months;o&&t.milliseconds(t.milliseconds()+o*i),s&&t.date(t.date()+s*i),r&&(n=t.date(),t.date(1).month(t.month()+r*i).date(Math.min(n,t.daysInMonth())))}},Init:function(t){TimeScheduler.SetupPrototypes(),TimeScheduler.Options.Start=moment(TimeScheduler.Options.Start),TimeScheduler.Options.Element.find(".ui-draggable").draggable("destroy"),TimeScheduler.Options.Element.empty(),TimeScheduler.Wrapper=$(document.createElement("div")).addClass("time-sch-wrapper").appendTo(TimeScheduler.Options.Element),TimeScheduler.HeaderWrap=$(document.createElement("div")).addClass("time-sch-header-wrapper time-sch-clearfix").appendTo(TimeScheduler.Wrapper),TimeScheduler.SchedulerContentWrap=$(document.createElement("div")).addClass("time-sch-content-wrapper").appendTo(TimeScheduler.Wrapper),TimeScheduler.TableWrap=$(document.createElement("div")).addClass("time-sch-table-wrapper").appendTo(TimeScheduler.SchedulerContentWrap),TimeScheduler.CreateCalendar(),TimeScheduler.FillSections(t)},GetSelectedPeriod:function(){for(var t,e=0;e<TimeScheduler.Options.Periods.length;e++)if(TimeScheduler.Options.Periods[e].Name===TimeScheduler.Options.SelectedPeriod){t=TimeScheduler.Options.Periods[e];break}return t||(t=TimeScheduler.Options.Periods[0],TimeScheduler.SelectPeriod(t.Name)),t},GetEndOfPeriod:function(t,e){return moment(t).tsAdd("minutes",e.TimeframeOverall).add(23,"hours").add(59,"minutes").add(59,"seconds")},AddHeaderClasses:function(t,e,i){var n,o,s,r,a,h,l,c,d,u;if(n=TimeScheduler.TableHeader.find("tr"),void 0!==i&&(n=$(n.get(i))),n.length&&n.length>0){o=$.makeArray(n);for(var p=0;p<o.length;p++){d=!1,l=0,s=$(o[p]),r=$.makeArray(s.find(".time-sch-date-header"));for(var f=0;f<r.length&&!d;f++)a=$(r[f]),l=(c=Number(a.attr("colspan")))&&!isNaN(c)&&c>0?(h=l||0)+c:(h=l||0)+1,h===e&&t.addClass("time-sch-header-"+p+"-date-start"),l-1===e&&t.addClass("time-sch-header-"+p+"-date-end"),h<=e&&e<l&&(d=!0,u=f%2==0,t.addClass("time-sch-header-"+p+"-date-column-"+f).addClass("time-sch-header-"+p+"-date-"+(u?"even":"odd")),a.hasClass("time-sch-header-"+p+"-current-time")&&t.addClass("time-sch-header-"+p+"-current-time"))}}},CreateCalendar:function(){var t,e,i,n,o,s,r,a,h,l,c,d;c=0,o=TimeScheduler.GetSelectedPeriod(),s=TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start,o),n=Math.abs(TimeScheduler.Options.Start.diff(s,"minutes"))/o.TimeframePeriod,TimeScheduler.ContentHeaderWrap=$(document.createElement("div")).addClass("time-sch-content-header-wrap").appendTo(TimeScheduler.TableWrap),TimeScheduler.ContentWrap=$(document.createElement("div")).addClass("time-sch-content-wrap").appendTo(TimeScheduler.TableWrap),TimeScheduler.TableHeader=$(document.createElement("table")).addClass("time-sch-table time-sch-table-header").appendTo(TimeScheduler.ContentHeaderWrap),TimeScheduler.TableContent=$(document.createElement("table")).addClass("time-sch-table time-sch-table-content").appendTo(TimeScheduler.ContentWrap),TimeScheduler.SectionWrap=$(document.createElement("div")).addClass("time-sch-section-wrapper").appendTo(TimeScheduler.ContentWrap),o.Classes&&TimeScheduler.TableWrap.toggleClass(o.Classes,!0);for(var u=0;u<o.TimeframeHeaders.length;u++){if(a=null,l=null,isEven=!0,c=0,d=0,i=o.TimeframeHeaders[u],t=$(document.createElement("tr")).addClass("time-sch-times time-sch-times-header-"+u).appendTo(TimeScheduler.TableHeader),0===u){e=$(document.createElement("td")).addClass("time-sch-section time-sch-section-header time-sch-section-room-content").attr("rowspan",o.TimeframeHeaders.length).appendTo(t);var p=$(document.createElement("table")).addClass("time-sch-table time-sch-table-content time-sch-table-room-content").appendTo(e),f=$(document.createElement("tr")).addClass("time-sch-section-row-room-header").appendTo(p);for(let t=0;t<TimeScheduler.Options.SectionHeaders.length;t++)e=$(document.createElement("td")).addClass("time-sch-section-col-room-header time-sch-section-content").append(TimeScheduler.Options.SectionHeaders[t].caption).appendTo(f)}let s=i.startsWith("${"),g=[];if(s){g=i.replace("${","").replace("}","").split(","),methodName=g[0]}for(var m=0;m<n;m++){r=moment(TimeScheduler.Options.Start).tsAdd("minutes",m*o.TimeframePeriod),h=s?g.length>1?r.format(g[1]):o[methodName](m,r):r.format(i);let n=s?o[methodName](m,r):h;if(l!==h){a&&(e.attr("colspan",c),c=0,moment()>=a&&moment()<r&&e.addClass("time-sch-header-"+u+"-current-time")),a=r,l=h,(e=$(document.createElement("td")).data("header-row",u).data("column-count",m).data("column-is-even",isEven).data("td-time",r).addClass("time-sch-date time-sch-date-header").append(n).appendTo(t)).addClass("time-sch-header-"+u+"-date-start").addClass("time-sch-header-"+u+"-date-end").addClass("time-sch-header-"+u+"-date-column-"+d).addClass("time-sch-header-"+u+"-date-"+(d%2==0?"even":"odd"));for(let t=0;t<u;t++)TimeScheduler.AddHeaderClasses(e,m,t);d+=1}c+=1}e.attr("colspan",c)}TimeScheduler.FillHeader()},CreateSections:function(t){var e,i,n,o,s,r,a,h,l,c,d,u;for(e=1,s=$.makeArray(TimeScheduler.TableHeader.find("tr")),r=0;r<s.length;r++)e<$(s[r]).find(".time-sch-date-header").length&&(e=$(s[r]).find(".time-sch-date-header").length,u=$(s[r]).find(".time-sch-date-header"));var p=function(t,e){let i=$(t),n=i.offset().left,o=i.offset().top;return{left:e.pageX-n,top:e.pageY-o}},f=function(t,e){let i=$(t);l=p(t,e);let n=i.outerWidth()+2;return function(t){let e=TimeScheduler.GetSelectedPeriod(),i=TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start,e),n=Math.abs(TimeScheduler.Options.Start.diff(i,"minutes")),o=TimeScheduler.Options.Start.clone();return o.add(t/100*n,"minutes"),o}(100*l.left/n)},m=!1,g=$(window);g.mousemove(function(t){if(m&&l){let e=p(a,t);d.css("width",e.left-l.left)}}),g.mouseup(function(t){m=!1,d?d.remove():$(".time-sch-section-container-selected-marker").remove()});for(r=0;r<t.length;r++){i=$(document.createElement("tr")).addClass("time-sch-section-row").addClass(r%2==0?"time-sch-section-even":"time-sch-section-odd").css("height",TimeScheduler.Options.MinRowHeight).appendTo(TimeScheduler.TableContent),(o=$(document.createElement("div")).addClass("time-sch-section-container").css("height",TimeScheduler.Options.MinRowHeight+2).data("section",t[r]).appendTo(TimeScheduler.SectionWrap)).mousedown(function(t){let e=a=$(this);m=!0,l=p(this,t),h=f(this,t),c=e.data("section"),d=$(document.createElement("div")).addClass("time-sch-section-container-selected-marker").css("left",l.left).appendTo(e),TimeScheduler.Options.Events.calendarItemMouseDown&&(t.preventDefault(),t.stopPropagation(),TimeScheduler.Options.Events.calendarItemMouseDown.call(this,t,e.data("section"),h))}),o.mouseup(function(t){$(this);if(m=!1,null===h||void 0===h)return;let e=f(this,t);h>e||TimeScheduler.Options.Events.calendarItemMouseUp&&(t.preventDefault(),TimeScheduler.Options.Events.calendarItemMouseUp.call(this,t,c,h.clone(),e),h=null)}),o.click(function(t){let e=$(this),i=f(this,t);TimeScheduler.Options.Events.calendarItemClicked&&(t.preventDefault(),TimeScheduler.Options.Events.calendarItemClicked.call(this,t,e.data("section"),i))}),n=$(document.createElement("td")).addClass("time-sch-section time-sch-section-content").data("section",t[r]).appendTo(i);var _=$(document.createElement("table")).addClass("time-sch-table time-sch-table-content time-sch-table-section-content").appendTo(n),v=$(document.createElement("tr")).addClass("time-sch-section-row-room-info").css("height",TimeScheduler.Options.MinRowHeight).appendTo(_);for(let e=0;e<TimeScheduler.Options.SectionHeaders.length;e++)n=$(document.createElement("td")).addClass("time-sch-section-col-room-info time-sch-section-content").data("section",t[r]).append(TimeScheduler.Options.GetSectionContent?TimeScheduler.Options.GetSectionContent(t[r],TimeScheduler.Options.SectionHeaders[e]):t[r].name).appendTo(v);for(time=0;time<e;time++){let e=$(u[time]).data("td-time");n=$(document.createElement("td")).addClass("time-sch-date time-sch-date-content").data("section",t[r]).data("td-time",e),TimeScheduler.Options.Events.customizeCell&&(n=TimeScheduler.Options.Events.customizeCell(this,n,t[r],e)),n.click(function(){}),n.appendTo(i),TimeScheduler.AddHeaderClasses(n,time)}TimeScheduler.Sections[t[r].id]={row:i,container:o}}TimeScheduler.SectionWrap.css({left:TimeScheduler.Options.Element.find(".time-sch-section").outerWidth()}),TimeScheduler.Options.ShowCurrentTime&&TimeScheduler.ShowCurrentTime()},ShowCurrentTimeHandle:null,ShowCurrentTime:function(){var t,e,i,n;TimeScheduler.ShowCurrentTimeHandle&&clearTimeout(TimeScheduler.ShowCurrentTimeHandle),t=moment(),n=TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start,TimeScheduler.GetSelectedPeriod()),e=Math.abs(TimeScheduler.Options.Start.diff(n,"minutes")),i=Math.abs(TimeScheduler.Options.Start.diff(t,"minutes")),TimeScheduler.Options.Element.find(".time-sch-current-time").remove(),t>=TimeScheduler.Options.Start&&t<=n&&$(document.createElement("div")).addClass("time-sch-current-time").css("left",i/e*100+"%").attr("title",t.format(TimeScheduler.Options.LowerFormat)).appendTo(TimeScheduler.SectionWrap),TimeScheduler.ShowCurrentTimeHandle=setTimeout(TimeScheduler.ShowCurrentTime,3e4)},CreateItems:function(t){var e,i,n,o,s,r,a,h,l,c,d,u,p,f,m,g,_,v,y,b={};for(_=TimeScheduler.GetSelectedPeriod(),v=TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start,_),r=Math.abs(TimeScheduler.Options.Start.diff(v,"minutes")),y=0;y<t.length;y++)if(e=t[y],(n=TimeScheduler.Sections[e.sectionID])&&(b[e.sectionID]||(b[e.sectionID]=[]),e.start<=v&&e.end>=TimeScheduler.Options.Start)){if(f=null,u=moment(Math.max(e.start,TimeScheduler.Options.Start)),p=moment(Math.min(e.end,v)),l=0,c=u.diff(TimeScheduler.Options.Start,"minutes")/r*100,d=(a=Math.abs(u.diff(p,"minutes")))/r*100,o=$(document.createElement("div")).addClass("time-sch-item "+(e.classes?e.classes:"")).css({top:l,left:c+"%",width:d+"%"}).appendTo(n.container),s=$(document.createElement("div")).addClass("time-sch-item-content").appendTo(o),"string"==typeof e.content?$(e.content).appendTo(s):"function"==typeof e.content&&e.content(e).appendTo(s),e.events)for(var x=0;x<e.events.length;x++)h=(i=e.events[x]).at.diff(u,"minutes")/a*100,$(document.createElement("div")).addClass("time-sch-item-event "+(i.classes?i.classes:"")).css("left",h+"%").attr("title",i.at.format(TimeScheduler.Options.LowerFormat)+" - "+i.label).data("event",i).appendTo(o);e.start>=TimeScheduler.Options.Start&&$(document.createElement("div")).addClass("time-sch-item-start").appendTo(o),e.end<=v&&$(document.createElement("div")).addClass("time-sch-item-end").appendTo(o),e.Element=o;for(var w=0;w<b[e.sectionID].length;w++)if(b[e.sectionID][w].start>e.start){f=w;break}null===f&&(f=b[e.sectionID].length),b[e.sectionID].splice(f,0,e),o.data("item",e),TimeScheduler.SetupItemEvents(o)}for(var k in b)for(n=TimeScheduler.Sections[k],y=0;y<b[k].length;y++){var L,T;m=b[k][y];for(var S=0;S<y;S++){var C,M;M=(C=(g=b[k][S]).Element.position().top)+g.Element.outerHeight(),T=(L=m.Element.position().top)+m.Element.outerHeight(),(g.start<m.start&&g.start.format()!==m.start.format()&&m.start<g.end&&m.start.format()!==g.end.format()||g.start<m.end&&g.start.format()!==m.end.format()&&m.end<g.end&&m.end.format()!==g.end.format())&&(C<=L&&L<=M||C<=T&&T<=M)&&m.Element.css("top",M+1)}(T=m.Element.position().top+m.Element.outerHeight()+1)>n.container.height()&&(n.container.css("height",T),n.row.css("height",T))}},SetupItemEvents:function(t){var e=!1;TimeScheduler.Options.Events.ItemClicked&&(t.click(function(t){t.preventDefault(),t.stopPropagation(),e=!0,TimeScheduler.Options.Events.ItemClicked.call(this,t,$(this).data("item"))}),t.mousedown(function(t){t.preventDefault(),t.stopPropagation()}),t.mouseup(function(t){t.preventDefault(),t.stopPropagation()})),TimeScheduler.Options.Events.ItemMouseEnter&&t.mouseenter(function(t){TimeScheduler.Options.Events.ItemMouseEnter.call(this,t,$(this).data("item"))}),TimeScheduler.Options.Events.ItemMouseLeave&&t.mouseleave(function(t){TimeScheduler.Options.Events.ItemMouseLeave.call(this,t,$(this).data("item"))});var i=function(t,e){"hotel"===TimeScheduler.Options.timeMode?(t.set("hour",12).set("minute",0).set("second",0),e.set("hour",12).set("minute",0).set("second",0)):"day"===TimeScheduler.Options.timeMode&&(t.hour()>=12?t.add(1,"days").set("hour",0).set("minute",0).set("second",1):t.set("hour",0).set("minute",0).set("second",1),e.hour()>=12?e.add(1,"days").set("hour",0).set("minute",0).set("second",0):e.set("hour",0).set("minute",0).set("second",0))};if(TimeScheduler.Options.AllowDragging&&(t.draggable({helper:"clone",zIndex:1,appendTo:TimeScheduler.SectionWrap,distance:5,snap:".time-sch-section-container",snapMode:"inner",snapTolerance:10,containment:"parent",revert:function(){if($(this).hasClass("drag-revert"))return $(this).removeClass("drag-revert"),!0},drag:function(t,e){var i,n,o,s,r,a;TimeScheduler.Options.Events.ItemMovement&&(s=TimeScheduler.GetSelectedPeriod(),r=TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start,s),a=Math.abs(TimeScheduler.Options.Start.diff(r,"minutes")),i=$(t.target).data("item"),n=moment(TimeScheduler.Options.Start).tsAdd("minutes",a*(e.helper.position().left/TimeScheduler.SectionWrap.width())),o=moment(n).tsAdd("minutes",Math.abs(i.start.diff(i.end,"minutes"))),i.start<TimeScheduler.Options.Start&&(n.tsAdd("minutes",i.start.diff(TimeScheduler.Options.Start,"minutes")),o.tsAdd("minutes",i.start.diff(TimeScheduler.Options.Start,"minutes"))),TimeScheduler.Options.Events.ItemMovement.call(this,i,n,o))},start:function(t,i){if(e)return t.preventDefault(),void(e=!1);var n,o;n=$(t.target).data("item"),o=$(t.target).data("section");var s=!0;TimeScheduler.Options.Events.allowDrag&&(s=TimeScheduler.Options.Events.allowDrag.call(this,t,i,n,o)),s?(t.stopPropagation(),$(this).hide(),i.helper.children().not(".time-sch-item-content").remove(),TimeScheduler.Options.Events.ItemMovementStart&&TimeScheduler.Options.Events.ItemMovementStart.call(this,t,i)):t.preventDefault()},stop:function(t,e){$(this).length&&$(this).show(),TimeScheduler.Options.Events.ItemMovementEnd&&TimeScheduler.Options.Events.ItemMovementEnd.call(this,t,e),t.stopPropagation()},cancel:".time-sch-item-end, .time-sch-item-start, .time-sch-item-event"}),$(".time-sch-section-container").droppable({greedy:!0,hoverClass:"time-sch-droppable-hover",tolerance:"pointer",drop:function(t,e){var n,o,s,r,a,h,l;a=TimeScheduler.GetSelectedPeriod(),h=TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start,a),l=Math.abs(TimeScheduler.Options.Start.diff(h,"minutes")),n=e.draggable.data("item"),o=$(this).data("section"),s=moment(TimeScheduler.Options.Start).tsAdd("minutes",l*(e.helper.position().left/$(this).width())),r=moment(s).tsAdd("minutes",Math.abs(n.start.diff(n.end,"minutes")));var c=!0;if(TimeScheduler.Options.Events.allowDrop&&(c=TimeScheduler.Options.Events.allowDrop.call(this,t,e,n,o,s,r)),!c)return $(e.draggable).addClass("drag-revert");n.start<TimeScheduler.Options.Start&&(s.tsAdd("minutes",n.start.diff(TimeScheduler.Options.Start,"minutes")),r.tsAdd("minutes",n.start.diff(TimeScheduler.Options.Start,"minutes"))),i(s,r),e.draggable.appendTo($(this)),e.draggable.css({left:e.helper.position().left-$(this).position().left,top:e.helper.position().top-$(this).position().top}),TimeScheduler.Options.DisableOnMove&&(e.draggable.data("uiDraggable")&&e.draggable.draggable("disable"),e.draggable.data("uiResizable")&&e.draggable.resizable("disable")),e.draggable.show(),TimeScheduler.Options.Events.ItemDropped&&setTimeout(function(){TimeScheduler.Options.Events.ItemDropped.call(this,n,o,s,r)},0)}})),TimeScheduler.Options.AllowResizing){var n=null;t.find(".time-sch-item-start").length&&t.find(".time-sch-item-end").length?n="e, w":t.find(".time-sch-item-start").length?n="w":t.find(".time-sch-item-end").length&&(n="e"),n&&t.resizable({handles:n,resize:function(t,e){var i,n,o,s,r,a;TimeScheduler.Options.Events.ItemMovement&&(s=TimeScheduler.GetSelectedPeriod(),r=TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start,s),a=Math.abs(TimeScheduler.Options.Start.diff(r,"minutes")),i=$(this).data("item"),e.position.left!==e.originalPosition.left?(n=moment(TimeScheduler.Options.Start).tsAdd("minutes",a*($(this).position().left/TimeScheduler.SectionWrap.width())),o=i.end):(n=i.start,o=moment(TimeScheduler.Options.Start).tsAdd("minutes",a*(($(this).position().left+$(this).width())/TimeScheduler.SectionWrap.width()))),TimeScheduler.Options.Events.ItemMovement.call(this,i,n,o))},start:function(t,e){$(this).find(".time-sch-item-event").hide(),TimeScheduler.Options.Events.ItemMovementStart&&TimeScheduler.Options.Events.ItemMovementStart.call(this)},stop:function(t,e){var n,o,s,r,a,h,l;l=$(this),r=TimeScheduler.GetSelectedPeriod(),a=TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start,r),h=Math.abs(TimeScheduler.Options.Start.diff(a,"minutes")),n=l.data("item"),e.position.left!==e.originalPosition.left?(o=moment(TimeScheduler.Options.Start).tsAdd("minutes",h*(l.position().left/TimeScheduler.SectionWrap.width())),s=n.end):(o=n.start,s=moment(TimeScheduler.Options.Start).tsAdd("minutes",h*((l.position().left+l.width())/TimeScheduler.SectionWrap.width()))),TimeScheduler.Options.DisableOnMove&&(l.data("uiDraggable")&&l.draggable("disable"),l.data("uiResizable")&&l.resizable("disable"),l.find(".time-sch-item-event").show()),i(o,s),TimeScheduler.Options.Events.ItemMovementEnd&&TimeScheduler.Options.Events.ItemMovementEnd.call(this),TimeScheduler.Options.Events.ItemResized&&TimeScheduler.Options.Events.ItemResized.call(this,n,o,s)}})}TimeScheduler.Options.Events.ItemEventClicked&&t.find(".time-sch-item-event").click(function(t){var e=$(this).closest(".time-sch-item");t.preventDefault(),TimeScheduler.Options.Events.ItemEventClicked.call(this,$(this).data("event"),e.data("item"))}),TimeScheduler.Options.Events.ItemEventMouseEnter&&t.find(".time-sch-item-event").mouseenter(function(t){var e=$(this).closest(".time-sch-item");t.preventDefault(),TimeScheduler.Options.Events.ItemEventClicked.call(this,$(this).data("event"),e.data("item"))}),TimeScheduler.Options.Events.ItemEventMouseLeave&&t.find(".time-sch-item-event").mouseleave(function(t){var e=$(this).closest(".time-sch-item");t.preventDefault(),TimeScheduler.Options.Events.ItemEventClicked.call(this,$(this).data("event"),e.data("item"))})},FillSections:function(t){!TimeScheduler.CachedSectionResult||t?TimeScheduler.Options.GetSections.call(this,TimeScheduler.FillSections_Callback):TimeScheduler.FillSections_Callback(TimeScheduler.CachedSectionResult)},FillSections_Callback:function(t){TimeScheduler.CachedSectionResult=t,TimeScheduler.CreateSections(t),TimeScheduler.FillSchedule()},FillSchedule:function(){var t,e;t=TimeScheduler.GetSelectedPeriod(),e=TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start,t),TimeScheduler.Options.GetSchedule.call(this,TimeScheduler.FillSchedule_Callback,TimeScheduler.Options.Start,e)},FillSchedule_Callback:function(t){TimeScheduler.CachedScheduleResult=t,TimeScheduler.CreateItems(t)},FillHeader:function(){var t,e,i,n,o,s;if(e=$(document.createElement("div")).addClass("time-sch-period-container"),i=$(document.createElement("div")).addClass("time-sch-time-container"),t=$(document.createElement("div")).addClass("time-sch-title"),TimeScheduler.HeaderWrap.empty().append(e,i,t),n=TimeScheduler.GetSelectedPeriod(),o=TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start,n),t.text(TimeScheduler.Options.Start.format(TimeScheduler.Options.HeaderFormat)+" - "+o.tsAdd("minutes",-1).format(TimeScheduler.Options.HeaderFormat)),"string"==typeof TimeScheduler.Options.HeaderDescription)$(document.createElement("div")).text(TimeScheduler.Options.HeaderDescription).appendTo(t);else if("function"==typeof TimeScheduler.Options.HeaderDescription){let e=TimeScheduler.Options.HeaderDescription();e&&e.appendTo(t)}for(var r=0;r<TimeScheduler.Options.Periods.length;r++)s=TimeScheduler.Options.Periods[r],$(document.createElement("a")).addClass("time-sch-period-button time-sch-button").addClass(s.Name===n.Name?"time-sch-selected-button":"").attr("href","#").append(s.Label).data("period",s).click(TimeScheduler.Period_Clicked).appendTo(e);TimeScheduler.Options.ShowGoto&&$(document.createElement("a")).addClass("time-sch-time-button time-sch-time-button-goto time-sch-button").attr({href:"#",title:TimeScheduler.Options.Text.GotoButtonTitle}).append(TimeScheduler.Options.Text.GotoButton).click(TimeScheduler.GotoTimeShift_Clicked).appendTo(i),TimeScheduler.Options.ShowToday&&$(document.createElement("a")).addClass("time-sch-time-button time-sch-time-button-today time-sch-button").attr({href:"#",title:TimeScheduler.Options.Text.TodayButtonTitle}).append(TimeScheduler.Options.Text.TodayButton).click(TimeScheduler.TimeShift_Clicked).appendTo(i),$(document.createElement("a")).addClass("time-sch-time-button time-sch-time-button-prev time-sch-button").attr({href:"#",title:TimeScheduler.Options.Text.PrevButtonTitle}).append(TimeScheduler.Options.Text.PrevButton).click(TimeScheduler.TimeShift_Clicked).appendTo(i),$(document.createElement("a")).addClass("time-sch-time-button time-sch-time-button-next time-sch-button").attr({href:"#",title:TimeScheduler.Options.Text.NextButtonTitle}).append(TimeScheduler.Options.Text.NextButton).click(TimeScheduler.TimeShift_Clicked).appendTo(i)},GotoTimeShift_Clicked:function(t){t.preventDefault(),$(document.createElement("input")).attr("type","text").css({position:"absolute",left:0,bottom:0}).appendTo($(this)).datepicker({onClose:function(){$(this).remove()},onSelect:function(t){TimeScheduler.Options.Start=moment(t),TimeScheduler.Init()},defaultDate:TimeScheduler.Options.Start.toDate()}).datepicker("show").hide()},TimeShift_Clicked:function(t){var e;t.preventDefault(),e=TimeScheduler.GetSelectedPeriod(),$(this).is(".time-sch-time-button-today")?TimeScheduler.Options.Start=moment().startOf("day"):$(this).is(".time-sch-time-button-prev")?TimeScheduler.Options.Start.tsAdd("minutes",-1*e.TimeframeOverall):$(this).is(".time-sch-time-button-next")&&TimeScheduler.Options.Start.tsAdd("minutes",e.TimeframeOverall),TimeScheduler.Options.Events.calendarTimeShift?TimeScheduler.Options.Events.calendarTimeShift.call(this,t,TimeScheduler.Options.Start):TimeScheduler.Init()},SelectPeriod:function(t){TimeScheduler.Options.SelectedPeriod=t,TimeScheduler.Init()},Period_Clicked:function(t){t.preventDefault(),TimeScheduler.SelectPeriod($(this).data("period").Name)}};!function(t){var e=function(i,n){this.element=i,this.element.hasClass("flipTimer")||this.element.addClass("flipTimer"),this.userOptions=n,this.defaultOptions=e.defaults,this.options=t.extend({},this.defaultOptions,this.userOptions),this.element.find(".seconds").length>0&&(this.options.seconds=this.element.find(".seconds")[0]),this.element.find(".minutes").length>0&&(this.options.minutes=this.element.find(".minutes")[0]),this.element.find(".hours").length>0&&(this.options.hours=this.element.find(".hours")[0]),this.element.find(".days").length>0&&(this.options.days=this.element.find(".days")[0]),this.initDate=new Date,this.options.date=new Date(this.options.date),this.calculateDate()};e.defaults={seconds:!1,minutes:!1,hours:!1,days:!1,date:(new Date).toDateString(),direction:"up",callback:null,digitTemplate:'<div class="digit">  <div class="digit-top">    <span class="digit-wrap"></span>  </div>  <div class="shadow-top"></div>  <div class="digit-bottom">    <span class="digit-wrap"></span>  </div>  <div class="shadow-bottom"></div></div>'},e.prototype={calculateDate:function(){var t;"down"==this.options.direction?t=this.options.date-this.initDate:"up"==this.options.direction&&(t=this.initDate-this.options.date),this.seconds=Math.floor(t/1e3)%60,this.minutes=Math.floor(t/1e3/60)%60,this.hours=Math.floor(t/1e3/3600)%24,this.days=Math.floor(t/1e3/60/60/24),this.render()},render:function(){this.options.seconds&&this.renderDigits(this.options.seconds,this.seconds),this.options.minutes&&this.renderDigits(this.options.minutes,this.minutes),this.options.hours&&this.renderDigits(this.options.hours,this.hours),this.options.days&&this.renderDigits(this.options.days,this.days),this.startTimer()},renderDigits:function(e,i){var n,o,s,r,a,h,l=this;0==t(e).find(".digit").length&&(l.days<0&&l.hours<0&&l.minutes<0&&l.seconds<0?h=[0,0]:(h=String(i).split("")).length<2&&h.unshift(0),r=e==l.options.seconds||e==l.options.minutes?5:e==l.options.hours?2:9,h.forEach(function(){t(e).append('<div class="digit-set"></div>')}),t(e).find(".digit-set").each(function(e){for(s=0==e?r:9,n=0;n<=s;n++)t(this).append(l.options.digitTemplate),o="down"==l.options.direction?s-n:n,a=t(this).find(".digit")[n],t(a).find(".digit-wrap").append(o),o==h[e]?t(a).addClass("active"):0!=h[e]&&o+1==h[e]?t(a).addClass("previous"):0==h[e]&&o==s&&t(a).addClass("previous")}))},startTimer:function(){var t=this;clearInterval(this.timer),this.timer=setInterval(function(){if(t.days<=0&&t.hours<=0&&t.minutes<=0&&t.seconds<=0)return t.options.callback&&t.options.callback(t),void clearInterval(t.timer);t.days>999||999==t.days&&23==t.hours&&59==t.minutes&&59==t.seconds?clearInterval(t.timer):("down"==t.options.direction?t.seconds--:t.seconds++,t.options.seconds&&t.increaseDigit(t.options.seconds),60!=t.seconds&&-1!=t.seconds||("down"==t.options.direction?(t.seconds=59,t.minutes--):(t.seconds=0,t.minutes++),t.options.minutes&&t.increaseDigit(t.options.minutes)),60!=t.minutes&&-1!=t.minutes||("down"==t.options.direction?(t.minutes=59,t.hours--):(t.minutes=0,t.hours++),t.options.hours&&t.increaseDigit(t.options.hours)),24!=t.hours&&-1!=t.hours||("down"==t.options.direction?(t.hours=23,t.days--):(t.hours=0,t.days++),t.options.days&&t.increaseDigit(t.options.days)))},1e3)},increaseDigit:function(e){var i=new Array,n=this;t(e).find(".digit-set").each(function(){i.push(this)}),function o(s){var r=t(s).find(".active"),a=t(s).find(".previous"),h=t.inArray(s,i);a.removeClass("previous");r.removeClass("active").addClass("previous");0==r.next().length?("down"!=n.options.direction||e!=n.options.hours||-1!=n.hours&&23!=n.hours||10!=t(s).find(".digit").length?t(s).find(".digit:first-child").addClass("active"):t(t(s).find(".digit")[6]).addClass("active"),0!=h&&o(i[h-1])):"up"==n.options.direction&&e==n.options.hours&&24==n.hours?(t(s).find(".digit:first-child").addClass("active"),o(i[h-1])):r.next().addClass("active")}(i[i.length-1])}},t.fn.flipTimer=function(i){return this.each(function(){t(this).data("flipTimer")||t(this).data("flipTimer",new e(t(this),i))})}}(jQuery);